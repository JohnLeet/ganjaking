jQuery(function(a){a(document).ready(function(m){var s=m("div.woocommerce-shipping-fields"),t=m("div.ywcmas_multiple_addresses_manager"),n=m("div.ywcmas_manage_addresses_viewer_container"),c=m("div.ywcmas_manage_addresses_tables_container"),i={init:function(){this.change_events(),this.click_events(),this.load_pp_buttons()},after_update_multi_shipping_data:function(){m("input.ywcmas_addresses_manager_table_qty").trigger("change"),m("table.ywcmas_addresses_manager_table").each(function(a,e){var _=m(e).find("tr.ywcmas_addresses_manager_table_shipping_selection_row").length,s=parseInt(m(e).find(".ywcmas_different_addresses_limit").val()),t=!1;m(e).find(".ywcmas_addresses_manager_table_qty").each(function(a,e){1<m(e).val()&&(t=!0)});var n=m(e).find(".ywcmas_addresses_manager_table_shipping_selector_id").first(),d=m(e).find(".ywcmas_excluded_item"),c=m(e).find(".ywcmas_no_more_shipping_selectors_alert"),i=m(e).find(".ywcmas_increase_qty_alert"),r=m(e).find("a.ywcmas_new_shipping_selector_button");"excluded_item"===n.val()?d.show():s<=_?c.show():t?r.show():i.show()}),m(document.body).trigger("update_checkout")},change_events:function(){m(document.body).on("change","#ywcmas_manage_addresses_cb",function(a){var e=m(this).prop("checked");e?(s.hide(),t.slideDown(),i.block_addresses_manager()):(s.show(),t.hide());var _={action:"ywcmas_update_multi_shipping_data",update_data_nonce:ywcmas_checkout_params.update_data_nonce,multi_shipping_enabled:e};m.post(ywcmas_checkout_params.ajax_url,_,function(a){c.html(a),i.unblock_addresses_manager(),i.after_update_multi_shipping_data()})}),m("#ywcmas_manage_addresses_cb").trigger("change"),m(document.body).on("change","select.ywcmas_addresses_manager_address_select",function(a,e){var _=e||m(this).val();m(".ywcmas_manage_addresses_viewer_id_selected").val(_),i.block_addresses_manager(),m.post(ywcmas_checkout_params.ajax_url,{action:"ywcmas_print_address",ywcmas_address_id:_},function(a){n.html(a),i.unblock_addresses_manager(),i.load_pp_buttons()})}),m(document.body).on("keyup mouseup","input.ywcmas_addresses_manager_table_qty",function(a){var e=m(this).closest("td"),_=m(this).val(),s=e.find(".ywcmas_addresses_manager_table_current_qty").val(),t=e.find("a.ywcmas_addresses_manager_table_update_qty_button");0<_&&_!=s?t.show():t.hide()}),m("input.ywcmas_addresses_manager_table_qty").trigger("change"),m(document.body).on("change","select.ywcmas_addresses_manager_table_shipping_address_select",function(a){var e=m(this).closest("td.ywcmas_addresses_manager_table_qty_td"),_=m(this).val(),s=e.find("input.ywcmas_addresses_manager_table_shipping_selector_id").val(),t=e.find("input.ywcmas_addresses_manager_table_item_cart_id").val();i.block_addresses_manager();var n={action:"ywcmas_update_multi_shipping_data",update_data_nonce:ywcmas_checkout_params.update_data_nonce,update_data_action:"ywcmas_update_shipping_address",new_shipping_address:_,shipping_selector_id:s,item_cart_id:t};m.post(ywcmas_checkout_params.ajax_url,n,function(a){c.html(a),i.unblock_addresses_manager(),i.after_update_multi_shipping_data()})})},click_events:function(){m(document.body).on("click","a.ywcmas_addresses_manager_table_update_qty_button",function(a){a.preventDefault();var e=m(this).closest("div.ywcmas_qty"),_=e.find("input.ywcmas_addresses_manager_table_qty").val(),s=e.find("input.ywcmas_addresses_manager_table_current_qty").val(),t=e.find("input.ywcmas_addresses_manager_table_shipping_selector_id").val(),n=e.find("input.ywcmas_addresses_manager_table_item_cart_id").val();if(0<_&&_!=s){i.block_addresses_manager();var d={action:"ywcmas_update_multi_shipping_data",update_data_nonce:ywcmas_checkout_params.update_data_nonce,update_data_action:"ywcmas_update_qty",new_qty:_,shipping_selector_id:t,item_cart_id:n};m.post(ywcmas_checkout_params.ajax_url,d,function(a){c.html(a),i.unblock_addresses_manager(),i.after_update_multi_shipping_data()})}}),m(document.body).on("click","a.ywcmas_new_shipping_selector_button",function(a){a.preventDefault();var e=m(this).closest("table.ywcmas_addresses_manager_table"),_=!1;if(e.find("input.ywcmas_addresses_manager_table_current_qty").each(function(a,e){1<m(e).val()&&(_=!0)}),_){var s=e.find("input.ywcmas_addresses_manager_table_item_cart_id").val();i.block_addresses_manager();var t={action:"ywcmas_update_multi_shipping_data",update_data_nonce:ywcmas_checkout_params.update_data_nonce,update_data_action:"ywcmas_new_shipping_selector",item_cart_id:s};m.post(ywcmas_checkout_params.ajax_url,t,function(a){c.html(a),i.unblock_addresses_manager(),i.after_update_multi_shipping_data()})}}),m(document.body).on("click","div.ywcmas_addresses_manager_table_remove_button",function(a){a.preventDefault();var e=m(this).closest("td.ywcmas_addresses_manager_table_qty_td"),_=e.find("input.ywcmas_addresses_manager_table_current_qty").val(),s=e.find("input.ywcmas_addresses_manager_table_item_cart_id").val(),t=e.find("input.ywcmas_addresses_manager_table_shipping_selector_id").val();i.block_addresses_manager();var n={action:"ywcmas_update_multi_shipping_data",update_data_nonce:ywcmas_checkout_params.update_data_nonce,update_data_action:"ywcmas_delete_shipping_selector",current_qty:_,item_cart_id:s,shipping_selector_id:t};m.post(ywcmas_checkout_params.ajax_url,n,function(a){c.html(a),i.unblock_addresses_manager(),i.after_update_multi_shipping_data()})})},load_pp_buttons:function(){m(document.body).trigger("ywcmas_init_pp","checkout")},block_addresses_manager:function(){t.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock_addresses_manager:function(){t.unblock()}};i.init()})});