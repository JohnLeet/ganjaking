jQuery(document).ready(function(a){var h=a("form.cart"),l=a('input[name="payment_type"]'),f=a(".yith-wcdp-deposit-shipping"),m=f.find(".yith-wcdp-shipping-form"),p=null,r=function(){l.length?l.on("change",function(){var e=a(this),c=e.val();e.is(":checked")&&("deposit"===c?f.slideDown():f.slideUp())}).change():f.length&&f.slideDown()},q=function(e){f=h.find(".yith-wcdp-deposit-shipping");l=a('input[name="payment_type"]');f.length&&(r(),a.ajax({beforeSend:function(){f.block({message:null,overlayCSS:{background:"#fff",
            opacity:.6}})},complete:function(){f.unblock()},data:{product_id:e.variation_id,qty:h.find('input[name="quantity"]').val(),action:yith_wcdp.actions.calculate_shipping},dataType:"json",method:"post",success:function(a){m.find("table").html(a.template)},url:yith_wcdp.ajax_url}))};h.on("found_variation",function(e,c){var d=a(this),f=d.find(".woocommerce-variation-add-to-cart"),b=d.find(".yith-wcdp-single-add-to-cart-fields"),k=b.find(".full-price"),t=b.find(".deposit-price"),u=b.data("deposit-type"),
    h=b.data("deposit-amount"),l=b.data("deposit-rate"),g=0,m="";g=0;g="";yith_wcdp.ajax_variations?p=a.ajax({beforeSend:function(){null!=p&&p.abort();d.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){d.unblock()},data:{variation_id:c.variation_id,action:"get_deposit_template"},dataType:"html",success:function(e){b.length&&b.parent().remove();f.before(e);b=d.find(".yith-wcdp-single-add-to-cart-fields");q(c);a(document).trigger("yith_wcdp_updated_deposit_form",b)},
    url:yith_wcdp.ajax_url}):"undefined"!==typeof c.add_deposit_to_cart?(b.length&&b.parent().remove(),f.before(c.add_deposit_to_cart),q(c),a(document).trigger("yith_wcdp_updated_deposit_form",b)):b.length&&(g=c.display_price,m="( "+accounting.formatMoney(g,{symbol:yith_wcdp.currency_format.symbol,decimal:yith_wcdp.currency_format.decimal,thousand:yith_wcdp.currency_format.thousand,precision:yith_wcdp.currency_format.precision,format:yith_wcdp.currency_format.format})+" )",g="amount"===u?Math.min(g,h):
    Math.min(g,g*l/100),g="( "+accounting.formatMoney(g,{symbol:yith_wcdp.currency_format.symbol,decimal:yith_wcdp.currency_format.decimal,thousand:yith_wcdp.currency_format.thousand,precision:yith_wcdp.currency_format.precision,format:yith_wcdp.currency_format.format})+" )",k.html(m),t.html(g),q(c),a(document).trigger("yith_wcdp_updated_deposit_form",b))}).on("reset_data",function(){var e=a("#yith-wcdp-add-deposit-to-cart");e.parents(".variations_form").length&&yith_wcdp.variations_handling&&e.remove()}).on("click",
    ".reset_variations",function(){a("#yith-wcdp-add-deposit-to-cart").hide()}).on("click",'#yith-wcdp-add-deposit-to-cart button[name="calc_shipping"]',function(e){e.preventDefault();var c=a(this);e=a("form.cart");var d=e.find('button[name="add-to-cart"]').val(),n=e.find('input[name="variation_id"]').val(),b=c.closest(".shipping-calculator-form");c=b.find("#calc_shipping_country").val();var k=b.find("#calc_shipping_city").val(),h=b.find("#calc_shipping_state").val();b=b.find("#calc_shipping_postcode").val();
    d||n||(d=e.find('input[name="add-to-cart"]').val());(d||n)&&a.ajax({beforeSend:function(){f.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){f.unblock()},data:{action:yith_wcdp.actions.change_location,product_id:n?n:d,qty:e.find('input[name="quantity"]').val(),calc_shipping_country:c,calc_shipping_city:k,calc_shipping_state:h,calc_shipping_postcode:b},dataType:"json",method:"post",success:function(b){a(".shipping-calculator-form").slideUp("slow");m.find("table").html(b.template);
            "undefined"!=typeof b.notices&&(f.prepend(a("<div>").addClass("yith-wcdp-messages").html(b.notices)).slideDown(),window.setTimeout(function(){a(".yith-wcdp-messages").slideUp("slow",function(){a(this).remove()})},3E3))},url:yith_wcdp.ajax_url})}).find("select:eq(0)").change();a(document).on("yith_wcpb_ajax_update_price_request",function(e,c){var d=a(".yith-wcdp-single-add-to-cart-fields"),f=d.find(".full-price"),b=d.find(".deposit-price");d.length&&"undefined"!=typeof c&&"undefined"!=typeof c.deposit_html&&
(f.html("( "+c.price_html+" )"),b.html("( "+c.deposit_html+" )"))});a(document).on("yith_wcevti_price_refreshed yith_wapo_product_price_updated yith_wcp_price_updated",function(e,c){var d=a(".yith-wcdp-single-add-to-cart-fields"),f=d.find(".full-price"),b=d.find(".deposit-price"),k=d.data("deposit-type"),h=d.data("deposit-amount"),l=d.data("deposit-rate"),m=a(".ywcp_wcp_group_total");!d.length||1===m.length&&"yith_wapo_product_price_updated"===e.type||(d="( "+accounting.formatMoney(c,{symbol:yith_wcdp.currency_format.symbol,
    decimal:yith_wcdp.currency_format.decimal,thousand:yith_wcdp.currency_format.thousand,precision:yith_wcdp.currency_format.precision,format:yith_wcdp.currency_format.format})+" )",k="amount"===k?Math.min(c,h):Math.min(c,c*l/100),k="( "+accounting.formatMoney(k,{symbol:yith_wcdp.currency_format.symbol,decimal:yith_wcdp.currency_format.decimal,thousand:yith_wcdp.currency_format.thousand,precision:yith_wcdp.currency_format.precision,format:yith_wcdp.currency_format.format})+" )",f.html(d),b.html(k))});
    (function(){a(".shipping-calculator-form").hide();r();a(document).on("click",".shipping-calculator-button",function(){a(".shipping-calculator-form").slideToggle("slow",function(){a("body").trigger("country_to_state_changed")});return!1})})()});