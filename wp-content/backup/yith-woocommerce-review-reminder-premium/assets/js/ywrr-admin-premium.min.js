var array_unique_noempty,element_box;jQuery(function(l){l("body").on("click",".ywrr-bulk-actions",function(){var i=l(this).parent();i.find(".ywrr-ajax-result").remove(),i.append('<div class="ywrr-ajax-result progress">'+ywrr_admin.please_wait+"</div>"),l.post(ywrr_admin.ajax_url,{action:l(this).data("action")},function(e){i.find(".ywrr-ajax-result").removeClass("progress").addClass(!0===e.success?"success":"fail").html(e.message)})}).on("click",".ywrr-compact-list__show-more, .ywrr-compact-list__hide-more",function(e){e.stopPropagation();var i=l(this).closest(".ywrr-compact-list"),c=i.find(".ywrr-compact-list__hidden-items");i.toggleClass("ywrr-compact-list--open"),c.length&&(i.is(".ywrr-compact-list--open")?c.slideDown(300):c.slideUp(300))}),l(document).ready(function(c){c("select#ywrr_mail_template").change(function(){c(this).parent().find(".ywrr-mailskin").remove(),c(this).parent().append('<div class="ywrr-mailskin"><img src="#" /></div>');var e=c(this).val(),i=c(".ywrr-mailskin img");i.fadeOut("fast",function(){i.attr("src",ywrr_admin.assets_url+"/images/skins/"+e+".png").fadeIn("fast")})}).change(),element_box.init()}),array_unique_noempty=function(e){var c=[];return l.each(e,function(e,i){(i=l.trim(i))&&-1===l.inArray(i,c)&&c.push(i)}),c},element_box={clean:function(e){return e=e.replace(/\s*,\s*/g,",").replace(/,+/g,",").replace(/[,\s]+$/,"").replace(/^[,\s]+/,"")},parseTags:function(e){var i=e.id.split("-check-num-")[1],c=l(e).closest(".ywcc-checklist-div"),t=c.find(".ywcc-values"),s=t.val().split(","),n=[];return delete s[i],l.each(s,function(e,i){(i=l.trim(i))&&n.push(i)}),t.val(this.clean(n.join(","))),this.quickClicks(c),!1},quickClicks:function(e){var i,c=l(".ywcc-values",e),s=l(".ywcc-value-list ul",e),n=l(e).attr("id");c.length&&(i=c.val().split(","),s.empty(),l.each(i,function(e,i){var c,t;(i=l.trim(i))&&(c=l('<li class="select2-selection__choice" />'),(t=l('<span id="'+n+"-check-num-"+e+'" class="select2-selection__choice__remove" tabindex="0"></span>')).on("click keypress",function(e){"click"!==e.type&&13!==e.keyCode||(13===e.keyCode&&l(this).closest(".ywcc-checklist-div").find("input.ywcc-insert").focus(),element_box.parseTags(this))}),c.prepend(i).prepend(t),s.append(c))}))},flushTags:function(e,i,c){var t,s,n,a=l(".ywcc-values",e),r=l("input.ywcc-insert",e);return void 0===(n=(i=i||!1)?l(i).text():r.val())||(s=(t=a.val())?t+","+n:n,s=this.clean(s),s=array_unique_noempty(s.split(",")).join(","),a.val(s),this.quickClicks(e),i||r.val(""),void 0===c&&r.focus()),!1},init:function(){var e=l(".ywcc-checklist-ajax");l(".ywcc-checklist-div").each(function(){element_box.quickClicks(this)}),l("input.ywcc-insert",e).keyup(function(e){if(13===e.which)return element_box.flushTags(l(this).closest(".ywcc-checklist-div")),!1}).keypress(function(e){if(13===e.which)return e.preventDefault(),!1})}}});