jQuery(document).ready(function(o){"use strict";var a=o("form.pending_survey_form"),r={message:null,overlayCSS:{background:"#fff",opacity:.6},ignoreIfBlocked:!0},u=function(e){var a=e.parent(),r=!0;return a.parent().hasClass("validate-require")&&(e.is("input")||e.is("select")||e.is("textarea")&&(r=""!=e.val(),a.addClass("validate_is_required"))),r&&a.removeClass("validate_is_required"),r},n=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))};o(".ywcpos_sendsurvey").on("click",function(e){e.preventDefault();var i=!0,t={answers:[]};a.find(".pending_field").each(function(){var e,a,r=o(this),n=r.parent().parent().find("h3").html(),s=(a="",(e=r).is("input")||e.is("select")||e.is("textarea")&&(a=e.val()),a);i=i&&u(r),t.answers.push({survey_name:n,survey_answer:s})}),i&&(t.action=ywcpos_params.actions.validate_survey,t.email_id=n("email_id"),t.order_id=n("order_id"),t.survey_id=o(".survey_id").val(),a.block(r),o.ajax({type:"POST",url:ywcpos_params.admin_url,data:t,dataType:"json",success:function(e){a.unblock(),o(".pending_survey_form").find(".ywcpos_sendsurvey").remove(),o("#survey_thankyou_content").show()}})),o("html, body").animate({scrollTop:0},800)}),o("input,select,textarea").on("blur change",function(e){u(o(this))})});