jQuery(document).ready(function(s){var e=(s(".survey_after_before_add_to_cart .yith_surveys_container"),s(".survey_after_product_summary")),r=s(".yith_surveys_other_container");e.find(".surveys_list *").size()>0&&e.removeClass("survey_hide");var a=r.parent();a.hasClass("widget_yith-wc-surveys")&&0==r.find("*").size()&&a.remove(),s(".yith_send_answer").on("click",function(e){function r(e,t){var u={yith_surveys_ids:e,yith_answers_ids:t,action:yith_survey_frontend_params.actions.save_surveys_voting};a.addClass("loading"),s.ajax({type:"POST",url:yith_survey_frontend_params.ajax_url,data:u,dataType:"json",success:function(t){if((y==i.length||"undefined"==typeof t.result||"already_response"==t.result)&&a.removeClass("loading"),"true"==t.result){var u=s("#yith_surveys_answers-"+e),v=u.parents(".yith_single_surveys_container");v.html('<div class="yith_survey_thanks">'+yith_survey_frontend_params.messages.survey_thanks_voting+"</div>"),y++,r(i[y],_[y])}y==n.size()&&(a.removeClass("loading"),a.hide())}})}e.preventDefault();var a=s(this),t=a.parents(".surveys_list"),n=t.find(".yith_surveys_answers"),i=new Array,_=new Array;n.each(function(){var e=s(this).attr("id"),r=s(this).val();""!=r&&(e=e.split("-"),e=e[1],i.push(e),_.push(r))});var y=0;i.length>0&&r(i[y],_[y])}),s(".yith_send_single_answer").on("click",function(e){e.preventDefault();var r=s(this),a=r.parents(".yith_single_surveys_container"),t=a.find(".yith_surveys_answers"),n=t.attr("id"),i=t.val();if(""!=i){n=n.split("-"),n=n[1];var _={message:null,overlayCSS:{background:"#000",opacity:.6},ignoreIfBlocked:!0},y={yith_surveys_ids:n,yith_answers_ids:i,action:yith_survey_frontend_params.actions.save_surveys_voting};a.block(_),s.ajax({type:"POST",url:yith_survey_frontend_params.ajax_url,data:y,dataType:"json",success:function(e){if("true"==e.result){var t=s("#yith_surveys_answers-"+n),i=t.parents(".yith_single_surveys_container");i.after('<div class="yith_survey_thanks">'+yith_survey_frontend_params.messages.survey_thanks_voting+"</div>"),"yes"==yith_survey_frontend_params.hide_survey_after_answer&&i.addClass("survey_hide")}a.unblock(),r.hide()}})}}),s("body").on("init-survey-form",function(){}).trigger("init-survey-form")});