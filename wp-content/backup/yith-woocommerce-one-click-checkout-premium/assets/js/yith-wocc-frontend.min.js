jQuery(document).ready(function(r){"use strict";var o=r("#yith-wocc-modal"),t=o.find(".yith-wacp-close"),n=r("#yith-wocc-modal-overlay"),d=function(){n.removeClass("open"),o.removeClass("open"),r(document).trigger("yith_wocc_closed_modal")},c=function(){o.css({left:"50%",top:"50%","margin-left":-o.outerWidth()/2,"margin-top":-o.outerHeight()/2})};r(document).on("click",".yith-wocc-activate",function(t){if("undefined"==typeof yith_wocc)return!1;t.preventDefault();var o=r(this);"undefined"!=typeof r.fn.block&&o.block({message:null,overlayCSS:{background:"#fff no-repeat center",opacity:.5,cursor:"none"}}),r.ajax({url:yith_wocc.ajaxurl,data:{context:"frontend",product_id:o.data("product_id"),is_loop:o.data("is_loop"),action:yith_wocc.action_load,_nonce:yith_wocc.nonce_load},dataType:"html",success:function(t){var e=o.closest(".yith-wocc-wrapper");o.replaceWith(r(t).filter(".yith-wocc-wrapper").html()),e.yith_wocc_init()}})}),r.fn.yith_wocc_init=function(){r(this).addClass("initialized");var t=r(this).find(".yith-wocc-select-address"),e=r(this).find(".yith-wocc-button");e.one("click",function(){r('[name="_yith_wocc_one_click"]').val("is_one_click")}),t.on("change",function(){var a=r(this),t=a.closest(".yith-wocc-wrapper").find(".yith-wocc-button");"add-new"!=a.val()&&t.attr("data-address",a.val()),"add-new"==a.val()&&"undefined"!=typeof yith_wocc_address&&"undefined"!=typeof yith_wocc&&("undefined"!=typeof r.fn.perfectScrollbar&&o.find(".woocommerce").perfectScrollbar({suppressScrollX:!0}),c(),o.addClass("open"),n.addClass("open"),o.find("form").on("submit",function(t){t.preventDefault();var n=r(this),c=o.find(".woocommerce"),e=n.serializeArray(),i=n.find('input[type="submit"]');i.prop("disabled",!0),e.push({name:"_nonce",value:yith_wocc_address.action_nonce},{name:"action",value:yith_wocc_address.action_add},{name:"context",value:"frontend"}),"undefined"!=typeof r.fn.block&&n.block({message:null,overlayCSS:{background:"#fff no-repeat center",opacity:.5,cursor:"none"}}),r.ajax({url:yith_wocc.ajaxurl,data:r.param(e),dataType:"json",success:function(t){var e,o=r(t.html);t.error?((e=n.siblings(".woocommerce-error")).length?e.replaceWith(o):n.before(o),c.scrollTop(0),c.perfectScrollbar("update")):(a.find("option").remove(),a.append(r(t.html).find("option")),a.val(t.key).trigger("change"),d(),n.trigger("reset")),n.unblock(),i.prop("disabled",!1)},error:function(t){n.unblock(),i.prop("disabled",!1)}})}))}),e.on("click",function(){var t=r(this).attr("href"),e=r(this).data("address");t&&void 0!==e&&r(this).prop("href",t+"&_yith_wocc_select_address="+e)}),"undefined"!=typeof r.fn.select2&&t.select2({placeholder:yith_wocc.select_placeholder}),r(document).on("yith_wocc_closed_modal",function(){"add-new"==t.val()&&(t.val(""),t.trigger("change"))})},r("form.variations_form").on("show_variation",function(t,e,o){o?r(this).find("button.yith-wocc-button").removeClass("disabled"):r(this).find("button.yith-wocc-button").addClass("disabled")}),r("form.variations_form").on("hide_variation",function(t,e,o){r(this).find("button.yith-wocc-button").addClass("disabled")}),r(document).on("click",".yith-wocc-button",function(){r(this).is(".disabled")&&event.preventDefault()}),r(document).find(".yith-wocc-wrapper").each(function(){r(this).yith_wocc_init()}),n.on("click",function(t){t.preventDefault(),d()}),t.on("click",function(t){t.preventDefault(),d()}),r(window).on("resize",c),r(document).on("yith-wcan-ajax-filtered yith_infs_added_elem",function(){r(document).find(".yith-wocc-wrapper:not(.initialized)").each(function(){r(this).yith_wocc_init()})})});