!function(p){p(window).on("elementor/frontend/init",function(){var e=elementorModules.frontend.handlers.Base.extend({settings:{},getDefaultSettings:function(){return{selectors:{user:".fa-user",activeCat:".category.active",loading:".premium-loading-feed",filterTabs:".premium-smart-listing__filter-tabs li a",activeElement:".premium-smart-listing__filter-tabs li .active",widgetWrapper:".premium-smart-listing__wrapper",postsOuterWrapper:".premium-smart-listing__posts-outer-wrapper",currentPage:".premium-smart-listing__pagination-container .page-numbers.current",post:".premium-smart-listing__post-wrapper",listingsWrapper:".premium-smart-listing__posts-wrapper",gridItem:".premium-smart-listing__grid-item",metaSeparators:".premium-smart-listing__meta-separator"}}},getDefaultElements:function(){var e=this.getSettings("selectors");return{$filterTabs:this.$element.find(e.filterTabs),$widgetWrapper:this.$element.find(e.widgetWrapper),$postsOuterWrapper:this.$element.find(e.postsOuterWrapper),$post:this.$element.find(e.post),$listingsWrapper:this.$element.find(e.listingsWrapper)}},bindEvents:function(){this.setWidgetSettings(),this.removeMetaSeparators(),this.run()},setWidgetSettings:function(){var e=this.getElementSettings();this.settings={pageNumber:1,count:2,isLoaded:!0,reqType:"",paginationType:e.pagination_type,infinite:"yes"===e.infinite_scroll,total:this.elements.$post.data("total"),carousel:"yes"===e.carousel,scrollAfter:"yes"===e.scroll_to_offset},this.settings.loadMoreBtn=!this.settings.infinite&&"yes"===e.load_more_button,this.settings.carousel&&(this.settings.slidesToScroll=e.slides_to_scroll,this.settings.spacing=parseInt(e.carousel_spacing),this.settings.autoPlay="yes"===e.carousel_play,this.settings.fade="yes"===e.carousel_fade,this.settings.center="yes"===e.carousel_center,this.settings.speed=""!==e.carousel_speed?parseInt(e.carousel_speed):300,this.settings.arrows="yes"===e.carousel_arrows,this.settings.autoPlay&&(this.settings.autoplaySpeed=""!==e.carousel_autoplay_speed?parseInt(e.carousel_autoplay_speed):5e3))},run:function(){var e=this.getElementSettings(),t=this;1<this.elements.$filterTabs.length&&(this.initFilterTabs(),"yes"===e.wrap_tabs_sw?(t.reconstructFilterTabs(),p(window).on("resize.paConstructFilters",function(){t.reconstructFilterTabs()})):p(window).off("resize.paConstructFilters")),"custom"===e.pa_spl_skin&&this.hideExtraItems(),this.settings.carousel&&(this.elements.$listingsWrapper.slick(this.getSlickSettings()),this.settings.arrows&&this.$element.find(".page-numbers").on("click.paCarouselNav",function(){p(this).hasClass("prev")?t.elements.$listingsWrapper.slick("slickPrev"):p(this).hasClass("next")&&t.elements.$listingsWrapper.slick("slickNext")})),"yes"===e.premium_blog_paging&&this.paginate(),this.settings.infinite&&this.elements.$postsOuterWrapper.is(":visible")&&this.getInfiniteScrollPosts(),this.settings.loadMoreBtn&&this.elements.$postsOuterWrapper.is(":visible")&&this.loadMorePosts()},hideExtraItems:function(){var e=elementorFrontend.config.experimentalFeatures.container,t=this.$element.find(".premium-extra-item");$parentCol=t.closest(".elementor-widget-premium-grid-item").parents(".e-con").first(),$parentCol=!e||$parentCol.length<1?t.closest(".elementor-top-column"):$parentCol,$parentCol.css({visibility:"hidden",opacity:0})},initFilterTabs:function(){var t=this,s=this.getSettings("selectors");this.elements.$filterTabs.on("click.paFilterTabs",function(e){e.preventDefault(),t.$element.find(s.activeElement).removeClass("active"),p(this).addClass("active"),t.settings.activeCategory=p(this).attr("data-filter"),t.settings.pageNumber=1,t.settings.reqType="filter",t.settings.infinite?(t.getPostsByAjax(!1),t.settings.count=2,t.getInfiniteScrollPosts()):t.getPostsByAjax(t.settings.scrollAfter)})},paginate:function(){var s=this,i=this.$element,r=this.getSettings("selectors");i.on("click",".premium-smart-listing__pagination-container .page-numbers",function(e){if(e.preventDefault(),"default"===s.settings.paginationType)var t=s.settings.pageNumber;else{if(p(this).hasClass("current"))return;t=parseInt(i.find(r.currentPage).html())}p(this).hasClass("next")?s.settings.pageNumber=t+1:p(this).hasClass("prev")?s.settings.pageNumber=t-1:s.settings.pageNumber=p(this).html(),s.getPostsByAjax(s.settings.scrollAfter)})},getInfiniteScrollPosts:function(){var t=jQuery(window).outerHeight()/1.25,s=this;p(window).scroll(function(){if(1<s.elements.$filterTabs.length){var e=s.elements.$postsOuterWrapper.find(".premium-smart-listing__post-wrapper");s.settings.total=e.data("total")}s.settings.count<=s.settings.total&&p(window).scrollTop()+t>=s.$element.find(".premium-smart-listing__post-wrapper:last").offset().top&&1==s.settings.isLoaded&&(s.settings.pageNumber=s.settings.count,s.settings.reqType="infinite",s.getPostsByAjax(!1),s.settings.count++,s.settings.isLoaded=!1)})},loadMorePosts:function(){var t=this;t.$element.find(".premium-smart-listing__load-more-btn-wrapper a").on("click.PaLoadMore",function(){if(1<t.elements.$filterTabs.length){var e=t.elements.$postsOuterWrapper.find(".premium-smart-listing__post-wrapper");t.settings.total=e.data("total")}t.settings.count<=t.settings.total&&1==t.settings.isLoaded&&(t.settings.pageNumber=t.settings.count,t.settings.reqType="infinite",t.getPostsByAjax(!1),t.settings.count++,t.settings.isLoaded=!1)})},getPostsByAjax:function(e){void 0===this.settings.activeCategory&&(this.settings.activeCategory="*");var i=this,r=this.getSettings("selectors");p.ajax({url:PremiumProSettings.ajaxurl,dataType:"json",type:"POST",data:{action:"pa_get_posts",page_id:i.elements.$widgetWrapper.data("page"),widget_id:i.$element.data("id"),page_number:i.settings.pageNumber,req_type:i.settings.reqType,category:i.settings.activeCategory,nonce:PremiumSettings.nonce},beforeSend:function(){i.elements.$postsOuterWrapper.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),e&&p("html, body").animate({scrollTop:i.elements.$postsOuterWrapper.offset().top-50},"slow")},success:function(e){if(e.data){i.$element.find(r.loading).remove();var t=e.data.posts,s=e.data.paging;i.settings.infinite||i.settings.loadMoreBtn?(i.settings.isLoaded=!0,1<i.elements.$filterTabs.length&&1===i.settings.pageNumber?i.elements.$postsOuterWrapper.html(t):"custom"===i.getElementSettings().pa_spl_skin?(i.elements.$postsOuterWrapper.append(t),i.hideExtraItems()):i.$element.find(".premium-smart-listing__posts-wrapper").append(t)):(i.elements.$postsOuterWrapper.html(t),i.$element.find(".premium-smart-listing__footer").html(s)),i.removeMetaSeparators()}},error:function(e){console.log(e)}})},getSlickSettings:function(){var e=this.settings,t=this.getElementSettings(),s=t.carousel_rows?t.carousel_rows:1,i=t.listing_cols?t.listing_cols:1,r=t.carousel_rows_tablet?t.carousel_rows_tablet:1,n=t.carousel_rows_mobile?t.carousel_rows_mobile:1,a=t.listing_cols_tablet?t.listing_cols_tablet:1;return{infinite:!0,slidesToShow:i,slidesToScroll:parseInt(e.slidesToScroll||i),responsive:[{breakpoint:1025,settings:{slidesToShow:a,slidesToScroll:1,rows:r}},{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1,rows:n}}],autoplay:e.autoPlay,rows:s,speed:e.speed,autoplaySpeed:e.autoplaySpeed,fade:e.fade,centerMode:e.center,centerPadding:e.spacing+"px",draggable:!0,arrows:!1}},removeMetaSeparators:function(){var r=this.getSettings("selectors");this.$element.find(r.gridItem).each(function(e,t){var s=p(t).find(r.metaSeparators),i=p(t).find(r.user);1===s.length?i.length||p(t).find(r.metaSeparators).remove():i.length||p(t).find(r.metaSeparators).first().remove()})},reconstructFilterTabs:function(){var e=getComputedStyle(this.$element.find(".premium-smart-listing__header-wrapper")[0]).getPropertyValue("--premium-spl-filters"),t=this.$element.find(".premium-smart-listing__filter-tabs"),s=t.find("li:not(.premium-smart-listing__filter-tabs-menu-wrapper)"),i=t.find(".premium-smart-listing__filter-tabs-menu-wrapper ul"),r=t.find("li:not(.premium-smart-listing__filter-tabs-menu-wrapper):not(.premium-smart-listing__wrapped-filter)"),n=i.find("li");if(e>r.length){s.css("visiblity","hidden");for(var a=e-r.length,l=0;l<a;l++){var o=p(n[l]).removeClass("premium-smart-listing__wrapped-filter").clone();p(n[l]).remove(),t.find(".premium-smart-listing__filter-tabs-menu-wrapper").before(o)}}else if(e<r.length){s.css("visiblity","hidden");for(a=r.length-e,l=1;l<=a;l++){o=p(r[r.length-l]).addClass("premium-smart-listing__wrapped-filter").clone();p(r[r.length-l]).remove(),i.prepend(o)}}this.checkWrappedFilters(),s.css("visiblity","visible")},checkWrappedFilters:function(){0<this.$element.find(".premium-smart-listing__filter-tabs-menu-wrapper ul").children().length?this.$element.find(".premium-smart-listing__filter-tabs-menu-wrapper").show():this.$element.find(".premium-smart-listing__filter-tabs-menu-wrapper").hide()}});elementorFrontend.elementsHandler.attachHandler("premium-smart-post-listing",e)})}(jQuery);