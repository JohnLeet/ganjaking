jQuery(function(d){d("body").on("change","select._wc_deposit_enabled",function(){var e=d(this).closest(".options_group"),t=d(this).val();e.parent().data("type");e.find("._wc_deposit_payment_plans_field").hide(),e.find("._wc_deposit_amount_field").hide(),e.find("._wc_deposit_multiple_cost_by_booking_persons_field").hide(),e.find("._wc_deposit_type_field").hide(),"optional"!==t&&"forced"!==t||(e.find("._wc_deposit_type_field").show(),e.find("select._wc_deposit_type").trigger("change")),""===t&&"no"!==e.find("._wc_deposits_default_enabled_field").val()&&(e.find("._wc_deposit_type_field").show(),e.find("select._wc_deposit_type").trigger("change"))}),d("body").on("change","select._wc_deposit_type",function(){var e=d(this).closest(".options_group"),t=d(this).val();switch(e.find("._wc_deposit_payment_plans_field").hide(),e.find("._wc_deposit_amount_field").hide(),e.find("._wc_deposit_multiple_cost_by_booking_persons_field").hide(),t){case"percent":e.find("._wc_deposit_amount").attr("placeholder",d("._wc_deposits_default_amount_field").val()),e.find("._wc_deposit_amount_field").show();break;case"fixed":e.find("._wc_deposit_amount_field").show(),e.find("._wc_deposit_amount").attr("placeholder","0");break;case"plan":e.find("._wc_deposit_payment_plans_field").show();break;default:switch(e.find("._wc_deposits_default_type_field").val()){case"plan":e.find("._wc_deposit_payment_plans_field").show();break;case"percent":e.find("._wc_deposit_amount").attr("placeholder",d("._wc_deposits_default_amount_field").val()),e.find("._wc_deposit_amount_field").show();break;case"fixed":e.find("._wc_deposit_amount_field").show(),e.find("._wc_deposit_amount").attr("placeholder","0")}}"fixed"===t&&"booking"===d("#product-type").val()&&e.find("._wc_deposit_multiple_cost_by_booking_persons_field").show()}),d(document.body).on("change","select#wc_deposits_default_type",function(){switch(d("#wc_deposits_default_plans").parents("tr").eq(0).hide(),d("#wc_deposits_default_amount").parents("tr").eq(0).hide(),d(this).val()){case"percent":case"fixed":d("#wc_deposits_default_amount").parents("tr").eq(0).show();break;case"plan":d("#wc_deposits_default_plans").parents("tr").eq(0).show()}}),d(document.body).on("change","select._wc_deposit_selected_type",function(){var e=d(this).val();d(this).closest(".options_group").find("._wc_deposits_default_selected_type_field").val(e)});function t(){var e=d(".woocommerce_variation_deposits ._wc_deposit_payment_plans_field .description em");const t=d("#deposits ._wc_deposit_payment_plans");var _=t.val(),i=d("#_wc_deposit_type");let o=d("#deposits ._wc_deposit_payment_plans_field .description em").text();"plan"===i.val()&&_.length&&(i=_.map(function(e){return t.find(`option[value=${e}]`).text()}),o=i.join(",")),e.text(o)}function e(){d("select._wc_deposit_type").trigger("change"),d("select._wc_deposit_enabled").trigger("change"),d("select._wc_deposit_selected_type").trigger("change"),d("select.wc_deposits_default_type").trigger("change"),d("._wc_deposit_payment_plans, #wc_deposits_default_plans").each(function(){const _=d(this);var e=_.data("plans-order").toString();0<e.indexOf(",")&&(e=e.split(","),d.each(e,function(e,t){t=_.find("[value="+t+"]");i(_,t)})),_.on("select2:select",function(e){e=e.params.data.element;i(_,e)}),_.is("#_wc_deposit_payment_plans")&&_.on("change",function(){t()}),_.selectWoo({sorter:function(e){return e.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0})}})}),t()}function i(e,t){t=d(t);t.detach(),e.append(t),e.trigger("change")}e(),d(document).on("woocommerce_variations_loaded",e),d("#_wc_deposit_type").on("change",t),d("select#wc_deposits_default_type").trigger("change")});
