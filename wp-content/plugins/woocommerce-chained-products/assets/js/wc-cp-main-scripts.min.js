/* phpcs:ignoreFile */
!function(t,a){"use strict";let i={parentSection:"",init:function(){this.parentSection=t(".tab-included-products.chained_items_container");let a=i;t("input[name=variation_id]").length>0&&parseInt(t("input[name=variation_id]").val())&&a.showProducts(),t("input[name=variation_id]").on("change",function(){a.parentSection.html(""),t("a#wc_cp_load_more").hide();let i=t(this).val()||0;parseInt(i)>0&&(t("span.price, div.single_variation p.stock").css("visibility","hidden"),t("#wc_cp_page_number").val(""),a.showProducts())}),t("a#wc_cp_load_more").on("click",function(t){t.preventDefault(),a.showProducts()})},triggerLoadMore(){this.showProducts()},async showProducts(){this.showLoader();let t=await this.getProducts();i.renderProducts(t||"")},renderProducts(a=""){if(t("span.price, div.single_variation p.stock").css("visibility","visible"),this.showLoader(!1),!a||0===a.length)return;0<parseInt(this.parentSection.find("ul.products").length)?this.parentSection.find("ul.products").append(t(a).find("li")):this.parentSection.append(a),this.parentSection.find("ul.products li.product").removeClass("first").addClass("last");let i=parseInt(t(a).find("div.wccp-page-no").data("page-number")||0);0<i?(t("a#wc_cp_load_more").show(),t("#wc_cp_page_number").val(i)):t("a#wc_cp_load_more").hide();let e=parseInt(t(a).find("div.wccp-stock").data("stock")||0);!isNaN(e)&&(0>=e?t("div.single_variation p.stock").text(t("div.single_variation p.stock").text()||""):(0<e||(t(".variations_form").find(".single_add_to_cart_button").removeClass("wc-variation-selection-needed").addClass("disabled wc-variation-is-unavailable"),t(".variations_form").find(".woocommerce-variation-add-to-cart").removeClass("woocommerce-variation-add-to-cart-enabled").addClass("woocommerce-variation-add-to-cart-disabled")),t("div.single_variation p.stock").text(""),t("input[name=quantity]").attr("max",e),t("input[name=quantity]").attr("data-max",e)))},getProducts(){let t=this.getProductData();return t.variable_id?this.sendRequest("get_chained_products_html_view",t):""},sendRequest:(i="",e={})=>new Promise(function(n){t.ajax({url:a.ajaxURL||"",type:"POST",data:{form_value:e,action:i,security:a.security||""},dataType:"html",success(t){n(t)},error(t){n(t)}})}),getProductData:()=>({variable_id:parseInt(t("input[name=variation_id]").val()||0),price:t("#show_price").val()||"",quantity:t("#show_quantity").val()||"",style:t("#select_style").val()||"",post_per_page:parseInt(a.postPerPage||5),page:parseInt(t("#wc_cp_page_number").val()||0)}),showLoader(a=!0){t("img#wc_cp_load_more").toggle(a)}};i.init()}(jQuery,cpVariationParams||{});