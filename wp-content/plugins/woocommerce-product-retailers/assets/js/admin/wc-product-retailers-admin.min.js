"use strict";jQuery(document).ready(function(a){var t;function r(){var c=0;a("table.wc-product-retailers tbody tr").each(function(t,e){a("input",e).each(function(t,e){var r=a(e);r.attr("name",r.attr("name").replace(/\[([^[]*)\]/,"["+c+"]"))}),c++})}a().select2&&(t={minimumInputLength:3,ajax:{url:ajaxurl,delay:250,data:function(t){return{term:t.term,action:"wc_product_retailers_search_retailers",security:wc_product_retailers_admin_params.search_retailers_nonce}},processResults:function(t){return e=t,r=[],c=a('table.wc-product-retailers tr.wc-product-retailer input[type="text"]').map(function(){return a(this).data("post-id")}).get(),e&&a.each(e,function(){-1===a.inArray(this.id,c)&&r.push({id:this.id,text:this.name})}),{results:r};var e,r,c},cache:!0}},a("select.wc-retailers-search").select2(t).addClass("enhanced")),a("button.wc-product-retailers-add-retailer").click(function(){var e=a("input.wc-retailers-search, select.wc-retailers-search"),t=e.val();t&&(a.isArray(t)||(t=t.split(",")),a(t).each(function(){a("input#wc-product-retailer-product-url-"+this).length||a.get(ajaxurl,{action:"wc_product_retailers_search_retailers",security:wc_product_retailers_admin_params.search_retailers_nonce,term:this},function(t){t.length&&(a("table.wc-product-retailers > tbody").append('<tr class="wc-product-retailer"><td class="check-column"><input type="checkbox" name="select" /><input type="hidden" name="_wc_product_retailer_id['+a("table.wc-product-retailers tbody tr").length+']" value="'+t[0].id+'" /></td><td class="wc-product-retailer-name">'+t[0].name+'</td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="'+t[0].id+'" id="wc-product-retailer-product-price-'+t[0].id+'" name="_wc_product_retailer_product_price['+a("table.wc-product-retailers tbody tr").length+']" /></td><td class="wc-product-retailer-product-url"><input type="text" data-post-id="'+t[0].id+'" id="wc-product-retailer-product-url-'+t[0].id+'" name="_wc_product_retailer_product_url['+a("table.wc-product-retailers tbody tr").length+']" value="'+t[0].product_url+'" /></td></tr>'),e.val(null).trigger("change"))})}),r())}),a("button.wc-product-retailers-delete-retailer").click(function(){a("table.wc-product-retailers td.check-column input:checked").each(function(){a(this).closest("tr.wc-product-retailer").fadeOut("400",function(){a(this).remove()})}),r()}),a("table.wc-product-retailers tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td",scrollSensitivity:40,start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style"),r()}})});