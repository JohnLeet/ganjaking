(function(a){var b=a.extend({emailSubjectSelector:"#email-subject",emailPreviewButtonSelector:"#preview-email",emailBodyIframeSelector:"#ticket_email_editor_ifr",productId:"#product-id",emailPreviewSelector:"#email-preview-container"},wcBoxOfficeParams);b.init=function(){b.bindEvents()},b.bindEvents=function(){a(b.emailPreviewButtonSelector).on("click",b.previewEmail),a(b.pastEmailsSelector).on("click",b.deletePastEmailSelector,b.deletePastEmail)},b.previewEmail=function(){var c=a(b.emailSubjectSelector).val(),d=a(b.productId).val(),e=a(b.emailBodyIframeSelector),f=e.contents().find("#tinymce").html();return a(b.emailPreviewButtonSelector).prop("disabled",!0).css("cursor","wait"),d&&f?void a.post(b.ajaxurl,{action:b.previewEmailAction,product_id:d,content:f,subject:c,wc_box_office_admin_test_email_nonce:b.previewEmailNonce}).done(b.previewEmailDone):(alert(b.i18n_previewEmptyProductOrBody),void a(b.emailPreviewButtonSelector).prop("disabled",!1).css("cursor","pointer"))},b.previewEmailDone=function(c){a(b.emailPreviewSelector).html(c).slideDown("fast"),a(b.emailPreviewButtonSelector).prop("disabled",!1).css("cursor","pointer")},a(b.init)})(jQuery);