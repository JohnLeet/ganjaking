jQuery(function(n){var a=attach.allowed_extensions.replace(" ","").split(","),o=(n("#commentform").attr("enctype","multipart/form-data"),n("#do_uploadFile").click(function(){n("#ywar-uploadFile").click()}),n("#ywar-uploadFile").on("change",function(){n(".ywar-attachment-notice").remove();var e=this;if(0<attach.limit_multiple_upload&&e.files.length>attach.limit_multiple_upload)n(this).closest(".upload_section").append('<p class="ywar-attachment-notice">'+attach.too_many_attachment_selected+"</p>"),e.value="";else{for(var t=document.getElementById("uploadFileList");t.hasChildNodes();)t.removeChild(t.firstChild);for(var a,i=0,l=0;l<e.files.length;l++)o(e.files[l])?((a=document.createElement("li")).innerHTML='<div style="display: inline;"><img id="img_preview'+l+'" style="width: 100px; height: 100px;"></div>',function(e,t){var a=new FileReader;a.readAsDataURL(e[t]),a.onload=function(e){document.getElementById("img_preview"+t).src=e.target.result}}(e.files,l),t.appendChild(a)):i++;i?n(this).closest(".upload_section").append('<p class="ywar-attachment-notice">'+attach.attachments_failed_validation+"</p>"):t.hasChildNodes()||((a=document.createElement("li")).innerHTML=attach.no_attachment_selected,t.appendChild(a))}}),function(e){var t=e.name.lastIndexOf(".")+1,t=e.name.substring(t).toLowerCase();if(-1==n.inArray(t,a))return!1;if(0<attach.allowed_max_size&&e.size/1024/1024>attach.allowed_max_size)return!1;return!0});n("#commentform").submit(function(){var e=document.getElementById("ywar-uploadFile");if(null!=e&&0<attach.limit_multiple_upload&&e.files.length>attach.limit_multiple_upload)return!1})});