(()=>{"use strict";const s=window.wp.element;var e=window.wp.plugins,o=window.wc.wcBlocksRegistry;const c=window.wc.blocksCheckout,r=window.wp.i18n,n=window.wc.wcSettings,i=window.wc.priceFormat;var t=()=>{var e={disabledGateways:(0,n.getSetting)("woocommerce-deposits_data").disabled_gateways}["disabledGateways"],o={};if(e.length)for(var[t,s]of Object.entries(e))o[s]=e=>{return!(null==(e=e.cart.extensions["woocommerce-deposits"])?void 0:e.has_deposit)};return o};const m=e=>{var o,t,e=e["extensions"];return void 0===e["woocommerce-deposits"]||({has_deposit:e,future_payment_amount:o}=e["woocommerce-deposits"],!e)||o<=0?null:(e=(0,n.getSetting)("taxesEnabled",!0)&&(0,n.getSetting)("displayCartPricesIncludingTax",!1),t=(0,i.getCurrency)(),(0,s.createElement)(c.TotalsWrapper,null,(0,s.createElement)(c.TotalsItem,{className:"wc-block-components-totals-item wc-block-components-totals-footer-item",currency:t,value:o,label:(0,r.__)("Future payments","woocommerce-deposits"),description:e?(0,r.__)("Including taxes","woocommerce-deposits"):null})))},a=e=>{var o,t,e=e["extensions"];return void 0===e["woocommerce-deposits"]||({has_deposit:e,deferred_discount_amount:o,deferred_discount_tax:t}=e["woocommerce-deposits"],!e)||o<=0?null:(e=(0,i.getCurrency)(),(0,s.createElement)(c.TotalsWrapper,null,(0,s.createElement)(c.TotalsItem,{className:"wc-block-components-totals-item wc-block-components-totals-discount wc-block-components-totals-footer-item",currency:e,value:-o-t,label:(0,r.__)("Discount","woocommerce-deposits"),description:(0,r.__)("Applied toward future payments","woocommerce-deposits")})))};(0,o.registerPaymentMethodExtensionCallbacks)("woocommerce-deposits",t());(0,e.registerPlugin)("woocommerce-deposits",{render:()=>(0,s.createElement)(s.Fragment,null,(0,s.createElement)(c.ExperimentalOrderMeta,null,(0,s.createElement)(a,null),(0,s.createElement)(m,null))),scope:"woocommerce-checkout"}),(0,c.__experimentalRegisterCheckoutFilters)("woocommerce-deposits",{totalLabel:(e,o)=>{return void 0!==o["woocommerce-deposits"]&&(o=o["woocommerce-deposits"].has_deposit,o)?(0,r.__)("Due today","woocommerce-deposits"):e},cartItemClass:(e,o,t)=>{return void 0!==o["woocommerce-deposits"]&&(o=o["woocommerce-deposits"]["is_deposit"],o)&&(e+=" is-deposit"),e},cartItemPrice:(e,o,t)=>{t=t.context;return void 0!==o["woocommerce-deposits"]&&(o=o["woocommerce-deposits"].is_deposit,o)?"cart"===t?sprintf((0,r.__)("Due today %s","woocommerce-deposits"),e):sprintf((0,r.__)("%s due today","woocommerce-deposits"),e):e}})})();
