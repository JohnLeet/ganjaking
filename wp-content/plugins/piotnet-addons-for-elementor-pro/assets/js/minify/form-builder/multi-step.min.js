jQuery(document).ready(function(n){function l(e){e=e.find("[data-pafe-signature] canvas.not-resize");0<e.length&&e.each(function(){var e=parseInt(n(this).css("max-width").replace("px","")),t=(parseInt(n(this).css("height").replace("px","")),parseInt(n(this).closest(".elementor-form-fields-wrapper").width()));0<t&&(t<e?n(this).attr("width",t):n(this).attr("width",e),n(this).removeClass("not-resize"))})}function e(e){var t=e.closest(".pafe-multi-step-form__content-item");t.find("[data-pafe-form-builder-form-id]").data("pafe-form-builder-form-id");t.removeClass("active"),t.next().addClass("active");var a=t.next().index();e.closest(".pafe-multi-step-form").find(".pafe-multi-step-form__progressbar-item").eq(a).addClass("active");var i,o=e.closest("[data-pafe-multi-step-form-scroll-to-top]");0<o.length&&(i=n("[data-pafe-break-point-md]").data("pafe-break-point-md"),(a=n("[data-pafe-break-point-lg]").data("pafe-break-point-lg"))<=(e=window.innerWidth)&&n("html, body").animate({scrollTop:o.offset().top-o.data("pafe-multi-step-form-scroll-to-top-offset-desktop")},300),i<=e&&e<a&&n("html, body").animate({scrollTop:o.offset().top-o.data("pafe-multi-step-form-scroll-to-top-offset-tablet")},300),e<i&&n("html, body").animate({scrollTop:o.offset().top-o.data("pafe-multi-step-form-scroll-to-top-offset-mobile")},300)),l(t.next())}n(document).on("click",'button[data-pafe-form-builder-nav="next"]',function(){var e,t,a=n(this).data("pafe-form-builder-nav-form-id"),i=n(this).closest(".pafe-multi-step-form__content-item"),o=i.find("[data-pafe-form-builder-form-id="+a+"]"),r=(void 0!==n(this).data("pafe-form-builder-required-text")?n(this):n(document).find('[data-pafe-form-builder-submit-form-id="'+a+'"]')).data("pafe-form-builder-required-text"),d=0,f=!1;o.each(function(){if(null==n(this).data("pafe-form-builder-stripe")&&null==n(this).data("pafe-form-builder-html")){var t=n(this).closest(".elementor-field-type-checkbox.elementor-field-required"),a=0;0<t.length&&(a=t.find("input[type=checkbox]:checked").length),null!=n(this).attr("oninvalid")&&(r=n(this).attr("oninvalid").replace("this.setCustomValidity('","").replace("')",""));var i,o=n(this)[0].checkValidity(),l=n(n(this)[0]).next()[0],s=null!=n(this).data("pafe-form-builder-image-select");let e=!1;s&&(e=n(this).closest(".pafe-image-select-field").find(".image_picker_selector").find(".selected").length<n(this).data("pafe-form-builder-image-select-min-select")),n(l).hasClass("flatpickr-mobile")&&(o=l.checkValidity()),(!o||0==a&&0<t.length)&&0==n(this).closest(".pafe-form-builder-conditional-logic-hidden").length&&"none"!=n(this).closest("[data-pafe-form-builder-conditional-logic]").css("display")&&null==n(this).data("pafe-form-builder-honeypot")&&0==n(this).closest("[data-pafe-signature]").length||0==a&&0<t.length&&"none"!=n(this).closest(".elementor-element").css("display")||e?("none"==n(this).css("display")||"none"==n(this).closest("div").css("display")||null!=n(this).data("pafe-form-builder-image-select")||0<t.length?(n(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html(e?n(this).data("pafe-form-builder-image-select-min-select-message"):r),0===(i=n(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").next()).length||f||(n("html, body").animate({scrollTop:i.offset().top-100},500),f=!0)):f||null!=n(this).data("pafe-form-builder-image-select")||(n(this)[0].reportValidity(),f=!0),d++):""==n(this).val()&&0==n(this).closest(".pafe-form-builder-conditional-logic-hidden").length&&"true"==n(this).attr("aria-required")&&void 0!==n(this).attr("data-pafe-form-builder-select-autocomplete")?(n(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html(r),d++):(s&&(e?(n(this).closest(".elementor-field-group").find("[data-pafe-image_select_min_select_check]").html(n(this).data("pafe-form-builder-image-select-min-select-message")).fadeIn(),d++):n(this).closest(".elementor-field-group").find("[data-pafe-image_select_min_select_check]").fadeOut()),t=n(this).closest(".pafe-field-container").find("label"),i=n(this).closest(".pafe-field-container"),s=1,null!=t.attr("data-pafe-form-builder-image-upload-min-files")&&(s=parseInt(t.attr("data-pafe-form-builder-image-upload-min-files")),i.find(".pafe-form-builder-image-upload-uploaded").length<s?(i.find("[data-pafe-form-builder-image-upload-check]").html(t.attr("data-pafe-form-builder-image-upload-min-files-message")),d++):i.find("[data-pafe-form-builder-image-upload-check]").remove()),n(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html(""),null!=n(this).data("pafe-flatpickr-custom-options")&&""==n(this).val()&&0==n(this).closest(".pafe-form-builder-conditional-logic-hidden").length&&null!=n(this).attr("required")&&(n(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html(r),d++),0<n(this).closest("[data-pafe-signature]").length&&(n(this).closest("[data-pafe-signature]").find("[data-pafe-signature-export]").trigger("click"),""==n(this).val()&&0==n(this).closest(".pafe-form-builder-conditional-logic-hidden").length&&null!=n(this).attr("required")&&(n(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html(r),d++)))}}),0==d&&(i.removeClass("active"),i.next().addClass("active"),t=i.next().index(),n(this).closest(".pafe-multi-step-form").find(".pafe-multi-step-form__progressbar-item").eq(t).addClass("active"),0<(e=n(this).closest("[data-pafe-multi-step-form-scroll-to-top]")).length&&(a=n("[data-pafe-break-point-md]").data("pafe-break-point-md"),(o=n("[data-pafe-break-point-lg]").data("pafe-break-point-lg"))<=(t=window.innerWidth)&&n("html, body").animate({scrollTop:e.offset().top-e.data("pafe-multi-step-form-scroll-to-top-offset-desktop")},300),a<=t&&t<o&&n("html, body").animate({scrollTop:e.offset().top-e.data("pafe-multi-step-form-scroll-to-top-offset-tablet")},300),t<a&&n("html, body").animate({scrollTop:e.offset().top-e.data("pafe-multi-step-form-scroll-to-top-offset-mobile")},300)),l(i.next()))}),n(document).on("change","[data-pafe-form-builder-multi-step-form-autonext]",function(){e(n(this))}),n(document).on("click",".image_picker_selector>li>div",function(){0<n(this).closest(".elementor-field").find("[data-pafe-form-builder-multi-step-form-autonext]").length&&e(n(this))}),n(document).on("click",'button[data-pafe-form-builder-nav="prev"]',function(){n(this).data("pafe-form-builder-nav-form-id");var e=n(this).closest(".pafe-multi-step-form__content-item");e.removeClass("active"),e.prev().addClass("active");var t=e.index();n(this).closest(".pafe-multi-step-form").find(".pafe-multi-step-form__progressbar-item").eq(t).removeClass("active");var a,i=n(this).closest("[data-pafe-multi-step-form-scroll-to-top]");0<i.length&&(a=n("[data-pafe-break-point-md]").data("pafe-break-point-md"),(e=n("[data-pafe-break-point-lg]").data("pafe-break-point-lg"))<=(t=window.innerWidth)&&n("html, body").animate({scrollTop:i.offset().top-i.data("pafe-multi-step-form-scroll-to-top-offset-desktop")},300),a<=t&&t<e&&n("html, body").animate({scrollTop:i.offset().top-i.data("pafe-multi-step-form-scroll-to-top-offset-tablet")},300),t<a&&n("html, body").animate({scrollTop:i.offset().top-i.data("pafe-multi-step-form-scroll-to-top-offset-mobile")},300))});function t(e,o){let t=e.find(".elementor-section-wrap>section, .elementor>section, .elementor-section-wrap>.e-con, .elementor>.e-container, .elementor>.e-con"),l=e.find("[data-pafe-forms-multistep-progressbar]");$visibleStep=e.find("[data-pafe-forms-multistep]"),t.each(function(e,t){o(this).addClass("pafe-multi-step-form__content-item"),$visibleStep.css("visibility","visible");var a=0==e?"active":"",i=void 0!==o(this).attr("data-pafe-forms-multistep-title")?o(this).attr("data-pafe-forms-multistep-title"):"";o(this).addClass(a);i='<div class="pafe-multi-step-form__progressbar-item '+a+'">\t\t\t\t\t<div class="pafe-multi-step-form__progressbar-item-step-number">\t\t\t\t\t\t<div class="pafe-multi-step-form__progressbar-item-step">'+parseInt(e+1)+'</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="pafe-multi-step-form__progressbar-item-title">'+i+"</div>\t\t\t\t</div>";l.append(i)})}n(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/pafe-forms.default",t)})});