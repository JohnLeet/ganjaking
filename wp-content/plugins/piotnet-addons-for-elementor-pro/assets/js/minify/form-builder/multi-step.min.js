jQuery(document).ready(function(m){function l(e){e=e.find("[data-pafe-signature] canvas.not-resize");0<e.length&&e.each(function(){var e=parseInt(m(this).css("max-width").replace("px","")),t=(parseInt(m(this).css("height").replace("px","")),parseInt(m(this).closest(".elementor-form-fields-wrapper").width()));0<t&&(t<e?m(this).attr("width",t):m(this).attr("width",e),m(this).removeClass("not-resize"))})}function e(e){var t=e.closest(".pafe-multi-step-form__content-item");t.find("[data-pafe-form-builder-form-id]").data("pafe-form-builder-form-id");t.removeClass("active"),t.next().addClass("active");var a=t.next().index();e.closest(".pafe-multi-step-form").find(".pafe-multi-step-form__progressbar-item").eq(a).addClass("active");var i,o=e.closest("[data-pafe-multi-step-form-scroll-to-top]");0<o.length&&(i=m("[data-pafe-break-point-md]").data("pafe-break-point-md"),(a=m("[data-pafe-break-point-lg]").data("pafe-break-point-lg"))<=(e=window.innerWidth)&&m("html, body").animate({scrollTop:o.offset().top-o.data("pafe-multi-step-form-scroll-to-top-offset-desktop")},300),i<=e&&e<a&&m("html, body").animate({scrollTop:o.offset().top-o.data("pafe-multi-step-form-scroll-to-top-offset-tablet")},300),e<i&&m("html, body").animate({scrollTop:o.offset().top-o.data("pafe-multi-step-form-scroll-to-top-offset-mobile")},300)),l(t.next())}m(document).on("click",'button[data-pafe-form-builder-nav="next"]',function(){var e,t,a=m(this).data("pafe-form-builder-nav-form-id"),i=m(this).closest(".pafe-multi-step-form__content-item"),o=i.find("[data-pafe-form-builder-form-id="+a+"]"),f=(void 0!==m(this).data("pafe-form-builder-required-text")?m(this):m(document).find('[data-pafe-form-builder-submit-form-id="'+a+'"]')).data("pafe-form-builder-required-text"),n=0,p=!1;o.each(function(){if(null==m(this).data("pafe-form-builder-stripe")&&null==m(this).data("pafe-form-builder-html")){var t=m(this).closest(".elementor-field-type-checkbox.elementor-field-required"),a=0;0<t.length&&(a=t.find("input[type=checkbox]:checked").length);var i=m(this).closest(".elementor-field-type-terms_select.elementor-field-required").find("input[type=checkbox]"),o=0;0<i.length&&(o=m(this).closest(".elementor-field-type-terms_select.elementor-field-required").find("input[type=checkbox]:checked").length),null!=m(this).attr("oninvalid")&&(f=m(this).attr("oninvalid").replace("this.setCustomValidity('","").replace("')",""));var l,s=m(this)[0].checkValidity(),r=m(m(this)[0]).next()[0],d=null!=m(this).data("pafe-form-builder-image-select");let e=!1;d&&(e=m(this).closest(".pafe-image-select-field").find(".image_picker_selector").find(".selected").length<m(this).data("pafe-form-builder-image-select-min-select")),m(r).hasClass("flatpickr-mobile")&&(s=r.checkValidity()),(!s||0==a&&0<t.length)&&0==m(this).closest(".pafe-form-builder-conditional-logic-hidden").length&&"none"!=m(this).closest("[data-pafe-form-builder-conditional-logic]").css("display")&&null==m(this).data("pafe-form-builder-honeypot")&&0==m(this).closest("[data-pafe-signature]").length||0==a&&0<t.length&&"none"!=m(this).closest(".elementor-element").css("display")||e||0==o&&0<i.length?("none"==m(this).css("display")||"none"==m(this).closest("div").css("display")||null!=m(this).data("pafe-form-builder-image-select")||0<t.length||0<i.length?(m(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html(e?m(this).data("pafe-form-builder-image-select-min-select-message"):f),0===(l=m(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").next()).length||p||(m("html, body").animate({scrollTop:l.offset().top-100},500),p=!0)):p||null!=m(this).data("pafe-form-builder-image-select")||(m(this)[0].reportValidity(),p=!0),n++):""==m(this).val()&&0==m(this).closest(".pafe-form-builder-conditional-logic-hidden").length&&"true"==m(this).attr("aria-required")&&void 0!==m(this).attr("data-pafe-form-builder-select-autocomplete")?(m(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html(f),n++):(d&&(e?(m(this).closest(".elementor-field-group").find("[data-pafe-image_select_min_select_check]").html(m(this).data("pafe-form-builder-image-select-min-select-message")).fadeIn(),n++):m(this).closest(".elementor-field-group").find("[data-pafe-image_select_min_select_check]").fadeOut()),i=m(this).closest(".pafe-field-container").find("label"),l=m(this).closest(".pafe-field-container"),d=1,null!=i.attr("data-pafe-form-builder-image-upload-min-files")&&(d=parseInt(i.attr("data-pafe-form-builder-image-upload-min-files")),l.find(".pafe-form-builder-image-upload-uploaded").length<d?(l.find("[data-pafe-form-builder-image-upload-check]").html(i.attr("data-pafe-form-builder-image-upload-min-files-message")),n++):l.find("[data-pafe-form-builder-image-upload-check]").remove()),m(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html(""),null!=m(this).data("pafe-flatpickr-custom-options")&&""==m(this).val()&&0==m(this).closest(".pafe-form-builder-conditional-logic-hidden").length&&null!=m(this).attr("required")&&(m(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html(f),n++),0<m(this).closest("[data-pafe-signature]").length&&(m(this).closest("[data-pafe-signature]").find("[data-pafe-signature-export]").trigger("click"),""==m(this).val()&&0==m(this).closest(".pafe-form-builder-conditional-logic-hidden").length&&null!=m(this).attr("required")&&(m(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html(f),n++)))}}),0==n&&(i.removeClass("active"),i.next().addClass("active"),t=i.next().index(),m(this).closest(".pafe-multi-step-form").find(".pafe-multi-step-form__progressbar-item").eq(t).addClass("active"),0<(e=m(this).closest("[data-pafe-multi-step-form-scroll-to-top]")).length&&(a=m("[data-pafe-break-point-md]").data("pafe-break-point-md"),(o=m("[data-pafe-break-point-lg]").data("pafe-break-point-lg"))<=(t=window.innerWidth)&&m("html, body").animate({scrollTop:e.offset().top-e.data("pafe-multi-step-form-scroll-to-top-offset-desktop")},300),a<=t&&t<o&&m("html, body").animate({scrollTop:e.offset().top-e.data("pafe-multi-step-form-scroll-to-top-offset-tablet")},300),t<a&&m("html, body").animate({scrollTop:e.offset().top-e.data("pafe-multi-step-form-scroll-to-top-offset-mobile")},300)),l(i.next()))}),m(document).on("change","[data-pafe-form-builder-multi-step-form-autonext]",function(){e(m(this))}),m(document).on("click",".image_picker_selector>li>div",function(){0<m(this).closest(".elementor-field").find("[data-pafe-form-builder-multi-step-form-autonext]").length&&e(m(this))}),m(document).on("click",'button[data-pafe-form-builder-nav="prev"]',function(){m(this).data("pafe-form-builder-nav-form-id");var e=m(this).closest(".pafe-multi-step-form__content-item");e.removeClass("active"),e.prev().addClass("active");var t=e.index();m(this).closest(".pafe-multi-step-form").find(".pafe-multi-step-form__progressbar-item").eq(t).removeClass("active");var a,i=m(this).closest("[data-pafe-multi-step-form-scroll-to-top]");0<i.length&&(a=m("[data-pafe-break-point-md]").data("pafe-break-point-md"),(e=m("[data-pafe-break-point-lg]").data("pafe-break-point-lg"))<=(t=window.innerWidth)&&m("html, body").animate({scrollTop:i.offset().top-i.data("pafe-multi-step-form-scroll-to-top-offset-desktop")},300),a<=t&&t<e&&m("html, body").animate({scrollTop:i.offset().top-i.data("pafe-multi-step-form-scroll-to-top-offset-tablet")},300),t<a&&m("html, body").animate({scrollTop:i.offset().top-i.data("pafe-multi-step-form-scroll-to-top-offset-mobile")},300))});function t(e,o){let t=e.find(".elementor-section-wrap>section, .elementor>section, .elementor-section-wrap>.e-con, .elementor>.e-container, .elementor>.e-con"),l=e.find("[data-pafe-forms-multistep-progressbar]");$visibleStep=e.find("[data-pafe-forms-multistep]"),t.each(function(e,t){o(this).addClass("pafe-multi-step-form__content-item"),$visibleStep.css("visibility","visible");var a=0==e?"active":"",i=void 0!==o(this).attr("data-pafe-forms-multistep-title")?o(this).attr("data-pafe-forms-multistep-title"):"";o(this).addClass(a);i='<div class="pafe-multi-step-form__progressbar-item '+a+'">\t\t\t\t\t<div class="pafe-multi-step-form__progressbar-item-step-number">\t\t\t\t\t\t<div class="pafe-multi-step-form__progressbar-item-step">'+parseInt(e+1)+'</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="pafe-multi-step-form__progressbar-item-title">'+i+"</div>\t\t\t\t</div>";l.append(i)})}m(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/pafe-forms.default",t)})});