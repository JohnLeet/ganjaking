"use strict";!function(){jQuery(function(c){window.typenow;var n,t,e=null!=(e=window.pagenow)?e:"";if((wc_pip_admin.is_order_edit_screen||wc_pip_admin.is_orders_screen)&&(n=c.WCBackboneModal.View,t=function(e){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return c("#wc-backbone-modal-dialog .modal-close").trigger("click"),new n({target:"wc-pip-action-modal",string:e}),c("#wc-pip-confirm-order-action").on("click",function(e){var n;return e.preventDefault(),"print"!==c(this).data("action")?((n=c(this).closest("div.wc-backbone-modal-content")).block({message:null,overlayCSS:{background:"#FFF",opacity:.6}}),e={action:"wc_pip_process_order_action",security:wc_pip_admin.process_order_action_nonce,document_type:c(this).data("type"),document_action:c(this).data("action"),order_ids:c(this).data("orders")},c.post(wc_pip_admin.ajax_url,e,function(e){return n.unblock(),e.success?t(e.data,i):console.log(e)})):(wc_pip_admin.is_orders_screen&&("order"===wc_pip_admin.orders_screen_object?c('input[name="order"]:checked'):c('input[name="post[]"]:checked')).attr("checked",!1),c("#wc-pip-cancel-order-action").trigger("click"),window.open(c(this).attr("href"),"_blank"),wc_pip_admin.is_order_edit_screen&&i?c(document).find("form#post").submit():location.reload())}),c("#wc-pip-dismiss-done-order-action").on("click",function(e){return e.preventDefault(),c("#wc-backbone-modal-dialog .modal-close").trigger("click"),wc_pip_admin.is_orders_screen?("order"===wc_pip_admin.orders_screen_object?c('input[name="order"]:checked'):c('input[name="post[]"]:checked')).attr("checked",!1):wc_pip_admin.is_order_edit_screen?i?c('button[name="save"]').trigger("click"):location.reload():void 0})},c(".wc_pip_document").pointer({pointerClass:"wc-pip-document-actions-pointer",position:{edge:"right",align:"right"},content:function(e){var n=parseInt(c(this).attr("href").replace(/^\D+/g,""),10);return c("#wc-pip-pointer-order-actions-"+n).html()},buttons:function(e,n){return c('<button class="button button-large wc-pip-pointer-close">'+wc_pip_admin.i18n.close+"</button>").bind("click.pointer",function(e){return e.preventDefault(),n.element.pointer("close")})},opened:function(e){var n=parseInt(c(this).attr("href").replace(/^\D+/g,""),10);return c(".wc-pip-document-actions-pointer").each(function(){if(c(this).is(":visible")&&parseInt(c(this).find("input").val(),10)!==n)return c(this).find(".wc-pip-pointer-close").trigger("click")})}}).on("click",function(e){return e.preventDefault(),c(this).pointer("toggle"),c(".wc-pip-document-tooltip-order-action").on("click",function(e){return e.preventDefault(),e={action:"wc_pip_confirm_order_action",security:wc_pip_admin.confirm_order_action_nonce,document:c(this).data("action"),order_ids:[c(this).data("order-id")]},c.post(wc_pip_admin.ajax_url,e,function(e){return e.success?t(e.data):console.log(e)})})}),c(document).on("mouseup",function(e){e=c(e.target);if(e&&!e.hasClass("wc_pip_document")&&0===e.closest("div.wc-pip-document-actions-pointer").length)return c(".wc-pip-document-actions-pointer").each(function(){if(c(this).is(":visible"))return c(this).find(".wc-pip-pointer-close").trigger("click")})}),c(".bulkactions select").each(function(){var e=c(this),n=e.find("option[value^='wc_pip_']");if(n.length)return n=c("<optgroup>").attr("label",wc_pip_admin.i18n.plugin_name).append(n.detach()),e.append(n)}),c("#doaction, #doaction2").on("click",function(e){var n=c(this).prev("select").val(),i=[];if(-1!==wc_pip_admin.order_bulk_actions.indexOf(n))return e.preventDefault(),("order"===wc_pip_admin.orders_screen_object?c('input[name="id[]"]:checked'):c('input[name="post[]"]:checked')).each(function(){return i.push(c(this).val())}),e={action:"wc_pip_confirm_order_action",security:wc_pip_admin.confirm_order_action_nonce,document:n,order_ids:i},c.post(wc_pip_admin.ajax_url,e,function(e){return e.success&&e.data?t(e.data):console.log(e)})}),c(".wc-reload").on("click",function(e){var n,i=c("select[name=wc_order_action]").val();if(-1!==wc_pip_admin.order_bulk_actions.indexOf(i))return e.preventDefault(),n=c(this).hasClass("save_order"),e={action:"wc_pip_confirm_order_action",security:wc_pip_admin.confirm_order_action_nonce,document:i,order_ids:[wc_pip_admin.order_edit_screen_id]},c.post(wc_pip_admin.ajax_url,e,function(e){return e.success&&e.data?t(e.data,n):console.log(e)})})),"woocommerce_page_wc-settings"===e)return c("#wc_pip_invoice_number_reset_counter").attr("checked",!1),c(".hide-options-if-checked").change(function(e){return c(this).is(":checked")?c(document).find(".hide-if-use-order-number").closest("tr").hide():c(document).find(".hide-if-use-order-number").closest("tr").show()}).change(),c("#wc_pip_invoice_number_reset_counter").change(function(e){var n=c(this).is(":checked"),i=document.getElementById("wc_pip_invoice_number_start");return!0===n?!0===confirm(wc_pip_admin.i18n.reset_counter_warning)?i.readOnly=!1:c(this).prop("checked",!1):i.readOnly=!0}).change(),c(".wc-pip-media-upload").on("click",function(e){var i,t;e.preventDefault(),i=c(this),"undefined"!=typeof wp&&wp.media&&((t=wp.media.frames.file_frame=wp.media({title:c(this).data("uploader_title"),button:{text:c(this).data("uploader_button_text")},multiple:!1})).on("select",function(e){var n=t.state().get("selection").first().toJSON();return i.prev(".wc-pip-media-url").val(n.url)}),t.open())})})}.call(void 0);