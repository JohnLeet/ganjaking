!function(i){o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(e=65)},r=function(o,e){o=y(o);i(e).data("colorpicker").fields.eq(1).val(o.r).end().eq(2).val(o.g).end().eq(3).val(o.b).end()},a=function(o,e){i(e).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},c=function(o,e){i(e).data("colorpicker").fields.eq(0).val(M(o)).end()},n=function(o,e){i(e).data("colorpicker").selector.css("backgroundColor","#"+M({h:o.h,s:100,b:100})),i(e).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},l=function(o,e){i(e).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},d=function(o,e){i(e).data("colorpicker").newColor.css("backgroundColor","#"+M(o))},s=function(o){var e,t=i(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=e=x(_(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=e=k({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=e=w(b({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&(r(e,t.get(0)),c(e,t.get(0)),a(e,t.get(0))),n(e,t.get(0)),l(e,t.get(0)),d(e,t.get(0)),t.data("colorpicker").onChange.apply(t,[e,M(e),y(e)])},t=function(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&s.apply(o.data.field.get(0),[!0]),!1},p=function(o){return s.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),i(document).off("mouseup",p),i(document).off("mousemove",t),!1},u=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,o.pageY-o.data.y)))/150,10)).get(0),[o.data.preview]),!1},f=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",f),i(document).off("mousemove",u),!1},h=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,o.pageY-o.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,o.pageX-o.data.pos.left))/150,10)).get(0),[o.data.preview]),!1},m=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",m),i(document).off("mousemove",h),!1},v=function(o){g(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),i(document).off("mousedown",v))},g=function(o,e,t){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var r=e.parentNode;r&&r!=t;){if(r==o)return!0;r=r.parentNode}return!1},k=function(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},b=function(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},_=function(o){var e=6-o.length;if(0<e){for(var t=[],r=0;r<e;r++)t.push("0");t.push(o),o=t.join("")}return o},x=function(o){return w((o=o,{r:(o=parseInt(-1<o.indexOf("#")?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o}))},w=function(o){var e={h:0,s:0,b:0},t=Math.min(o.r,o.g,o.b),r=Math.max(o.r,o.g,o.b),t=r-t;return e.b=r,e.s=0!=r?255*t/r:0,0!=e.s?o.r==r?e.h=(o.g-o.b)/t:o.g==r?e.h=2+(o.b-o.r)/t:e.h=4+(o.r-o.g)/t:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},y=function(o){var e,t={},r=Math.round(o.h),a=Math.round(255*o.s/100),o=Math.round(255*o.b/100);return 0==a?t.r=t.g=t.b=o:(o=r%60*((e=o)-(a=(255-a)*o/255))/60,(r=360==r?0:r)<60?(t.r=e,t.b=a,t.g=a+o):r<120?(t.g=e,t.b=a,t.r=e-o):r<180?(t.g=e,t.r=a,t.b=a+o):r<240?(t.b=e,t.r=a,t.g=e-o):r<300?(t.b=e,t.g=a,t.r=a+o):r<360?(t.r=e,t.g=a,t.b=e-o):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},C=function(o){var t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return i.each(t,function(o,e){1==e.length&&(t[o]="0"+e)}),t.join("")},M=function(o){return C(y(o))};var e,o,r,a,c,n,l,d,s,t,p,u,f,h,m,v,g,k,b,_,x,w,y,C,M,I={init:function(t){if("string"==typeof(t=i.extend({},o,t||{})).color)t.color=x(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=w(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=k(t.color)}return this.each(function(){var o,e;i(this).data("colorpickerId")||((o=i.extend({},t)).origColor=t.color,e="collorpicker_"+parseInt(1e3*Math.random()),i(this).data("colorpickerId",e),e=i('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",e),o.flat?e.appendTo(this).show():e.appendTo(document.body),o.fields=e.find("input").on("keyup",P).on("change",s).on("blur",N).on("focus",S),e.find("span").on("mousedown",O).end().find(">div.colorpicker_current_color").on("click",B),o.selector=e.find("div.colorpicker_color").on("mousedown",H),o.selectorIndic=o.selector.find("div div"),o.el=this,o.hue=e.find("div.colorpicker_hue div"),e.find("div.colorpicker_hue").on("mousedown",z),o.newColor=e.find("div.colorpicker_new_color"),o.currentColor=e.find("div.colorpicker_current_color"),e.data("colorpicker",o),e.find("div.colorpicker_submit").on("mouseenter",Y).on("mouseleave",j).on("click",T),r(o.color,e.get(0)),a(o.color,e.get(0)),c(o.color,e.get(0)),l(o.color,e.get(0)),n(o.color,e.get(0)),q(o.color,e.get(0)),d(o.color,e.get(0)),o.flat?e.css({position:"relative",display:"block"}):i(this).on(o.eventName,E))})},showPicker:function(){return this.each(function(){i(this).data("colorpickerId")&&E.apply(this)})},hidePicker:function(){return this.each(function(){i(this).data("colorpickerId")&&i("#"+i(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=x(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=w(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=k(e)}return this.each(function(){var o;i(this).data("colorpickerId")&&((o=i("#"+i(this).data("colorpickerId"))).data("colorpicker").color=e,o.data("colorpicker").origColor=e,r(e,o.get(0)),a(e,o.get(0)),c(e,o.get(0)),l(e,o.get(0)),n(e,o.get(0)),q(e,o.get(0)),d(e,o.get(0)))})}};function q(o,e){i(e).data("colorpicker").currentColor.css("backgroundColor","#"+M(o))}function P(o){if(o=o.charCode||o.keyCode||-1,e<o&&o<=90||32==o)return!1;!0===i(this).parent().parent().data("colorpicker").livePreview&&s.apply(this)}function N(o){i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function S(){e=0<this.parentNode.className.indexOf("_hex")?70:65,i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),i(this).parent().addClass("colorpicker_focus")}function O(o){var e=i(this).parent().find("input").focus(),o={el:i(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:o.pageY,field:e,val:parseInt(e.val(),10),preview:i(this).parent().parent().data("colorpicker").livePreview};i(document).on("mouseup",o,p),i(document).on("mousemove",o,t)}function z(o){var e={cal:i(this).parent(),y:i(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,i(document).bind("mouseup",e,f),i(document).on("mousemove",e,u)}function H(o){var e={cal:i(this).parent(),pos:i(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,i(document).on("mouseup",e,m),i(document).on("mousemove",e,h)}function Y(o){i(this).addClass("colorpicker_focus")}function j(o){i(this).removeClass("colorpicker_focus")}function T(o){var e=i(this).parent(),t=e.data("colorpicker").color;e.data("colorpicker").origColor=t,q(t,e.get(0)),e.data("colorpicker").onSubmit(t,M(t),y(t),e.data("colorpicker").el)}function E(o){var e=i("#"+i(this).data("colorpickerId")),t=(e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]),i(this).offset()),r=(r="CSS1Compat"==document.compatMode,{l:window.pageXOffset||(r?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(r?document.documentElement:document.body).scrollTop,w:window.innerWidth||(r?document.documentElement:document.body).clientWidth,h:window.innerHeight||(r?document.documentElement:document.body).clientHeight}),a=t.top+this.offsetHeight,t=t.left;return r.t+r.h<a+176&&(a-=this.offsetHeight+176),r.l+r.w<t+356&&(t-=356),e.css({left:t+"px",top:a+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),i(document).on("mousedown",{cal:e},v),!1}function B(){var o=i(this).parent(),e=o.data("colorpicker").origColor;o.data("colorpicker").color=e,r(e,o.get(0)),c(e,o.get(0)),a(e,o.get(0)),n(e,o.get(0)),l(e,o.get(0)),d(e,o.get(0))}i.fn.extend({ColorPicker:I.init,ColorPickerHide:I.hidePicker,ColorPickerShow:I.showPicker,ColorPickerSetColor:I.setColor})}(jQuery),function(i){var e,o,r,a,c,n,l,d,s,t,p,u,f,h,m,v,g,k,b,_,x,w,y,C,M,o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(e=65)},r=function(o,e){o=y(o),i(e).data("colorpicker").fields.eq(1).val(o.r).end().eq(2).val(o.g).end().eq(3).val(o.b).end()},a=function(o,e){i(e).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},c=function(o,e){i(e).data("colorpicker").fields.eq(0).val(M(o)).end()},n=function(o,e){i(e).data("colorpicker").selector.css("backgroundColor","#"+M({h:o.h,s:100,b:100})),i(e).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},l=function(o,e){i(e).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},d=function(o,e){i(e).data("colorpicker").newColor.css("backgroundColor","#"+M(o))},s=function(o){var e,t=i(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=e=x(_(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=e=k({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=e=w(b({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&(r(e,t.get(0)),c(e,t.get(0)),a(e,t.get(0))),n(e,t.get(0)),l(e,t.get(0)),d(e,t.get(0)),t.data("colorpicker").onChange.apply(t,[e,M(e),y(e)])},t=function(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&s.apply(o.data.field.get(0),[!0]),!1},p=function(o){return s.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),i(document).off("mouseup",p),i(document).off("mousemove",t),!1},u=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,o.pageY-o.data.y)))/150,10)).get(0),[o.data.preview]),!1},f=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",f),i(document).off("mousemove",u),!1},h=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,o.pageY-o.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,o.pageX-o.data.pos.left))/150,10)).get(0),[o.data.preview]),!1},m=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",m),i(document).off("mousemove",h),!1},v=function(o){g(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),i(document).off("mousedown",v))},g=function(o,e,t){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var r=e.parentNode;r&&r!=t;){if(r==o)return!0;r=r.parentNode}return!1},k=function(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},b=function(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},_=function(o){var e=6-o.length;if(0<e){for(var t=[],r=0;r<e;r++)t.push("0");t.push(o),o=t.join("")}return o},x=function(o){return w({r:(o=parseInt(-1<o.indexOf("#")?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o})},w=function(o){var e={h:0,s:0,b:0},t=Math.min(o.r,o.g,o.b),r=Math.max(o.r,o.g,o.b),t=r-t;return e.b=r,e.s=0!=r?255*t/r:0,0!=e.s?o.r==r?e.h=(o.g-o.b)/t:o.g==r?e.h=2+(o.b-o.r)/t:e.h=4+(o.r-o.g)/t:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},y=function(o){var e,t={},r=Math.round(o.h),a=Math.round(255*o.s/100),o=Math.round(255*o.b/100);return 0==a?t.r=t.g=t.b=o:(o=r%60*((e=o)-(a=(255-a)*o/255))/60,(r=360==r?0:r)<60?(t.r=e,t.b=a,t.g=a+o):r<120?(t.g=e,t.b=a,t.r=e-o):r<180?(t.g=e,t.r=a,t.b=a+o):r<240?(t.b=e,t.r=a,t.g=e-o):r<300?(t.b=e,t.g=a,t.r=a+o):r<360?(t.r=e,t.g=a,t.b=e-o):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},C=function(o){var t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return i.each(t,function(o,e){1==e.length&&(t[o]="0"+e)}),t.join("")},M=function(o){return C(y(o))},I={init:function(t){if("string"==typeof(t=i.extend({},o,t||{})).color)t.color=x(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=w(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=k(t.color)}return this.each(function(){var o,e;i(this).data("colorpickerId")||((o=i.extend({},t)).origColor=t.color,e="collorpicker_"+parseInt(1e3*Math.random()),i(this).data("colorpickerId",e),e=i('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",e),o.flat?e.appendTo(this).show():e.appendTo(document.body),o.fields=e.find("input").on("keyup",P).on("change",s).on("blur",N).on("focus",S),e.find("span").on("mousedown",O).end().find(">div.colorpicker_current_color").on("click",B),o.selector=e.find("div.colorpicker_color").on("mousedown",H),o.selectorIndic=o.selector.find("div div"),o.el=this,o.hue=e.find("div.colorpicker_hue div"),e.find("div.colorpicker_hue").on("mousedown",z),o.newColor=e.find("div.colorpicker_new_color"),o.currentColor=e.find("div.colorpicker_current_color"),e.data("colorpicker",o),e.find("div.colorpicker_submit").on("mouseenter",Y).on("mouseleave",j).on("click",T),r(o.color,e.get(0)),a(o.color,e.get(0)),c(o.color,e.get(0)),l(o.color,e.get(0)),n(o.color,e.get(0)),q(o.color,e.get(0)),d(o.color,e.get(0)),o.flat?e.css({position:"relative",display:"block"}):i(this).on(o.eventName,E))})},showPicker:function(){return this.each(function(){i(this).data("colorpickerId")&&E.apply(this)})},hidePicker:function(){return this.each(function(){i(this).data("colorpickerId")&&i("#"+i(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=x(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=w(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=k(e)}return this.each(function(){var o;i(this).data("colorpickerId")&&((o=i("#"+i(this).data("colorpickerId"))).data("colorpicker").color=e,o.data("colorpicker").origColor=e,r(e,o.get(0)),a(e,o.get(0)),c(e,o.get(0)),l(e,o.get(0)),n(e,o.get(0)),q(e,o.get(0)),d(e,o.get(0)))})}};function q(o,e){i(e).data("colorpicker").currentColor.css("backgroundColor","#"+M(o))}function P(o){if(o=o.charCode||o.keyCode||-1,e<o&&o<=90||32==o)return!1;!0===i(this).parent().parent().data("colorpicker").livePreview&&s.apply(this)}function N(o){i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function S(){e=0<this.parentNode.className.indexOf("_hex")?70:65,i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),i(this).parent().addClass("colorpicker_focus")}function O(o){var e=i(this).parent().find("input").focus(),o={el:i(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:o.pageY,field:e,val:parseInt(e.val(),10),preview:i(this).parent().parent().data("colorpicker").livePreview};i(document).on("mouseup",o,p),i(document).on("mousemove",o,t)}function z(o){var e={cal:i(this).parent(),y:i(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,i(document).bind("mouseup",e,f),i(document).on("mousemove",e,u)}function H(o){var e={cal:i(this).parent(),pos:i(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,i(document).on("mouseup",e,m),i(document).on("mousemove",e,h)}function Y(o){i(this).addClass("colorpicker_focus")}function j(o){i(this).removeClass("colorpicker_focus")}function T(o){var e=i(this).parent(),t=e.data("colorpicker").color;q(e.data("colorpicker").origColor=t,e.get(0)),e.data("colorpicker").onSubmit(t,M(t),y(t),e.data("colorpicker").el)}function E(o){var e=i("#"+i(this).data("colorpickerId")),t=(e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]),i(this).offset()),r=(r="CSS1Compat"==document.compatMode,{l:window.pageXOffset||(r?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(r?document.documentElement:document.body).scrollTop,w:window.innerWidth||(r?document.documentElement:document.body).clientWidth,h:window.innerHeight||(r?document.documentElement:document.body).clientHeight}),a=t.top+this.offsetHeight,t=t.left;return r.t+r.h<a+176&&(a-=this.offsetHeight+176),r.l+r.w<t+356&&(t-=356),e.css({left:t+"px",top:a+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),i(document).on("mousedown",{cal:e},v),!1}function B(){var o=i(this).parent(),e=o.data("colorpicker").origColor;o.data("colorpicker").color=e,r(e,o.get(0)),c(e,o.get(0)),a(e,o.get(0)),n(e,o.get(0)),l(e,o.get(0)),d(e,o.get(0))}i.fn.extend({ColorPicker:I.init,ColorPickerHide:I.hidePicker,ColorPickerShow:I.showPicker,ColorPickerSetColor:I.setColor})}(jQuery),function(i){var e,o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(e=65)},r=function(o,e){o=y(o),i(e).data("colorpicker").fields.eq(1).val(o.r).end().eq(2).val(o.g).end().eq(3).val(o.b).end()},a=function(o,e){i(e).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},c=function(o,e){i(e).data("colorpicker").fields.eq(0).val(M(o)).end()},n=function(o,e){i(e).data("colorpicker").selector.css("backgroundColor","#"+M({h:o.h,s:100,b:100})),i(e).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},l=function(o,e){i(e).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},d=function(o,e){i(e).data("colorpicker").newColor.css("backgroundColor","#"+M(o))},s=function(o){var e,t=i(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=e=x(_(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=e=k({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=e=w(b({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&(r(e,t.get(0)),c(e,t.get(0)),a(e,t.get(0))),n(e,t.get(0)),l(e,t.get(0)),d(e,t.get(0)),t.data("colorpicker").onChange.apply(t,[e,M(e),y(e)])},t=function(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&s.apply(o.data.field.get(0),[!0]),!1},p=function(o){return s.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),i(document).off("mouseup",p),i(document).off("mousemove",t),!1},u=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,o.pageY-o.data.y)))/150,10)).get(0),[o.data.preview]),!1},f=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",f),i(document).off("mousemove",u),!1},h=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,o.pageY-o.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,o.pageX-o.data.pos.left))/150,10)).get(0),[o.data.preview]),!1},m=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",m),i(document).off("mousemove",h),!1},v=function(o){g(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),i(document).off("mousedown",v))},g=function(o,e,t){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var r=e.parentNode;r&&r!=t;){if(r==o)return!0;r=r.parentNode}return!1},k=function(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},b=function(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},_=function(o){var e=6-o.length;if(0<e){for(var t=[],r=0;r<e;r++)t.push("0");t.push(o),o=t.join("")}return o},x=function(o){return w({r:(o=parseInt(-1<o.indexOf("#")?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o})},w=function(o){var e={h:0,s:0,b:0},t=Math.min(o.r,o.g,o.b),r=Math.max(o.r,o.g,o.b),t=r-t;return e.b=r,e.s=0!=r?255*t/r:0,0!=e.s?o.r==r?e.h=(o.g-o.b)/t:o.g==r?e.h=2+(o.b-o.r)/t:e.h=4+(o.r-o.g)/t:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},y=function(o){var e,t={},r=Math.round(o.h),a=Math.round(255*o.s/100),o=Math.round(255*o.b/100);return 0==a?t.r=t.g=t.b=o:(o=r%60*((e=o)-(a=(255-a)*o/255))/60,(r=360==r?0:r)<60?(t.r=e,t.b=a,t.g=a+o):r<120?(t.g=e,t.b=a,t.r=e-o):r<180?(t.g=e,t.r=a,t.b=a+o):r<240?(t.b=e,t.r=a,t.g=e-o):r<300?(t.b=e,t.g=a,t.r=a+o):r<360?(t.r=e,t.g=a,t.b=e-o):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},C=function(o){var t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return i.each(t,function(o,e){1==e.length&&(t[o]="0"+e)}),t.join("")},M=function(o){return C(y(o))},I={init:function(t){if("string"==typeof(t=i.extend({},o,t||{})).color)t.color=x(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=w(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=k(t.color)}return this.each(function(){var o,e;i(this).data("colorpickerId")||((o=i.extend({},t)).origColor=t.color,e="collorpicker_"+parseInt(1e3*Math.random()),i(this).data("colorpickerId",e),e=i('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",e),o.flat?e.appendTo(this).show():e.appendTo(document.body),o.fields=e.find("input").on("keyup",P).on("change",s).on("blur",N).on("focus",S),e.find("span").on("mousedown",O).end().find(">div.colorpicker_current_color").on("click",B),o.selector=e.find("div.colorpicker_color").on("mousedown",H),o.selectorIndic=o.selector.find("div div"),o.el=this,o.hue=e.find("div.colorpicker_hue div"),e.find("div.colorpicker_hue").on("mousedown",z),o.newColor=e.find("div.colorpicker_new_color"),o.currentColor=e.find("div.colorpicker_current_color"),e.data("colorpicker",o),e.find("div.colorpicker_submit").on("mouseenter",Y).on("mouseleave",j).on("click",T),r(o.color,e.get(0)),a(o.color,e.get(0)),c(o.color,e.get(0)),l(o.color,e.get(0)),n(o.color,e.get(0)),q(o.color,e.get(0)),d(o.color,e.get(0)),o.flat?e.css({position:"relative",display:"block"}):i(this).on(o.eventName,E))})},showPicker:function(){return this.each(function(){i(this).data("colorpickerId")&&E.apply(this)})},hidePicker:function(){return this.each(function(){i(this).data("colorpickerId")&&i("#"+i(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=x(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=w(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=k(e)}return this.each(function(){var o;i(this).data("colorpickerId")&&((o=i("#"+i(this).data("colorpickerId"))).data("colorpicker").color=e,o.data("colorpicker").origColor=e,r(e,o.get(0)),a(e,o.get(0)),c(e,o.get(0)),l(e,o.get(0)),n(e,o.get(0)),q(e,o.get(0)),d(e,o.get(0)))})}};function q(o,e){i(e).data("colorpicker").currentColor.css("backgroundColor","#"+M(o))}function P(o){if(o=o.charCode||o.keyCode||-1,e<o&&o<=90||32==o)return!1;!0===i(this).parent().parent().data("colorpicker").livePreview&&s.apply(this)}function N(o){i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function S(){e=0<this.parentNode.className.indexOf("_hex")?70:65,i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),i(this).parent().addClass("colorpicker_focus")}function O(o){var e=i(this).parent().find("input").focus(),o={el:i(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:o.pageY,field:e,val:parseInt(e.val(),10),preview:i(this).parent().parent().data("colorpicker").livePreview};i(document).on("mouseup",o,p),i(document).on("mousemove",o,t)}function z(o){var e={cal:i(this).parent(),y:i(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,i(document).bind("mouseup",e,f),i(document).on("mousemove",e,u)}function H(o){var e={cal:i(this).parent(),pos:i(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,i(document).on("mouseup",e,m),i(document).on("mousemove",e,h)}function Y(o){i(this).addClass("colorpicker_focus")}function j(o){i(this).removeClass("colorpicker_focus")}function T(o){var e=i(this).parent(),t=e.data("colorpicker").color;q(e.data("colorpicker").origColor=t,e.get(0)),e.data("colorpicker").onSubmit(t,M(t),y(t),e.data("colorpicker").el)}function E(o){var e=i("#"+i(this).data("colorpickerId")),t=(e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]),i(this).offset()),r=(r="CSS1Compat"==document.compatMode,{l:window.pageXOffset||(r?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(r?document.documentElement:document.body).scrollTop,w:window.innerWidth||(r?document.documentElement:document.body).clientWidth,h:window.innerHeight||(r?document.documentElement:document.body).clientHeight}),a=t.top+this.offsetHeight,t=t.left;return r.t+r.h<a+176&&(a-=this.offsetHeight+176),r.l+r.w<t+356&&(t-=356),e.css({left:t+"px",top:a+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),i(document).on("mousedown",{cal:e},v),!1}function B(){var o=i(this).parent(),e=o.data("colorpicker").origColor;o.data("colorpicker").color=e,r(e,o.get(0)),c(e,o.get(0)),a(e,o.get(0)),n(e,o.get(0)),l(e,o.get(0)),d(e,o.get(0))}i.fn.extend({ColorPicker:I.init,ColorPickerHide:I.hidePicker,ColorPickerShow:I.showPicker,ColorPickerSetColor:I.setColor})}(jQuery),function(i){var e,o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(e=65)},r=function(o,e){o=y(o),i(e).data("colorpicker").fields.eq(1).val(o.r).end().eq(2).val(o.g).end().eq(3).val(o.b).end()},a=function(o,e){i(e).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},c=function(o,e){i(e).data("colorpicker").fields.eq(0).val(M(o)).end()},n=function(o,e){i(e).data("colorpicker").selector.css("backgroundColor","#"+M({h:o.h,s:100,b:100})),i(e).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},l=function(o,e){i(e).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},d=function(o,e){i(e).data("colorpicker").newColor.css("backgroundColor","#"+M(o))},s=function(o){var e,t=i(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=e=x(_(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=e=k({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=e=w(b({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&(r(e,t.get(0)),c(e,t.get(0)),a(e,t.get(0))),n(e,t.get(0)),l(e,t.get(0)),d(e,t.get(0)),t.data("colorpicker").onChange.apply(t,[e,M(e),y(e)])},t=function(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&s.apply(o.data.field.get(0),[!0]),!1},p=function(o){return s.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),i(document).off("mouseup",p),i(document).off("mousemove",t),!1},u=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,o.pageY-o.data.y)))/150,10)).get(0),[o.data.preview]),!1},f=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",f),i(document).off("mousemove",u),!1},h=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,o.pageY-o.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,o.pageX-o.data.pos.left))/150,10)).get(0),[o.data.preview]),!1},m=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",m),i(document).off("mousemove",h),!1},v=function(o){g(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),i(document).off("mousedown",v))},g=function(o,e,t){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var r=e.parentNode;r&&r!=t;){if(r==o)return!0;r=r.parentNode}return!1},k=function(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},b=function(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},_=function(o){var e=6-o.length;if(0<e){for(var t=[],r=0;r<e;r++)t.push("0");t.push(o),o=t.join("")}return o},x=function(o){return w({r:(o=parseInt(-1<o.indexOf("#")?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o})},w=function(o){var e={h:0,s:0,b:0},t=Math.min(o.r,o.g,o.b),r=Math.max(o.r,o.g,o.b),t=r-t;return e.b=r,e.s=0!=r?255*t/r:0,0!=e.s?o.r==r?e.h=(o.g-o.b)/t:o.g==r?e.h=2+(o.b-o.r)/t:e.h=4+(o.r-o.g)/t:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},y=function(o){var e,t={},r=Math.round(o.h),a=Math.round(255*o.s/100),o=Math.round(255*o.b/100);return 0==a?t.r=t.g=t.b=o:(o=r%60*((e=o)-(a=(255-a)*o/255))/60,(r=360==r?0:r)<60?(t.r=e,t.b=a,t.g=a+o):r<120?(t.g=e,t.b=a,t.r=e-o):r<180?(t.g=e,t.r=a,t.b=a+o):r<240?(t.b=e,t.r=a,t.g=e-o):r<300?(t.b=e,t.g=a,t.r=a+o):r<360?(t.r=e,t.g=a,t.b=e-o):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},C=function(o){var t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return i.each(t,function(o,e){1==e.length&&(t[o]="0"+e)}),t.join("")},M=function(o){return C(y(o))},I={init:function(t){if("string"==typeof(t=i.extend({},o,t||{})).color)t.color=x(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=w(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=k(t.color)}return this.each(function(){var o,e;i(this).data("colorpickerId")||((o=i.extend({},t)).origColor=t.color,e="collorpicker_"+parseInt(1e3*Math.random()),i(this).data("colorpickerId",e),e=i('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",e),o.flat?e.appendTo(this).show():e.appendTo(document.body),o.fields=e.find("input").on("keyup",P).on("change",s).on("blur",N).on("focus",S),e.find("span").on("mousedown",O).end().find(">div.colorpicker_current_color").on("click",B),o.selector=e.find("div.colorpicker_color").on("mousedown",H),o.selectorIndic=o.selector.find("div div"),o.el=this,o.hue=e.find("div.colorpicker_hue div"),e.find("div.colorpicker_hue").on("mousedown",z),o.newColor=e.find("div.colorpicker_new_color"),o.currentColor=e.find("div.colorpicker_current_color"),e.data("colorpicker",o),e.find("div.colorpicker_submit").on("mouseenter",Y).on("mouseleave",j).on("click",T),r(o.color,e.get(0)),a(o.color,e.get(0)),c(o.color,e.get(0)),l(o.color,e.get(0)),n(o.color,e.get(0)),q(o.color,e.get(0)),d(o.color,e.get(0)),o.flat?e.css({position:"relative",display:"block"}):i(this).on(o.eventName,E))})},showPicker:function(){return this.each(function(){i(this).data("colorpickerId")&&E.apply(this)})},hidePicker:function(){return this.each(function(){i(this).data("colorpickerId")&&i("#"+i(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=x(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=w(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=k(e)}return this.each(function(){var o;i(this).data("colorpickerId")&&((o=i("#"+i(this).data("colorpickerId"))).data("colorpicker").color=e,o.data("colorpicker").origColor=e,r(e,o.get(0)),a(e,o.get(0)),c(e,o.get(0)),l(e,o.get(0)),n(e,o.get(0)),q(e,o.get(0)),d(e,o.get(0)))})}};function q(o,e){i(e).data("colorpicker").currentColor.css("backgroundColor","#"+M(o))}function P(o){if(o=o.charCode||o.keyCode||-1,e<o&&o<=90||32==o)return!1;!0===i(this).parent().parent().data("colorpicker").livePreview&&s.apply(this)}function N(o){i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function S(){e=0<this.parentNode.className.indexOf("_hex")?70:65,i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),i(this).parent().addClass("colorpicker_focus")}function O(o){var e=i(this).parent().find("input").focus(),o={el:i(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:o.pageY,field:e,val:parseInt(e.val(),10),preview:i(this).parent().parent().data("colorpicker").livePreview};i(document).on("mouseup",o,p),i(document).on("mousemove",o,t)}function z(o){var e={cal:i(this).parent(),y:i(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,i(document).bind("mouseup",e,f),i(document).on("mousemove",e,u)}function H(o){var e={cal:i(this).parent(),pos:i(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,i(document).on("mouseup",e,m),i(document).on("mousemove",e,h)}function Y(o){i(this).addClass("colorpicker_focus")}function j(o){i(this).removeClass("colorpicker_focus")}function T(o){var e=i(this).parent(),t=e.data("colorpicker").color;q(e.data("colorpicker").origColor=t,e.get(0)),e.data("colorpicker").onSubmit(t,M(t),y(t),e.data("colorpicker").el)}function E(o){var e=i("#"+i(this).data("colorpickerId")),t=(e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]),i(this).offset()),r=(r="CSS1Compat"==document.compatMode,{l:window.pageXOffset||(r?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(r?document.documentElement:document.body).scrollTop,w:window.innerWidth||(r?document.documentElement:document.body).clientWidth,h:window.innerHeight||(r?document.documentElement:document.body).clientHeight}),a=t.top+this.offsetHeight,t=t.left;return r.t+r.h<a+176&&(a-=this.offsetHeight+176),r.l+r.w<t+356&&(t-=356),e.css({left:t+"px",top:a+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),i(document).on("mousedown",{cal:e},v),!1}function B(){var o=i(this).parent(),e=o.data("colorpicker").origColor;o.data("colorpicker").color=e,r(e,o.get(0)),c(e,o.get(0)),a(e,o.get(0)),n(e,o.get(0)),l(e,o.get(0)),d(e,o.get(0))}i.fn.extend({ColorPicker:I.init,ColorPickerHide:I.hidePicker,ColorPickerShow:I.showPicker,ColorPickerSetColor:I.setColor})}(jQuery),function(i){var e,o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(e=65)},r=function(o,e){o=y(o),i(e).data("colorpicker").fields.eq(1).val(o.r).end().eq(2).val(o.g).end().eq(3).val(o.b).end()},a=function(o,e){i(e).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},c=function(o,e){i(e).data("colorpicker").fields.eq(0).val(M(o)).end()},n=function(o,e){i(e).data("colorpicker").selector.css("backgroundColor","#"+M({h:o.h,s:100,b:100})),i(e).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},l=function(o,e){i(e).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},d=function(o,e){i(e).data("colorpicker").newColor.css("backgroundColor","#"+M(o))},s=function(o){var e,t=i(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=e=x(_(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=e=k({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=e=w(b({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&(r(e,t.get(0)),c(e,t.get(0)),a(e,t.get(0))),n(e,t.get(0)),l(e,t.get(0)),d(e,t.get(0)),t.data("colorpicker").onChange.apply(t,[e,M(e),y(e)])},t=function(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&s.apply(o.data.field.get(0),[!0]),!1},p=function(o){return s.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),i(document).off("mouseup",p),i(document).off("mousemove",t),!1},u=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,o.pageY-o.data.y)))/150,10)).get(0),[o.data.preview]),!1},f=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",f),i(document).off("mousemove",u),!1},h=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,o.pageY-o.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,o.pageX-o.data.pos.left))/150,10)).get(0),[o.data.preview]),!1},m=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",m),i(document).off("mousemove",h),!1},v=function(o){g(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),i(document).off("mousedown",v))},g=function(o,e,t){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var r=e.parentNode;r&&r!=t;){if(r==o)return!0;r=r.parentNode}return!1},k=function(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},b=function(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},_=function(o){var e=6-o.length;if(0<e){for(var t=[],r=0;r<e;r++)t.push("0");t.push(o),o=t.join("")}return o},x=function(o){return w({r:(o=parseInt(-1<o.indexOf("#")?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o})},w=function(o){var e={h:0,s:0,b:0},t=Math.min(o.r,o.g,o.b),r=Math.max(o.r,o.g,o.b),t=r-t;return e.b=r,e.s=0!=r?255*t/r:0,0!=e.s?o.r==r?e.h=(o.g-o.b)/t:o.g==r?e.h=2+(o.b-o.r)/t:e.h=4+(o.r-o.g)/t:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},y=function(o){var e,t={},r=Math.round(o.h),a=Math.round(255*o.s/100),o=Math.round(255*o.b/100);return 0==a?t.r=t.g=t.b=o:(o=r%60*((e=o)-(a=(255-a)*o/255))/60,(r=360==r?0:r)<60?(t.r=e,t.b=a,t.g=a+o):r<120?(t.g=e,t.b=a,t.r=e-o):r<180?(t.g=e,t.r=a,t.b=a+o):r<240?(t.b=e,t.r=a,t.g=e-o):r<300?(t.b=e,t.g=a,t.r=a+o):r<360?(t.r=e,t.g=a,t.b=e-o):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},C=function(o){var t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return i.each(t,function(o,e){1==e.length&&(t[o]="0"+e)}),t.join("")},M=function(o){return C(y(o))},I={init:function(t){if("string"==typeof(t=i.extend({},o,t||{})).color)t.color=x(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=w(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=k(t.color)}return this.each(function(){var o,e;i(this).data("colorpickerId")||((o=i.extend({},t)).origColor=t.color,e="collorpicker_"+parseInt(1e3*Math.random()),i(this).data("colorpickerId",e),e=i('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",e),o.flat?e.appendTo(this).show():e.appendTo(document.body),o.fields=e.find("input").on("keyup",P).on("change",s).on("blur",N).on("focus",S),e.find("span").on("mousedown",O).end().find(">div.colorpicker_current_color").on("click",B),o.selector=e.find("div.colorpicker_color").on("mousedown",H),o.selectorIndic=o.selector.find("div div"),o.el=this,o.hue=e.find("div.colorpicker_hue div"),e.find("div.colorpicker_hue").on("mousedown",z),o.newColor=e.find("div.colorpicker_new_color"),o.currentColor=e.find("div.colorpicker_current_color"),e.data("colorpicker",o),e.find("div.colorpicker_submit").on("mouseenter",Y).on("mouseleave",j).on("click",T),r(o.color,e.get(0)),a(o.color,e.get(0)),c(o.color,e.get(0)),l(o.color,e.get(0)),n(o.color,e.get(0)),q(o.color,e.get(0)),d(o.color,e.get(0)),o.flat?e.css({position:"relative",display:"block"}):i(this).on(o.eventName,E))})},showPicker:function(){return this.each(function(){i(this).data("colorpickerId")&&E.apply(this)})},hidePicker:function(){return this.each(function(){i(this).data("colorpickerId")&&i("#"+i(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=x(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=w(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=k(e)}return this.each(function(){var o;i(this).data("colorpickerId")&&((o=i("#"+i(this).data("colorpickerId"))).data("colorpicker").color=e,o.data("colorpicker").origColor=e,r(e,o.get(0)),a(e,o.get(0)),c(e,o.get(0)),l(e,o.get(0)),n(e,o.get(0)),q(e,o.get(0)),d(e,o.get(0)))})}};function q(o,e){i(e).data("colorpicker").currentColor.css("backgroundColor","#"+M(o))}function P(o){if(o=o.charCode||o.keyCode||-1,e<o&&o<=90||32==o)return!1;!0===i(this).parent().parent().data("colorpicker").livePreview&&s.apply(this)}function N(o){i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function S(){e=0<this.parentNode.className.indexOf("_hex")?70:65,i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),i(this).parent().addClass("colorpicker_focus")}function O(o){var e=i(this).parent().find("input").focus(),o={el:i(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:o.pageY,field:e,val:parseInt(e.val(),10),preview:i(this).parent().parent().data("colorpicker").livePreview};i(document).on("mouseup",o,p),i(document).on("mousemove",o,t)}function z(o){var e={cal:i(this).parent(),y:i(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,i(document).bind("mouseup",e,f),i(document).on("mousemove",e,u)}function H(o){var e={cal:i(this).parent(),pos:i(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,i(document).on("mouseup",e,m),i(document).on("mousemove",e,h)}function Y(o){i(this).addClass("colorpicker_focus")}function j(o){i(this).removeClass("colorpicker_focus")}function T(o){var e=i(this).parent(),t=e.data("colorpicker").color;q(e.data("colorpicker").origColor=t,e.get(0)),e.data("colorpicker").onSubmit(t,M(t),y(t),e.data("colorpicker").el)}function E(o){var e=i("#"+i(this).data("colorpickerId")),t=(e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]),i(this).offset()),r=(r="CSS1Compat"==document.compatMode,{l:window.pageXOffset||(r?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(r?document.documentElement:document.body).scrollTop,w:window.innerWidth||(r?document.documentElement:document.body).clientWidth,h:window.innerHeight||(r?document.documentElement:document.body).clientHeight}),a=t.top+this.offsetHeight,t=t.left;return r.t+r.h<a+176&&(a-=this.offsetHeight+176),r.l+r.w<t+356&&(t-=356),e.css({left:t+"px",top:a+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),i(document).on("mousedown",{cal:e},v),!1}function B(){var o=i(this).parent(),e=o.data("colorpicker").origColor;o.data("colorpicker").color=e,r(e,o.get(0)),c(e,o.get(0)),a(e,o.get(0)),n(e,o.get(0)),l(e,o.get(0)),d(e,o.get(0))}i.fn.extend({ColorPicker:I.init,ColorPickerHide:I.hidePicker,ColorPickerShow:I.showPicker,ColorPickerSetColor:I.setColor})}(jQuery),function(i){var e,o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(e=65)},r=function(o,e){o=y(o),i(e).data("colorpicker").fields.eq(1).val(o.r).end().eq(2).val(o.g).end().eq(3).val(o.b).end()},a=function(o,e){i(e).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},c=function(o,e){i(e).data("colorpicker").fields.eq(0).val(M(o)).end()},n=function(o,e){i(e).data("colorpicker").selector.css("backgroundColor","#"+M({h:o.h,s:100,b:100})),i(e).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},l=function(o,e){i(e).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},d=function(o,e){i(e).data("colorpicker").newColor.css("backgroundColor","#"+M(o))},s=function(o){var e,t=i(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=e=x(_(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=e=k({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=e=w(b({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&(r(e,t.get(0)),c(e,t.get(0)),a(e,t.get(0))),n(e,t.get(0)),l(e,t.get(0)),d(e,t.get(0)),t.data("colorpicker").onChange.apply(t,[e,M(e),y(e)])},t=function(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&s.apply(o.data.field.get(0),[!0]),!1},p=function(o){return s.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),i(document).off("mouseup",p),i(document).off("mousemove",t),!1},u=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,o.pageY-o.data.y)))/150,10)).get(0),[o.data.preview]),!1},f=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",f),i(document).off("mousemove",u),!1},h=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,o.pageY-o.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,o.pageX-o.data.pos.left))/150,10)).get(0),[o.data.preview]),!1},m=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",m),i(document).off("mousemove",h),!1},v=function(o){g(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),i(document).off("mousedown",v))},g=function(o,e,t){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var r=e.parentNode;r&&r!=t;){if(r==o)return!0;r=r.parentNode}return!1},k=function(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},b=function(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},_=function(o){var e=6-o.length;if(0<e){for(var t=[],r=0;r<e;r++)t.push("0");t.push(o),o=t.join("")}return o},x=function(o){return w({r:(o=parseInt(-1<o.indexOf("#")?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o})},w=function(o){var e={h:0,s:0,b:0},t=Math.min(o.r,o.g,o.b),r=Math.max(o.r,o.g,o.b),t=r-t;return e.b=r,e.s=0!=r?255*t/r:0,0!=e.s?o.r==r?e.h=(o.g-o.b)/t:o.g==r?e.h=2+(o.b-o.r)/t:e.h=4+(o.r-o.g)/t:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},y=function(o){var e,t={},r=Math.round(o.h),a=Math.round(255*o.s/100),o=Math.round(255*o.b/100);return 0==a?t.r=t.g=t.b=o:(o=r%60*((e=o)-(a=(255-a)*o/255))/60,(r=360==r?0:r)<60?(t.r=e,t.b=a,t.g=a+o):r<120?(t.g=e,t.b=a,t.r=e-o):r<180?(t.g=e,t.r=a,t.b=a+o):r<240?(t.b=e,t.r=a,t.g=e-o):r<300?(t.b=e,t.g=a,t.r=a+o):r<360?(t.r=e,t.g=a,t.b=e-o):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},C=function(o){var t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return i.each(t,function(o,e){1==e.length&&(t[o]="0"+e)}),t.join("")},M=function(o){return C(y(o))},I={init:function(t){if("string"==typeof(t=i.extend({},o,t||{})).color)t.color=x(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=w(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=k(t.color)}return this.each(function(){var o,e;i(this).data("colorpickerId")||((o=i.extend({},t)).origColor=t.color,e="collorpicker_"+parseInt(1e3*Math.random()),i(this).data("colorpickerId",e),e=i('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",e),o.flat?e.appendTo(this).show():e.appendTo(document.body),o.fields=e.find("input").on("keyup",P).on("change",s).on("blur",N).on("focus",S),e.find("span").on("mousedown",O).end().find(">div.colorpicker_current_color").on("click",B),o.selector=e.find("div.colorpicker_color").on("mousedown",H),o.selectorIndic=o.selector.find("div div"),o.el=this,o.hue=e.find("div.colorpicker_hue div"),e.find("div.colorpicker_hue").on("mousedown",z),o.newColor=e.find("div.colorpicker_new_color"),o.currentColor=e.find("div.colorpicker_current_color"),e.data("colorpicker",o),e.find("div.colorpicker_submit").on("mouseenter",Y).on("mouseleave",j).on("click",T),r(o.color,e.get(0)),a(o.color,e.get(0)),c(o.color,e.get(0)),l(o.color,e.get(0)),n(o.color,e.get(0)),q(o.color,e.get(0)),d(o.color,e.get(0)),o.flat?e.css({position:"relative",display:"block"}):i(this).on(o.eventName,E))})},showPicker:function(){return this.each(function(){i(this).data("colorpickerId")&&E.apply(this)})},hidePicker:function(){return this.each(function(){i(this).data("colorpickerId")&&i("#"+i(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=x(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=w(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=k(e)}return this.each(function(){var o;i(this).data("colorpickerId")&&((o=i("#"+i(this).data("colorpickerId"))).data("colorpicker").color=e,o.data("colorpicker").origColor=e,r(e,o.get(0)),a(e,o.get(0)),c(e,o.get(0)),l(e,o.get(0)),n(e,o.get(0)),q(e,o.get(0)),d(e,o.get(0)))})}};function q(o,e){i(e).data("colorpicker").currentColor.css("backgroundColor","#"+M(o))}function P(o){if(o=o.charCode||o.keyCode||-1,e<o&&o<=90||32==o)return!1;!0===i(this).parent().parent().data("colorpicker").livePreview&&s.apply(this)}function N(o){i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function S(){e=0<this.parentNode.className.indexOf("_hex")?70:65,i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),i(this).parent().addClass("colorpicker_focus")}function O(o){var e=i(this).parent().find("input").focus(),o={el:i(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:o.pageY,field:e,val:parseInt(e.val(),10),preview:i(this).parent().parent().data("colorpicker").livePreview};i(document).on("mouseup",o,p),i(document).on("mousemove",o,t)}function z(o){var e={cal:i(this).parent(),y:i(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,i(document).bind("mouseup",e,f),i(document).on("mousemove",e,u)}function H(o){var e={cal:i(this).parent(),pos:i(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,i(document).on("mouseup",e,m),i(document).on("mousemove",e,h)}function Y(o){i(this).addClass("colorpicker_focus")}function j(o){i(this).removeClass("colorpicker_focus")}function T(o){var e=i(this).parent(),t=e.data("colorpicker").color;q(e.data("colorpicker").origColor=t,e.get(0)),e.data("colorpicker").onSubmit(t,M(t),y(t),e.data("colorpicker").el)}function E(o){var e=i("#"+i(this).data("colorpickerId")),t=(e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]),i(this).offset()),r=(r="CSS1Compat"==document.compatMode,{l:window.pageXOffset||(r?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(r?document.documentElement:document.body).scrollTop,w:window.innerWidth||(r?document.documentElement:document.body).clientWidth,h:window.innerHeight||(r?document.documentElement:document.body).clientHeight}),a=t.top+this.offsetHeight,t=t.left;return r.t+r.h<a+176&&(a-=this.offsetHeight+176),r.l+r.w<t+356&&(t-=356),e.css({left:t+"px",top:a+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),i(document).on("mousedown",{cal:e},v),!1}function B(){var o=i(this).parent(),e=o.data("colorpicker").origColor;o.data("colorpicker").color=e,r(e,o.get(0)),c(e,o.get(0)),a(e,o.get(0)),n(e,o.get(0)),l(e,o.get(0)),d(e,o.get(0))}i.fn.extend({ColorPicker:I.init,ColorPickerHide:I.hidePicker,ColorPickerShow:I.showPicker,ColorPickerSetColor:I.setColor})}(jQuery),function(i){var e,o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(e=65)},r=function(o,e){o=y(o),i(e).data("colorpicker").fields.eq(1).val(o.r).end().eq(2).val(o.g).end().eq(3).val(o.b).end()},a=function(o,e){i(e).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},c=function(o,e){i(e).data("colorpicker").fields.eq(0).val(M(o)).end()},n=function(o,e){i(e).data("colorpicker").selector.css("backgroundColor","#"+M({h:o.h,s:100,b:100})),i(e).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},l=function(o,e){i(e).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},d=function(o,e){i(e).data("colorpicker").newColor.css("backgroundColor","#"+M(o))},s=function(o){var e,t=i(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=e=x(_(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=e=k({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=e=w(b({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&(r(e,t.get(0)),c(e,t.get(0)),a(e,t.get(0))),n(e,t.get(0)),l(e,t.get(0)),d(e,t.get(0)),t.data("colorpicker").onChange.apply(t,[e,M(e),y(e)])},t=function(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&s.apply(o.data.field.get(0),[!0]),!1},p=function(o){return s.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),i(document).off("mouseup",p),i(document).off("mousemove",t),!1},u=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,o.pageY-o.data.y)))/150,10)).get(0),[o.data.preview]),!1},f=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",f),i(document).off("mousemove",u),!1},h=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,o.pageY-o.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,o.pageX-o.data.pos.left))/150,10)).get(0),[o.data.preview]),!1},m=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",m),i(document).off("mousemove",h),!1},v=function(o){g(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),i(document).off("mousedown",v))},g=function(o,e,t){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var r=e.parentNode;r&&r!=t;){if(r==o)return!0;r=r.parentNode}return!1},k=function(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},b=function(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},_=function(o){var e=6-o.length;if(0<e){for(var t=[],r=0;r<e;r++)t.push("0");t.push(o),o=t.join("")}return o},x=function(o){return w({r:(o=parseInt(-1<o.indexOf("#")?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o})},w=function(o){var e={h:0,s:0,b:0},t=Math.min(o.r,o.g,o.b),r=Math.max(o.r,o.g,o.b),t=r-t;return e.b=r,e.s=0!=r?255*t/r:0,0!=e.s?o.r==r?e.h=(o.g-o.b)/t:o.g==r?e.h=2+(o.b-o.r)/t:e.h=4+(o.r-o.g)/t:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},y=function(o){var e,t={},r=Math.round(o.h),a=Math.round(255*o.s/100),o=Math.round(255*o.b/100);return 0==a?t.r=t.g=t.b=o:(o=r%60*((e=o)-(a=(255-a)*o/255))/60,(r=360==r?0:r)<60?(t.r=e,t.b=a,t.g=a+o):r<120?(t.g=e,t.b=a,t.r=e-o):r<180?(t.g=e,t.r=a,t.b=a+o):r<240?(t.b=e,t.r=a,t.g=e-o):r<300?(t.b=e,t.g=a,t.r=a+o):r<360?(t.r=e,t.g=a,t.b=e-o):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},C=function(o){var t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return i.each(t,function(o,e){1==e.length&&(t[o]="0"+e)}),t.join("")},M=function(o){return C(y(o))},I={init:function(t){if("string"==typeof(t=i.extend({},o,t||{})).color)t.color=x(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=w(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=k(t.color)}return this.each(function(){var o,e;i(this).data("colorpickerId")||((o=i.extend({},t)).origColor=t.color,e="collorpicker_"+parseInt(1e3*Math.random()),i(this).data("colorpickerId",e),e=i('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",e),o.flat?e.appendTo(this).show():e.appendTo(document.body),o.fields=e.find("input").on("keyup",P).on("change",s).on("blur",N).on("focus",S),e.find("span").on("mousedown",O).end().find(">div.colorpicker_current_color").on("click",B),o.selector=e.find("div.colorpicker_color").on("mousedown",H),o.selectorIndic=o.selector.find("div div"),o.el=this,o.hue=e.find("div.colorpicker_hue div"),e.find("div.colorpicker_hue").on("mousedown",z),o.newColor=e.find("div.colorpicker_new_color"),o.currentColor=e.find("div.colorpicker_current_color"),e.data("colorpicker",o),e.find("div.colorpicker_submit").on("mouseenter",Y).on("mouseleave",j).on("click",T),r(o.color,e.get(0)),a(o.color,e.get(0)),c(o.color,e.get(0)),l(o.color,e.get(0)),n(o.color,e.get(0)),q(o.color,e.get(0)),d(o.color,e.get(0)),o.flat?e.css({position:"relative",display:"block"}):i(this).on(o.eventName,E))})},showPicker:function(){return this.each(function(){i(this).data("colorpickerId")&&E.apply(this)})},hidePicker:function(){return this.each(function(){i(this).data("colorpickerId")&&i("#"+i(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=x(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=w(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=k(e)}return this.each(function(){var o;i(this).data("colorpickerId")&&((o=i("#"+i(this).data("colorpickerId"))).data("colorpicker").color=e,o.data("colorpicker").origColor=e,r(e,o.get(0)),a(e,o.get(0)),c(e,o.get(0)),l(e,o.get(0)),n(e,o.get(0)),q(e,o.get(0)),d(e,o.get(0)))})}};function q(o,e){i(e).data("colorpicker").currentColor.css("backgroundColor","#"+M(o))}function P(o){if(o=o.charCode||o.keyCode||-1,e<o&&o<=90||32==o)return!1;!0===i(this).parent().parent().data("colorpicker").livePreview&&s.apply(this)}function N(o){i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function S(){e=0<this.parentNode.className.indexOf("_hex")?70:65,i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),i(this).parent().addClass("colorpicker_focus")}function O(o){var e=i(this).parent().find("input").focus(),o={el:i(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:o.pageY,field:e,val:parseInt(e.val(),10),preview:i(this).parent().parent().data("colorpicker").livePreview};i(document).on("mouseup",o,p),i(document).on("mousemove",o,t)}function z(o){var e={cal:i(this).parent(),y:i(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,i(document).bind("mouseup",e,f),i(document).on("mousemove",e,u)}function H(o){var e={cal:i(this).parent(),pos:i(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,i(document).on("mouseup",e,m),i(document).on("mousemove",e,h)}function Y(o){i(this).addClass("colorpicker_focus")}function j(o){i(this).removeClass("colorpicker_focus")}function T(o){var e=i(this).parent(),t=e.data("colorpicker").color;q(e.data("colorpicker").origColor=t,e.get(0)),e.data("colorpicker").onSubmit(t,M(t),y(t),e.data("colorpicker").el)}function E(o){var e=i("#"+i(this).data("colorpickerId")),t=(e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]),i(this).offset()),r=(r="CSS1Compat"==document.compatMode,{l:window.pageXOffset||(r?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(r?document.documentElement:document.body).scrollTop,w:window.innerWidth||(r?document.documentElement:document.body).clientWidth,h:window.innerHeight||(r?document.documentElement:document.body).clientHeight}),a=t.top+this.offsetHeight,t=t.left;return r.t+r.h<a+176&&(a-=this.offsetHeight+176),r.l+r.w<t+356&&(t-=356),e.css({left:t+"px",top:a+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),i(document).on("mousedown",{cal:e},v),!1}function B(){var o=i(this).parent(),e=o.data("colorpicker").origColor;o.data("colorpicker").color=e,r(e,o.get(0)),c(e,o.get(0)),a(e,o.get(0)),n(e,o.get(0)),l(e,o.get(0)),d(e,o.get(0))}i.fn.extend({ColorPicker:I.init,ColorPickerHide:I.hidePicker,ColorPickerShow:I.showPicker,ColorPickerSetColor:I.setColor})}(jQuery),function(i){var e,o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(e=65)},r=function(o,e){o=y(o),i(e).data("colorpicker").fields.eq(1).val(o.r).end().eq(2).val(o.g).end().eq(3).val(o.b).end()},a=function(o,e){i(e).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},c=function(o,e){i(e).data("colorpicker").fields.eq(0).val(M(o)).end()},n=function(o,e){i(e).data("colorpicker").selector.css("backgroundColor","#"+M({h:o.h,s:100,b:100})),i(e).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},l=function(o,e){i(e).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},d=function(o,e){i(e).data("colorpicker").newColor.css("backgroundColor","#"+M(o))},s=function(o){var e,t=i(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=e=x(_(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=e=k({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=e=w(b({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&(r(e,t.get(0)),c(e,t.get(0)),a(e,t.get(0))),n(e,t.get(0)),l(e,t.get(0)),d(e,t.get(0)),t.data("colorpicker").onChange.apply(t,[e,M(e),y(e)])},t=function(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&s.apply(o.data.field.get(0),[!0]),!1},p=function(o){return s.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),i(document).off("mouseup",p),i(document).off("mousemove",t),!1},u=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,o.pageY-o.data.y)))/150,10)).get(0),[o.data.preview]),!1},f=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",f),i(document).off("mousemove",u),!1},h=function(o){return s.apply(o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,o.pageY-o.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,o.pageX-o.data.pos.left))/150,10)).get(0),[o.data.preview]),!1},m=function(o){return r(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",m),i(document).off("mousemove",h),!1},v=function(o){g(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),i(document).off("mousedown",v))},g=function(o,e,t){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var r=e.parentNode;r&&r!=t;){if(r==o)return!0;r=r.parentNode}return!1},k=function(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},b=function(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},_=function(o){var e=6-o.length;if(0<e){for(var t=[],r=0;r<e;r++)t.push("0");t.push(o),o=t.join("")}return o},x=function(o){return w({r:(o=parseInt(-1<o.indexOf("#")?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o})},w=function(o){var e={h:0,s:0,b:0},t=Math.min(o.r,o.g,o.b),r=Math.max(o.r,o.g,o.b),t=r-t;return e.b=r,e.s=0!=r?255*t/r:0,0!=e.s?o.r==r?e.h=(o.g-o.b)/t:o.g==r?e.h=2+(o.b-o.r)/t:e.h=4+(o.r-o.g)/t:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},y=function(o){var e,t={},r=Math.round(o.h),a=Math.round(255*o.s/100),o=Math.round(255*o.b/100);return 0==a?t.r=t.g=t.b=o:(o=r%60*((e=o)-(a=(255-a)*o/255))/60,(r=360==r?0:r)<60?(t.r=e,t.b=a,t.g=a+o):r<120?(t.g=e,t.b=a,t.r=e-o):r<180?(t.g=e,t.r=a,t.b=a+o):r<240?(t.b=e,t.r=a,t.g=e-o):r<300?(t.b=e,t.g=a,t.r=a+o):r<360?(t.r=e,t.g=a,t.b=e-o):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},C=function(o){var t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return i.each(t,function(o,e){1==e.length&&(t[o]="0"+e)}),t.join("")},M=function(o){return C(y(o))},I={init:function(t){if("string"==typeof(t=i.extend({},o,t||{})).color)t.color=x(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=w(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=k(t.color)}return this.each(function(){var o,e;i(this).data("colorpickerId")||((o=i.extend({},t)).origColor=t.color,e="collorpicker_"+parseInt(1e3*Math.random()),i(this).data("colorpickerId",e),e=i('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",e),o.flat?e.appendTo(this).show():e.appendTo(document.body),o.fields=e.find("input").on("keyup",P).on("change",s).on("blur",N).on("focus",S),e.find("span").on("mousedown",O).end().find(">div.colorpicker_current_color").on("click",B),o.selector=e.find("div.colorpicker_color").on("mousedown",H),o.selectorIndic=o.selector.find("div div"),o.el=this,o.hue=e.find("div.colorpicker_hue div"),e.find("div.colorpicker_hue").on("mousedown",z),o.newColor=e.find("div.colorpicker_new_color"),o.currentColor=e.find("div.colorpicker_current_color"),e.data("colorpicker",o),e.find("div.colorpicker_submit").on("mouseenter",Y).on("mouseleave",j).on("click",T),r(o.color,e.get(0)),a(o.color,e.get(0)),c(o.color,e.get(0)),l(o.color,e.get(0)),n(o.color,e.get(0)),q(o.color,e.get(0)),d(o.color,e.get(0)),o.flat?e.css({position:"relative",display:"block"}):i(this).on(o.eventName,E))})},showPicker:function(){return this.each(function(){i(this).data("colorpickerId")&&E.apply(this)})},hidePicker:function(){return this.each(function(){i(this).data("colorpickerId")&&i("#"+i(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=x(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=w(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=k(e)}return this.each(function(){var o;i(this).data("colorpickerId")&&((o=i("#"+i(this).data("colorpickerId"))).data("colorpicker").color=e,o.data("colorpicker").origColor=e,r(e,o.get(0)),a(e,o.get(0)),c(e,o.get(0)),l(e,o.get(0)),n(e,o.get(0)),q(e,o.get(0)),d(e,o.get(0)))})}};function q(o,e){i(e).data("colorpicker").currentColor.css("backgroundColor","#"+M(o))}function P(o){if(o=o.charCode||o.keyCode||-1,e<o&&o<=90||32==o)return!1;!0===i(this).parent().parent().data("colorpicker").livePreview&&s.apply(this)}function N(o){i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function S(){e=0<this.parentNode.className.indexOf("_hex")?70:65,i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),i(this).parent().addClass("colorpicker_focus")}function O(o){var e=i(this).parent().find("input").focus(),o={el:i(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:o.pageY,field:e,val:parseInt(e.val(),10),preview:i(this).parent().parent().data("colorpicker").livePreview};i(document).on("mouseup",o,p),i(document).on("mousemove",o,t)}function z(o){var e={cal:i(this).parent(),y:i(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,i(document).bind("mouseup",e,f),i(document).on("mousemove",e,u)}function H(o){var e={cal:i(this).parent(),pos:i(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,i(document).on("mouseup",e,m),i(document).on("mousemove",e,h)}function Y(o){i(this).addClass("colorpicker_focus")}function j(o){i(this).removeClass("colorpicker_focus")}function T(o){var e=i(this).parent(),t=e.data("colorpicker").color;q(e.data("colorpicker").origColor=t,e.get(0)),e.data("colorpicker").onSubmit(t,M(t),y(t),e.data("colorpicker").el)}function E(o){var e=i("#"+i(this).data("colorpickerId")),t=(e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]),i(this).offset()),r=(r="CSS1Compat"==document.compatMode,{l:window.pageXOffset||(r?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(r?document.documentElement:document.body).scrollTop,w:window.innerWidth||(r?document.documentElement:document.body).clientWidth,h:window.innerHeight||(r?document.documentElement:document.body).clientHeight}),a=t.top+this.offsetHeight,t=t.left;return r.t+r.h<a+176&&(a-=this.offsetHeight+176),r.l+r.w<t+356&&(t-=356),e.css({left:t+"px",top:a+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),i(document).on("mousedown",{cal:e},v),!1}function B(){var o=i(this).parent(),e=o.data("colorpicker").origColor;o.data("colorpicker").color=e,r(e,o.get(0)),c(e,o.get(0)),a(e,o.get(0)),n(e,o.get(0)),l(e,o.get(0)),d(e,o.get(0))}i.fn.extend({ColorPicker:I.init,ColorPickerHide:I.hidePicker,ColorPickerShow:I.showPicker,ColorPickerSetColor:I.setColor})}(jQuery),function(i){var e,o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(e=65)},r=function(o){var e,t=i(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=e=m(h(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=e=u({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=e=v(f({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),o&&(_(e,t.get(0)),w(e,t.get(0)),x(e,t.get(0))),y(e,t.get(0)),C(e,t.get(0)),I(e,t.get(0)),t.data("colorpicker").onChange.apply(t,[e,k(e),g(e)])},t=function(o){return o.data.field.val(Math.max(0,Math.min(o.data.max,parseInt(o.data.val+o.pageY-o.data.y,10)))),o.data.preview&&r.apply(o.data.field.get(0),[!0]),!1},a=function(o){return r.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),i(document).off("mouseup",a),i(document).off("mousemove",t),!1},c=function(o){return r.apply(o.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,o.pageY-o.data.y)))/150,10)).get(0),[o.data.preview]),!1},n=function(o){return _(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),w(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",n),i(document).off("mousemove",c),!1},l=function(o){return r.apply(o.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,o.pageY-o.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,o.pageX-o.data.pos.left))/150,10)).get(0),[o.data.preview]),!1},d=function(o){return _(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),w(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),i(document).off("mouseup",d),i(document).off("mousemove",l),!1},s=function(o){p(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),i(document).off("mousedown",s))},p=function(o,e,t){if(o==e)return!0;if(o.contains)return o.contains(e);if(o.compareDocumentPosition)return!!(16&o.compareDocumentPosition(e));for(var r=e.parentNode;r&&r!=t;){if(r==o)return!0;r=r.parentNode}return!1},u=function(o){return{h:Math.min(360,Math.max(0,o.h)),s:Math.min(100,Math.max(0,o.s)),b:Math.min(100,Math.max(0,o.b))}},f=function(o){return{r:Math.min(255,Math.max(0,o.r)),g:Math.min(255,Math.max(0,o.g)),b:Math.min(255,Math.max(0,o.b))}},h=function(o){var e=6-o.length;if(0<e){for(var t=[],r=0;r<e;r++)t.push("0");t.push(o),o=t.join("")}return o},m=function(o){return v({r:(o=parseInt(-1<o.indexOf("#")?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o})},v=function(o){var e={h:0,s:0,b:0},t=Math.min(o.r,o.g,o.b),r=Math.max(o.r,o.g,o.b),t=r-t;return e.b=r,e.s=0!=r?255*t/r:0,0!=e.s?o.r==r?e.h=(o.g-o.b)/t:o.g==r?e.h=2+(o.b-o.r)/t:e.h=4+(o.r-o.g)/t:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},g=function(o){var e={},t=Math.round(o.h),r=Math.round(255*o.s/100),a=Math.round(255*o.b/100);return 0==r?e.r=e.g=e.b=a:(a=t%60*((o=a)-(r=(255-r)*a/255))/60,(t=360==t?0:t)<60?(e.r=o,e.b=r,e.g=r+a):t<120?(e.g=o,e.b=r,e.r=o-a):t<180?(e.g=o,e.r=r,e.b=r+a):t<240?(e.b=o,e.r=r,e.g=o-a):t<300?(e.b=o,e.g=r,e.r=r+a):t<360?(e.r=o,e.g=r,e.b=o-a):(e.r=0,e.g=0,e.b=0)),{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},k=function(o){return o=g(o),t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)],i.each(t,function(o,e){1==e.length&&(t[o]="0"+e)}),t.join("");var t},b={init:function(t){if("string"==typeof(t=i.extend({},o,t||{})).color)t.color=m(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=v(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=u(t.color)}return this.each(function(){var o,e;i(this).data("colorpickerId")||((o=i.extend({},t)).origColor=t.color,e="collorpicker_"+parseInt(1e3*Math.random()),i(this).data("colorpickerId",e),e=i('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",e),o.flat?e.appendTo(this).show():e.appendTo(document.body),o.fields=e.find("input").on("keyup",q).on("change",r).on("blur",P).on("focus",N),e.find("span").on("mousedown",S).end().find(">div.colorpicker_current_color").on("click",T),o.selector=e.find("div.colorpicker_color").on("mousedown",z),o.selectorIndic=o.selector.find("div div"),o.el=this,o.hue=e.find("div.colorpicker_hue div"),e.find("div.colorpicker_hue").on("mousedown",O),o.newColor=e.find("div.colorpicker_new_color"),o.currentColor=e.find("div.colorpicker_current_color"),e.data("colorpicker",o),e.find("div.colorpicker_submit").on("mouseenter",H).on("mouseleave",Y).on("click",j),_(o.color,e.get(0)),x(o.color,e.get(0)),w(o.color,e.get(0)),C(o.color,e.get(0)),y(o.color,e.get(0)),M(o.color,e.get(0)),I(o.color,e.get(0)),o.flat?e.css({position:"relative",display:"block"}):i(this).on(o.eventName,E))})},showPicker:function(){return this.each(function(){i(this).data("colorpickerId")&&E.apply(this)})},hidePicker:function(){return this.each(function(){i(this).data("colorpickerId")&&i("#"+i(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=m(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=v(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=u(e)}return this.each(function(){var o;i(this).data("colorpickerId")&&((o=i("#"+i(this).data("colorpickerId"))).data("colorpicker").color=e,_(o.data("colorpicker").origColor=e,o.get(0)),x(e,o.get(0)),w(e,o.get(0)),C(e,o.get(0)),y(e,o.get(0)),M(e,o.get(0)),I(e,o.get(0)))})}};function _(o,e){o=g(o),i(e).data("colorpicker").fields.eq(1).val(o.r).end().eq(2).val(o.g).end().eq(3).val(o.b).end()}function x(o,e){i(e).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()}function w(o,e){i(e).data("colorpicker").fields.eq(0).val(k(o)).end()}function y(o,e){i(e).data("colorpicker").selector.css("backgroundColor","#"+k({h:o.h,s:100,b:100})),i(e).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})}function C(o,e){i(e).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))}function M(o,e){i(e).data("colorpicker").currentColor.css("backgroundColor","#"+k(o))}function I(o,e){i(e).data("colorpicker").newColor.css("backgroundColor","#"+k(o))}function q(o){if(o=o.charCode||o.keyCode||-1,e<o&&o<=90||32==o)return!1;!0===i(this).parent().parent().data("colorpicker").livePreview&&r.apply(this)}function P(o){i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function N(){e=0<this.parentNode.className.indexOf("_hex")?70:65,i(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),i(this).parent().addClass("colorpicker_focus")}function S(o){var e=i(this).parent().find("input").focus(),e={el:i(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:o.pageY,field:e,val:parseInt(e.val(),10),preview:i(this).parent().parent().data("colorpicker").livePreview};i(document).on("mouseup",e,a),i(document).on("mousemove",e,t)}function O(o){var e={cal:i(this).parent(),y:i(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview,i(document).bind("mouseup",e,n),i(document).on("mousemove",e,c)}function z(o){var e={cal:i(this).parent(),pos:i(this).offset()};e.preview=e.cal.data("colorpicker").livePreview,i(document).on("mouseup",e,d),i(document).on("mousemove",e,l)}function H(o){i(this).addClass("colorpicker_focus")}function Y(o){i(this).removeClass("colorpicker_focus")}function j(o){var e=i(this).parent(),t=e.data("colorpicker").color;M(e.data("colorpicker").origColor=t,e.get(0)),e.data("colorpicker").onSubmit(t,k(t),g(t),e.data("colorpicker").el)}function E(o){var e=i("#"+i(this).data("colorpickerId")),t=(e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]),i(this).offset()),r=(r="CSS1Compat"==document.compatMode,{l:window.pageXOffset||(r?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(r?document.documentElement:document.body).scrollTop,w:window.innerWidth||(r?document.documentElement:document.body).clientWidth,h:window.innerHeight||(r?document.documentElement:document.body).clientHeight}),a=t.top+this.offsetHeight,t=t.left;return r.t+r.h<a+176&&(a-=this.offsetHeight+176),r.l+r.w<t+356&&(t-=356),e.css({left:t+"px",top:a+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),i(document).on("mousedown",{cal:e},s),!1}function T(){var o=i(this).parent(),e=o.data("colorpicker").origColor;_(o.data("colorpicker").color=e,o.get(0)),w(e,o.get(0)),x(e,o.get(0)),y(e,o.get(0)),C(e,o.get(0)),I(e,o.get(0))}i.fn.extend({ColorPicker:b.init,ColorPickerHide:b.hidePicker,ColorPickerShow:b.showPicker,ColorPickerSetColor:b.setColor})}(jQuery);