jQuery(function(d){var t,s=d("[data-pinterest-pin-container]");function e(e){void 0!==e&&e.on("select",function(){e.state().get("selection").forEach(function(e){i(e.toJSON())})})}function i(e,t){if(!d("[data-pinterest-image-checkbox='"+e.id+"']").length){var i=d("<div>",{class:"woo-pinterest-image-wrapper"}),a=d("<button>",{class:"check",type:"button",tabindex:"-1"}),n=d("<span>",{class:"media-modal-icon"}),c=d("<span>",{class:"screen-reader-text"}).text("Deselect"),o=d("<input>",{type:"checkbox",name:"woocommerce_pinterest_images[]","data-pinterest-image-checkbox":e.id,value:e.id}),r=d("<img>",{width:150,height:150,src:e.url});a.append(n).append(c),i.append(a).append(r).append(o),s.prepend(i).prepend(" "),void 0!==t&&o.prop("checked",!0).trigger("change")}}d(document).on("change","[data-pinterest-pinned]",function(){d(this).is(":checked")?s.fadeIn(300):s.fadeOut(300)}),d("#set-post-thumbnail").click(function(){e(wp.media.featuredImage.frame())}),d(document).on("click",".add_product_images",function(){e(wp.media.frames.product_gallery)}),d(document).on("click",".woocommerce_variation .upload_image_button",function(){e(wp.media.frames.variable_image)}),d(document).on("click","[data-pinterest-image-toggle-all]",function(){var e=!!+d(this).attr("data-pinterest-image-toggle-all");d("[data-pinterest-image-checkbox]").each(function(){d(this).prop("checked",e),d(this).trigger("change")})}),jQuery("[data-pinterest-custom-image-upload]").on("click",function(e){e.preventDefault(),t||(t=wp.media.frames.file_frame=wp.media({title:"Select a image to pin",button:{text:"Add this image"},multiple:!0})).on("select",function(){t.state().get("selection").models.forEach(function(e){i(e.attributes,!0)})}),t.open()}),d(document).on("click",".woo-pinterest-image-wrapper",function(){var e=d(this).find("[data-pinterest-image-checkbox]");e.prop("checked",!e.prop("checked")).trigger("change")}),d(document).on("change","[data-pinterest-image-checkbox]",function(e){var t=d(this);t.parent(".woo-pinterest-image-wrapper").toggleClass("checked",t.is(":checked"))}),d(document).on("change","[name^=variable_is_pin_description]",function(){"checked"===d(this).attr("checked")?d(this).closest(".woocommerce_variation").find(".show_if_variation_pin_description").show():d(this).closest(".woocommerce_variation").find(".show_if_variation_pin_description").hide()}),d("#woocommerce-pinterest-product-boards-select").selectWoo({width:"auto"}),d(document).on("click","button[data-var]",function(){var e=d(this);!function(e,t){var i=document.querySelector(e);if(!i)return;i.focus();var a=i.value,n=i.selectionStart;i.value=a.slice(0,n)+t+a.slice(n),n+=t.length,i.setSelectionRange(n,n)}(e.data("field"),e.data("var"))})});