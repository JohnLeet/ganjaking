"use strict";(function(){jQuery(document).ready(function(o){var d=o(".wc-address-validation-field"),s=d.find("select"),a=s.parent("p"),l=o(".wc-address-validation-billing-field"),c=o(".wc-address-validation-shipping-field"),_=o('p[id$="_field"], p.create-account').not("#billing_country_field, #shipping_country_field, #billing_first_name_field, #shipping_first_name_field, #billing_last_name_field, #shipping_last_name_field, #billing_company_field, #shipping_company_field"),r=o('p[id^="billing_"][id$="_field"], p.create-account').not("#billing_country_field, #billing_first_name_field, #billing_last_name_field, #billing_company_field"),p=o('p[id^="shipping_"][id$="_field"]').not("#shipping_country_field, #shipping_first_name_field, #shipping_last_name_field, #shipping_company_field"),i=o('select[id$="country"], input[id$="country"]'),n=wc_address_validation_postcode_lookup.countries;return setTimeout(function(){return o("#billing_country_field").after(l),o("#shipping_country_field").after(c)},1),i.on("change",function(i){var e=o(this);if(-1!==o.inArray(o("#billing_country").val(),n)?(l.not(".wc-address-validation-results").show(),setTimeout(function(){return o("#billing_country_field").after(l)},1)):l.hide(),-1!==n.indexOf(o("#shipping_country").val())?(c.not(".wc-address-validation-results").show(),setTimeout(function(){return o("#shipping_country_field").after(c)},1)):c.hide(),wc_address_validation_postcode_lookup.force_postcode_lookup){if(e.is("#billing_country"))return r.delay().queue(function(){return-1!==n.indexOf(o("#billing_country").val())&&""===wc_address_validation_postcode_lookup.billing_postcode?o(this).hide():0===o(this).find('input[type="hidden"].hidden').length&&o(this).show(),o(this).dequeue()});if(e.is("#shipping_country"))return p.delay().queue(function(){return-1!==n.indexOf(o("#shipping_country").val())&&""===wc_address_validation_postcode_lookup.shipping_postcode?o(this).hide():0===o(this).find('input[type="hidden"].hidden').length&&o(this).show(),o(this).dequeue()})}}),i.trigger("change"),o().select2&&d.find("select.wc-address-validation-enhanced-select").select2(),a.hide(),d.keypress(function(i){if(13===i.keyCode)return(d="billing"===o(this).find(".wc-address-validation-address-type").val()?l:c).find("a.button").trigger("click"),!1}),d.on("click","a.button",function(i){var e,n,t;return i.preventDefault(),e=o(this).siblings(".wc-address-validation-address-type").val(),_="billing"===e?r:p,s=(d="billing"===e?l:c).find("select"),!((a=s.parent("p")).is(".processing")||!d.find("input[type=text]").val())&&(a.addClass("processing").block({message:null,overlayCSS:{background:"#fff url( "+wc_address_validation_postcode_lookup.ajax_loader_url+" ) no-repeat center",opacity:.6}}),t={action:"wc_address_validation_lookup_postcode",security:wc_address_validation_postcode_lookup.nonce,postcode:d.find('input[name="wc_address_validation_postcode_lookup_postcode"]').val(),house_number:d.find('input[name="wc_address_validation_postcode_lookup_postcode_house_number"]').val()},"undefined"!=typeof wc_checkout_params?(n=wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","wc_address_validation_lookup_postcode"),delete t.action):n=wc_address_validation_postcode_lookup.ajax_url,o.ajax({type:"GET",url:n,data:t,dataType:"json",success:function(i){var e;if(i)return a.removeClass("processing").unblock(),s.find("option").remove(),a.show(),o(i).map(function(){return o("<option>").val(this.value).text(this.name).data("location",this).appendTo(s)}),e=function(){if(o().select2)return s.trigger("change"),s.select2("open")},!_.is(":visible")&&wc_address_validation_postcode_lookup.force_postcode_lookup&&"none"!==i.value?_.slideDown(null,e):e()}}))}),s.change(function(){var n=o(this).hasClass("billing")?"billing":"shipping",t=o(this).find(":selected").data("location"),i=["company","address_1","address_2","address_3","city","postcode","state"];if("none"!==t.value)return o.each(i,function(i,e){return o("input[name="+n+"_"+e+"]").val(t[e])}),o(document.body).trigger("update_checkout")})})}).call(void 0);