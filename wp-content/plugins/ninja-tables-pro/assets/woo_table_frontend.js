(()=>{function t(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return a(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,a){(null==a||a>t.length)&&(a=t.length);for(var n=0,r=new Array(a);n<a;n++)r[n]=t[n];return r}jQuery(document).ready((function(a){jQuery(document).on("ninja_table_loaded",(function(n,r,e){if("wp_woo"==e.provider){var o=this,i="",c={};r.on("change",".nt_woo_attribute",(function(n){var e=a(this);c={};var u=e.data("product_id"),_=r.find(".nt_add_to_cart_"+u).attr("data-product_variations"),l=r.find(".nt_add_to_cart_"+u).attr("data-variations"),p=JSON.parse(l),s=JSON.parse(_);a(".ntb_attribute_select_"+u).each((function(n,r){var i=[],_=[],l=a(r).data("attribute_name"),s=e.attr("data-id"),f=e.val(),v=a(r).data("id"),h=a("#"+v+"_"+u);if(c[l]=h.val(),p.forEach((function(t,a){var n=t[v].split("_sp_"),r=n[1],e=n[0];_.push(function(t,a,n){return a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}({},v,r)),r?Object.values(t).includes("".concat(e,"_sp_").concat(f))&&(i.push(r),o.variation_id=e):o.variation_id=o.variation_id?o.variation_id:""})),""===f){var y=[];_.forEach((function(t){t[s]&&y.push(t[s])}));var b=t(new Set(y));b.length>0&&v===s&&(b.forEach((function(t){y.push('<option value="'.concat(t,'">').concat(d(t),"</option>"))})),h.html(y),h.prepend('<option value="" selected>Select One</option>'))}else if(i.length>0){var m=t(new Set(i)),g=[];m.forEach((function(t){g.push('<option value="'.concat(t,'">').concat(d(t),"</option>"))})),v!==s&&(h.html(g),h.prepend('<option value="">Select One</option>'),c[l]=h.val()),m.includes(h.val())&&a("#"+v+"_"+u+" option[value="+h.val()+"]").attr("selected",!0)}})),!1===Object.values(c).includes("")?(a(".nt_add_to_cart_"+u).css("opacity","1"),i=u,s.forEach((function(t){if(JSON.stringify(t.attributes)===JSON.stringify(c)&&(o.variation_id=t.variation_id),t.variation_id==o.variation_id)return a(".selected_price_"+u).html(t.price_html),!1}))):(a(".selected_price_"+u).html(""),a(".nt_add_to_cart_"+u).css("opacity",".5"),i="")})),r.on("change",".nt_woo_quantity",(function(t){var n=a(this),e=n.data("product_id");r.find(".nt_add_to_cart_"+e).attr("data-quantity",n.val())})),r.on("click",".single_add_to_cart_button",(function(t){t.preventDefault();var n=a(this),d=n.attr("data-product_id"),u=n.attr("data-product_type");if("variable"===u&&i!=d)return alert("Please select some product options before adding this product to your cart."),!1;c.product_id=d,c.quantity=n.attr("data-quantity"),c.product_type=u,c.variation_id=o.variation_id,c.ninja_table=e.table_id,c.action="ninja_table_wp_woo_add_to_cart",n.parent().addClass("nt_added_cart");var _=n.html();n.append('<span class="fooicon fooicon-loader"></span>'),a.post(window.ninja_footables.ajax_url,c).then((function(t){a(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,n]),r.find("a.added_to_cart.wc-forward").html(""),a("#nt_product_qty_"+d).val(1),a("#nt_product_qty_"+d).trigger("change")})).fail((function(t){})).always((function(){n.html(_)}))}))}function d(t){return t.toLowerCase().replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))}}))}))})();