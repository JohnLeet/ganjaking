/***************************************************
 * REVOLUTION 6.0.0 SCROLLVIDEO ADDON
 * @version: 2.0 (21.09.2020)
 * @author ThemePunch
***************************************************/
(function(a){function b(a,b,c){var d=new XMLHttpRequest;d.open("HEAD",a,!0),d.onreadystatechange=function(){this.readyState==this.DONE&&RVS.F.getBandWidth(a,b,c,parseInt(d.getResponseHeader("Content-Length"))/1024/1024)},d.send()}function c(a){for(var b=atob(a.split(",")[1]),c=[],d=0;d<b.length;d++)c.push(b.charCodeAt(d));return new Blob([new Uint8Array(c)],{type:"image/png"})}async function d(a,b=25,d=.5,e=5){return new Promise(async f=>{e=Math.round(100*e)/100,RVS.PB.canceledProcesses=!1,RVS.PB.currentExtractProcess="videoload";var g=j.preparingvideo,i=document.getElementById("pb_quality_resol").value;g+="<div class=\"div20\"></div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Video File Size :</div>"+e+"MB</div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Video Resolution :</div>"+RVS.PB.forms.video.videoWidth+" x "+RVS.PB.forms.video.videoHeight+"</div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Extracting Size :</div>"+k[i].w+" x "+k[i].h+"</div>",g+="<div class=\"div20\"></div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Frame per Sec :</div>"+b+"</div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Quality :</div>"+d+"</div>",g+="<div class=\"div20\"></div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Processing Time :</div>Approx. "+(Math.round(e/RVS.MByteS)+1)+" sec</div>",g+="<div class=\"div20\"></div>",g+="<div id=\"pb_cancel_process\" class=\"basic_action_button fullbutton\" style=\"width:200px\"><i class=\"material-icons\">cancel</i>Cancel</div>",RVS.F.showWaitAMinute({fadeIn:2,text:"<div id=\"preparing_vidimages\">"+g+"</div>"}),RVS.PB.forms.fa.textContent=j.preparingvideo,RVS.PB.forms.gvs.style.opacity=.25,RVS.PB.forms.gvs.style.pointerEvents="none";var l,m,n,o=document.getElementById("preparing_vidimages"),p=await fetch(a).then(a=>a.blob()),q=document.createElement("video"),r=document.createElement("canvas"),s=r.getContext("2d"),t=1/b;for(q.addEventListener("seeked",async function(){l&&l()}),q.src=URL.createObjectURL(p);(q.duration===1/0||isNaN(q.duration))&&2>q.readyState;)await new Promise(a=>setTimeout(a,1e3)),q.currentTime=1e7*Math.random();let u=Date.now();var[v,w]=[k[i].w,k[i].h];for(r.width=k[i].w,r.height=k[i].h,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal=void 0===RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal?0:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal=void 0===RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal?q.duration:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal,m=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal,n=Math.ceil((RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal-RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal)/t),RVS.PB.currentExtractProcess="extractimages";m<RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal&&!0!=RVS.PB.canceledProcesses;){q.currentTime=m,await new Promise(a=>l=a),s.drawImage(q,0,0,v,w),RVS.PB.frames.push(r.toDataURL("image/jpeg",d)),m+=t;var h=c(RVS.PB.frames[RVS.PB.frames.length-1]),x=Date.now()-u,g=j.buildingframes;x/=RVS.PB.frames.length,x*=n-RVS.PB.frames.length,g+="<div class=\"div20\"></div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Video Resolution :</div>"+RVS.PB.forms.video.videoWidth+" x "+RVS.PB.forms.video.videoHeight+"</div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Extracting Size :</div>"+k[i].w+" x "+k[i].h+"</div>",g+="<div class=\"div20\"></div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Frame per Sec :</div>"+b+"</div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Quality :</div>"+d+"</div>",g+="<div class=\"div20\"></div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Total Frames :</div>"+n+"</div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Current Frame :</div>"+RVS.PB.frames.length+"</div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Frame Size :</div>"+Math.round(h.size/1e3)+"KB</div>",g+="<div class=\"div20\"></div>",g+="<div class=\"vsextrinfo\"><div class=\"vsextrinfo_label\">Time Left :</div>Approx. "+Math.floor(x/1e3)+" sec</div>",g+="<div class=\"div20\"></div>",g+="<div id=\"pb_cancel_process\" class=\"basic_action_button fullbutton\" style=\"width:200px\"><i class=\"material-icons\">cancel</i>Cancel</div>",o.innerHTML=g,RVS.PB.forms.fa.textContent=RVS.PB.frames.length+" of "+n+" Frames"}!0!==RVS.PB.canceledProcesses&&(RVS.PB.currentExtractProcess="callsaveextractedimages"),RVS.F.showWaitAMinute({fadeOut:2}),RVS.PB.savetime=Date.now(),!0!==RVS.PB.canceledProcesses&&RVS.PB.saveFrames(0),f(frames)})}function e(){RVS.DOC.on("click","#pb_cancel_process",function(){RVS.PB.canceledProcesses=!0,RVS.F.showWaitAMinute({fadeOut:2}),setTimeout(function(){"callsaveextractedimages"!==RVS.PB.currentExtractProcess&&RVS.PB.backToBasics(),RVS.PB.currentExtractProcess=""},200)}),RVS.DOC.on("checkSkinnerSet",function(c,a){void 0===a||!0===a.val&&"off"===RVS.SLIDER.settings.layout.spinner.type&&RVS.F.showInfo({content:j.nospinnerset,type:"info",showdelay:0,hidedelay:4,hideon:"",event:""})}),RVS.DOC.on("change","#pb_fps_gen",function(){RVS.PB.updateStartEndFrames()}),RVS.DOC.on("updateStartEndFrames",function(a,b){RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal<RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal&&(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal+.5),RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAt=280*(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal/RVS.PB.forms.video.duration),RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAt=280*(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal/RVS.PB.forms.video.duration),RVS.PB.updateMarkers(),RVS.PB.updateStartEndFrames(b)}),RVS.DOC.on("click",".clearAllFrames",RVS.PB.clearSequences),RVS.DOC.on("click",".generateFrames",function(){RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].mpeg!==void 0&&0<RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].mpeg.length?(RVS.PB.forms.nfa.style.display="none",RVS.PB.forms.genfr.style.display="none",RVS.PB.forms.fa.style.display="block",RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.fps=document.getElementById("pb_fps_gen").value,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.quality=parseFloat(document.getElementById("pb_quality_gen").value),b(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].mpeg,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.fps,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.quality)):RVS.F.showInfo({content:j.nompegavailable,type:"warning",showdelay:0,hidedelay:2,hideon:"",event:""})}),RVS.DOC.on("updatescrollvideovideos",function(c,a){a!==void 0&&!1===a.reset||(RVS.PB.resetAfterLoad=!0),RVS.PB.forms.videoSrc.src=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].mpeg,RVS.PB.forms.video.load()}),RVS.DOC.on("updateModulesByScrollVideo",function(){RVS.PB.updateModuleSettings()}),RVS.DOC.on("updatesliderlayout",function(){RVS.PB.fakeBG!==void 0&&RVS.C.slide[0].appendChild(RVS.PB.fakeBG)})}function f(){var a=document.getElementById("form_slidergeneral_revslider-scrollvideo-addon"),b=document.getElementById("form_slidebg_source"),c=b.getElementsByClassName("collapsable")[0],d=document.createElement("div"),e=document.getElementById("form_slidebg_ssettings");RVS.PB.forms.mainform=document.createElement("div"),RVS.PB.forms.slideform=document.createElement("div"),c.classList.add("notneedifscrollvideoison"),e.classList.add("notneedifscrollvideoison"),d.style.paddingBottom="0px",d.className="collapsable neededifscrollvideosison",RVS.PB.forms.mainform.id="scrollvideo_main_form";var f="<div class=\"form_inner_header\"><i class=\"material-icons\">movie</i>"+j.general+"</div>";for(var g in f+="<div class=\"collapsable\" style=\"display:block !important\">",f+="<longoption><i class=\"material-icons\">movie</i><label_a>"+j.active+"</label_a><input id=\"pb_scrollvideo_allowed\" type=\"checkbox\" data-evt=\"updateModulesByScrollVideo\" class=\"sliderinput easyinit callEvent\"  data-r=\"addOns.revslider-scrollvideo-addon.active\" data-change=\"#slide_bg_type\" data-changeto=\"trans\"  data-changewhen=\"true\" data-hideshow=\".neededifscrollvideosison\" data-showhide=\".notneedifscrollvideoison\"  data-showhidedep=\"false\" value=\"on\"></longoption>",f+="<div class=\"neededifscrollvideosison\">",f+="<div class=\"div20\"></div>",f+="<div id=\"pm_gl_video_source\">",f+="<input style=\"display:none !important\" id=\"sr_bg_mpeg_src\" data-evt=\"updatescrollvideovideos\" class=\"sliderinput easyinit nmarg\" type=\"text\" data-r=\"addOns.revslider-scrollvideo-addon.mpeg\" placeholder=\""+j.mpegsrc+"\"><span class=\"linebreak\"></span>",f+="<label_a>"+j.mpeg+"</label_a><div data-target=\"#sr_bg_mpeg_src\" data-evt=\"updatescrollvideovideos\"  data-rid=\"settings.addOns.revslider-scrollvideo-addon.videoId\" class=\"getVideoFromMediaLibrary basic_action_button longbutton \"><i class=\"material-icons\">style</i>"+j.medialib+"</div>",f+="<label_a></label_a><div data-target=\"#sr_bg_mpeg_src\" data-evt=\"updatescrollvideovideos\"  data-r=\"addOns.revslider-scrollvideo-addon\" class=\"getVideoFromObjectLibrary basic_action_button longbutton sliderinput\"><i class=\"material-icons\">camera_enhance</i>"+j.objlib+"</div>",f+="<div class=\"div10\"></div>",f+="<video id=\"scrollvideo_addon_video\" mute buffer preload>",f+="<source id=\"scrollvideo_addon_video_src\" src=\"\" type=\"video/mp4\">",f+="</video>",f+="<div id=\"pb_vid_control\">",f+="<div id=\"pb_vid_co_frame\"></div>",f+="<div id=\"pb_vid_co_start\"><span class=\"pb_sec\">0s</span></div>",f+="<div id=\"pb_vid_co_end\"><span class=\"pb_sec\">0s</span></div>",f+="<div class=\"div20\"></div>",f+="</div>",f+="<div class=\"pb_slidescroll_based pb_scroll_based\">",f+="<label_a>"+j.startframe+"</label_a><input id=\"sr_bg_mpeg_scroll_startAt\" data-evt=\"updateStartEndFrames\" data-evtparam=\"startAt\" class=\"sliderinput easyinit\" type=\"text\" data-r=\"addOns.revslider-scrollvideo-addon.startAtReal\"><span class=\"linebreak\"></span>",f+="<label_a>"+j.endframe+"</label_a><input id=\"sr_bg_mpeg_scroll_endAt\" data-evt=\"updateStartEndFrames\" data-evtParam=\"endAt\" class=\"sliderinput easyinit\" type=\"text\" data-r=\"addOns.revslider-scrollvideo-addon.endAtReal\"><span class=\"linebreak\"></span>",f+="<label_a>"+j.fps+"</label_a><select id=\"pb_fps_gen\" data-r=\"addOns.revslider-scrollvideo-addon.sequence.fps\" class=\"nosearchbox tos2\"><option value=\"1\">1 fps</option><option value=\"2\">2 fps</option><option value=\"3\">3 fps</option><option value=\"4\">4 fps</option><option value=\"5\">5 fps</option><option value=\"10\">10 fps</option><option value=\"12\">12 fps</option><option value=\"15\">15 fps</option><option value=\"20\">20 fps</option><option value=\"25\">25 fps</option><option value=\"30\">30 fps</option></select>",f+="<label_a>"+j.quality+"</label_a><select id=\"pb_quality_gen\" data-r=\"addOns.revslider-scrollvideo-addon.sequence.quality\" class=\"nosearchbox tos2\"><option value=\"1\">"+j.bestq+"</option><option value=\"0.9\">0.9</option><option value=\"0.8\">0.8</option><option value=\"0.7\">0.7</option><option value=\"0.6\">0.6</option><option selected value=\"0.5\">"+j.optq+"</option><option value=\"0.4\">0.4</option><option value=\"0.3\">0.3</option><option value=\"0.2\">0.2</option><option value=\"0.1\">"+j.minq+"</option></select>",f+="<label_a>"+j.resolution+"</label_a><select id=\"pb_quality_resol\" class=\"nosearchbox tos2 sliderinput easyinit\" data-r=\"addOns.revslider-scrollvideo-addon.res\">",k)f+="<option value=\""+g+"\">"+k[g].p+" ("+k[g].w+"x"+k[g].h+")</option>";f+="</select>",f+="<div class=\"div10\"></div>",f+="</div>",f+="</div>",f+="<div class=\"pb_slidescroll_based pb_scroll_based\">",f+="<div id=\"pb_no_frames_available\"><div style=\"font-weight:800\">"+j.noavailableframes+"</div></div>",f+="<div data-helpkey=\"videoscroll_generate_frame\" id=\"pb_gen_frames\" class=\"generateFrames basic_action_button fullbutton \"><i class=\"material-icons\">fact_check</i>"+j.generateframes+"</div>",f+="<div id=\"pb_frames_available\"></div>",f+="<div class=\"div10\"></div>",f+="<div id=\"pb_loading_options\" style=\"display:none\">",f+="<longoption><i class=\"material-icons\">hourglass_bottom</i><label_a>"+j.keepspinner+"</label_a><input id=\"pb_keep_spinner\" type=\"checkbox\" data-evt=\"checkSkinnerSet\" class=\"sliderinput easyinit callEvent\"  data-r=\"addOns.revslider-scrollvideo-addon.keepspinner\" value=\"off\"></longoption>",f+="<longoption><i class=\"material-icons\">pan_tool</i><label_a>"+j.blockscroll+"</label_a><input id=\"pb_keep_scroll\" type=\"checkbox\" class=\"sliderinput easyinit\"  data-r=\"addOns.revslider-scrollvideo-addon.blockscroll\" value=\"off\"></longoption>",f+="<longoption><i class=\"material-icons\">upgrade</i><label_a>"+j.winoffset+"</label_a><input id=\"pb_winoffset\" type=\"text\" data-min=\"-500\" data-numeric=\"true\" data-max=\"500\" data-allowed=\"%,px\" class=\"sliderinput easyinit\"  data-r=\"addOns.revslider-scrollvideo-addon.winoffset\" ></longoption>",f+="<longoption><i class=\"material-icons\" style=\"transform:scale(1,-1);\">upgrade</i><label_a>"+j.winoffsetend+"</label_a><input id=\"pb_winoffsetend\" type=\"text\" data-min=\"-500\" data-numeric=\"true\" data-max=\"500\" data-allowed=\"%,px\" class=\"sliderinput easyinit\"  data-r=\"addOns.revslider-scrollvideo-addon.winoffsetend\"></longoption>",f+="</div>",f+="<div class=\"div10\"></div>",f+="<div id=\"pb_frames_preview\"></div>",f+="<div id=\"pb_frames_clearall\" style=\"display:none\">",f+="<div class=\"div20\"></div>",f+="<div data-helpkey=\"videoscroll_pb_clear_frames\" id=\"pb_clear_frames\" class=\"clearAllFrames basic_action_button fullbutton \"><i class=\"material-icons\">delete</i>"+j.clearallframes+"</div>",f+="</div>",f+="</div>",f+="</div>",RVS.PB.forms.mainform.innerHTML=f,f="<div class=\"neededifscrollvideosison\">",f+="<longoption id=\"slide_area_pb_info\"><i class=\"material-icons\">movie</i><label_a>"+j.activeglobalplyback+"</label_a><div class=\"fake_on_button\"><div class=\"fake_on_button_inner\"><div class=\"fake_onff_on\">On</div></div></div></longoption>",f+="</div>",RVS.PB.forms.slideform.innerHTML=f,a.append(RVS.PB.forms.mainform),d.append(RVS.PB.forms.slideform),c.parentNode.insertBefore(d,c),RVS.PB.forms.jmainform=jQuery(RVS.PB.forms.mainform),RVS.PB.forms.vfra=document.getElementById("pb_vid_co_frame"),RVS.PB.forms.nfa=document.getElementById("pb_no_frames_available"),RVS.PB.forms.genfr=document.getElementById("pb_gen_frames"),RVS.PB.forms.fa=document.getElementById("pb_frames_available"),RVS.PB.forms.gvs=document.getElementById("pm_gl_video_source"),RVS.PB.forms.preview=document.getElementById("pb_frames_preview"),RVS.PB.forms.clears=document.getElementById("pb_frames_clearall"),RVS.PB.forms.loptions=document.getElementById("pb_loading_options"),RVS.PB.forms.videoSrc=document.getElementById("scrollvideo_addon_video_src"),RVS.PB.forms.video=document.getElementById("scrollvideo_addon_video"),RVS.PB.forms.videoController=jQuery("#pb_vid_control"),RVS.PB.forms.startAt=document.getElementById("pb_vid_co_start"),RVS.PB.forms.endAt=document.getElementById("pb_vid_co_end"),void 0===RVS.PB.forms.gpb&&(RVS.PB.forms.gpb=document.createElement("div"),RVS.PB.forms.gpb.id="global_scrollvideo_double",RVS.PB.forms.gpb.innerHTML="<longoption><i class=\"material-icons\">movie</i><label_a>"+j.activeglobalplyback+"</label_a><div class=\"fake_on_button\"><div class=\"fake_on_button_inner\"><div class=\"fake_onff_on\">On</div></div></div></longoption>",RVS.PB.forms.rslayout=document.getElementById("rs-layout-type"),RVS.PB.forms.rslayout.parentNode.insertBefore(RVS.PB.forms.gpb,RVS.PB.forms.rslayout)),RVS.PB.forms.startAt_txt=RVS.PB.forms.startAt.getElementsByClassName("pb_sec")[0],RVS.PB.forms.endAt_txt=RVS.PB.forms.endAt.getElementsByClassName("pb_sec")[0],RVS.F.updateEasyInputs({container:RVS.PB.forms.jmainform,trigger:"init"}),RVS.F.initOnOff(RVS.PB.forms.mainform),RVS.DOC.trigger("updatescrollvideovideos",{reset:!1}),RVS.PB.draggableMarkers("startAt",function(b){return{b:b>RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAt,to:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAt}}),RVS.PB.draggableMarkers("endAt",function(b){return{b:b<RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAt,to:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAt}}),jQuery(".pb_slidescroll_based .tos2.nosearchbox").select2RS({minimumResultsForSearch:"Infinity",placeholder:"Select From List"}),RVS.PB.videoAndControlVisibility()}function g(){if("undefined"!=typeof HelpGuide&&revslider_scrollvideo_addon.hasOwnProperty("help")){var b={slug:"scrollvideo_addon"};a.extend(!0,b,revslider_scrollvideo_addon.help),HelpGuide.add(b)}}var j=revslider_scrollvideo_addon.bricks,k=[{w:3840,h:2160,p:"2160p"},{w:2560,h:1440,p:"1440p"},{w:1920,h:1080,p:"1080p"},{w:1280,h:720,p:"720p"},{w:1024,h:576,p:"576p"},{w:854,h:480,p:"480p"},{w:640,h:360,p:"360p"},{w:426,h:240,p:"240p"}];RVS.PB={frames:[],sliderDefaults:function(){RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAt=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAt===void 0?0:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAt,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAt=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAt===void 0?280:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAt,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence===void 0?{}:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.first=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.first===void 0?1:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.first,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.last=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.last===void 0?1:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.last,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.fps=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.fps===void 0?0:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.fps,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.dir=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.dir===void 0?"":RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.dir,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].res=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].res===void 0?3:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].res,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].keepspinner=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].keepspinner!==void 0&&RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].keepspinner,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].blockscroll=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].blockscroll!==void 0&&RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].blockscroll,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].winoffset=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].winoffset===void 0?0:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].winoffset,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].winoffsetend=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].winoffsetend===void 0?50:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].winoffsetend,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].ver=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].ver===void 0?Math.round(1e5*Math.random()):RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].ver},initVideoListeners:function(){RVS.PB.forms.video.addEventListener("loadedmetadata",function(){RVS.PB.videoAndControlVisibility(),RVS.PB.resetAfterLoad&&(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAt=0,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAt=280,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal=0,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal=RVS.PB.forms.video.duration),RVS.PB.approxToGenerate(),RVS.PB.resetAfterLoad=!1,RVS.PB.updateMarkersText(),RVS.PB.updateMarkers(),RVS.PB.forms.video.muted=!0,RVS.PB.forms.video.currentTime=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal,RVS.PB.updateLayerGridBg(),RVS.F.updateEasyInputs({container:RVS.PB.forms.jmainform,trigger:"init"})}),RVS.PB.forms.video.addEventListener("click",function(){RVS.PB.forms.video.paused?RVS.PB.forms.video.play():RVS.PB.forms.video.pause()})},getSec:function(a,b){if(void 0!==RVS.PB.forms.video.duration&&0<RVS.PB.forms.video.duration){var c=Math.round(100*(RVS.PB.forms.video.duration*(a/280)))/100,d=RVS.PB.forms.video.currentTime;RVS.PB.forms.video.currentTime=c;var e=RVS.PB.forms.video.currentTime;return RVS.PB.forms.video.currentTime=d,2===b?Math.round(100*e)/100:e}return 0},secToPx:function(a){return Math.round(280*(a/RVS.PB.forms.video.duration))},updateVideoPos:function(a,b,c){(b===void 0||0<=(""+b).indexOf(":"))&&(b=140),a!==void 0&&null!==a&&0<a.duration&&requestAnimationFrame(function(){a.currentTime=c===void 0?Math.round(100*(a.duration*(b/280)))/100:c})},updateSelectedFrame:function(a,b){b===void 0&&(b=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"][a]);var c="startAt"===a?b:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAt,d="endAt"===a?b:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAt;RVS.PB.forms.vfra.style.left=c+"px",RVS.PB.forms.vfra.style.width=d-c+"px"},updateMarkers:function(){RVS.PB.forms.startAt.style.left=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAt+"px",RVS.PB.forms.endAt.style.left=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAt+"px",RVS.PB.updateSelectedFrame()},updateMarkersText:function(){RVS.PB.forms.startAt_txt.textContent=RVS.PB.getSec(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAt,2),RVS.PB.forms.endAt_txt.textContent=RVS.PB.getSec(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAt,2)},convertToJpgName:function(b,c,d){return b=""+b,c=""+c,d=""+d,b=1==b.length?"00"+b:2==b.length?"0"+b:b,c=1==c.length?"0"+c:c,d=1==d.length?"0"+d:d,b=b+"_f"+c+"_q"+d+".jpg",b},updateModuleSettings:function(){if(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].active){for(var a in RVS.SLIDER.slideIDs)RVS.SLIDER.slideIDs.hasOwnProperty(a)&&(RVS.SLIDER[RVS.SLIDER.slideIDs[a]].slide.bg.type="trans");RVS.PB.frames===void 0||0==RVS.PB.frames.length?RVS.F.ajaxRequest("get_frames",{slider:RVS.SLIDER.id},function(a){if(a.success&&a.data.sequence_ok&&"000"!==a.data.last&&""!==a.data.f){RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.last=parseInt(a.data.last),RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.dir=a.data.folder,RVS.PB.frames=[],RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.fps=parseInt(a.data.f),RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.quality=parseInt(a.data.q)/10;for(var b=1;b<=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.last;b++)RVS.PB.frames.push(a.data.folder+"/"+RVS.PB.convertToJpgName(b,a.data.f,a.data.q));RVS.PB.showSequences()}}):RVS.PB.forms.gvs.style.display="none",RVS.SLIDER.settings.type="hero",RVS.SLIDER.settings.scrolltimeline.set=!0,RVS.SLIDER.settings.scrolltimeline.fixed=!0,RVS.DOC.trigger("checkOnScrollSettings"),RVS.F.updateEasyInputs({container:jQuery("#form_module_scroll"),trigger:"init"}),RVS.F.updateEasyInputs({container:jQuery("#form_slider_layout_layout"),trigger:"init"}),RVS.PB.forms.gpb.style.display="block",jQuery("#rs-layout-type").hide()}else RVS.PB.forms.gpb.style.display="none",jQuery("#rs-layout-type").show();RVS.PB.updateLayerGridBg()},updateLayerGridBg:function(){requestAnimationFrame(function(){if(!RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].active)void 0!==RVS.PB.fakeBG&&(RVS.PB.fakeBG.style.display="none");else if(void 0!==RVS.PB.frames&&0<RVS.PB.frames.length&&void 0!==RVS.C.layergrid){void 0===RVS.PB.fakeBG&&(RVS.PB.fakeBG=document.createElement("div"),RVS.PB.fakeBG.id="videoscroll_fake_bg",RVS.PB.fakeBG.style.backgroundSize="cover",RVS.PB.fakeBG.style.backgroundPosition="center center",RVS.PB.fakeBG.style.backgroundRepeat="no-repeat",RVS.PB.fakeBG.style.width="100%",RVS.PB.fakeBG.style.height="100%",RVS.PB.fakeBG.style.position="absolute",RVS.PB.fakeBG.style.top="0px",RVS.PB.fakeBG.style.left="0px",RVS.PB.fakeBG.style.zIndex=2,RVS.PB.fakeBG.style.pointerEvents="none",RVS.C.slide[0].appendChild(RVS.PB.fakeBG)),RVS.PB.fakeBG.style.display="block";var a="url("+RVS.PB.frames[0]+(0<=RVS.PB.frames[0].indexOf("data:")?"":"?ver="+RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].ver)+")";RVS.PB.fakeBG.style.backgroundImage=a}})},showSequences:function(){RVS.PB.forms.preview.innerHTML="",RVS.PB.forms.fa.style.display="block",RVS.PB.forms.nfa.style.display="none",RVS.PB.forms.genfr.style.display="none",RVS.PB.forms.gvs.style.opacity=1,RVS.PB.forms.gvs.style.pointerEvents="auto",RVS.PB.forms.gvs.style.display="none",RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.last=RVS.PB.frames.length,RVS.PB.forms.clears.style.display="block",RVS.PB.forms.loptions.style.display="block",RVS.PB.forms.fa.textContent=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.last+" Frames - "+RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.fps+" FPS - "+(.5==RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.quality?"Optimal":1==RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.quality?"Best":RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.quality)+" Quality";var c=Math.min(16,RVS.PB.frames.length),d=16<RVS.PB.frames.length?8:0;c=8==d?8:c,8==d&&(RVS.PB.forms.preview.innerHTML+="<label_a style=\"text-align:left\">First Frames</label_a><span class=\"linebreak\"></span>");for(var e,f=0;f<c;f++)e=new Image,e.src=0<=RVS.PB.frames[f].indexOf("data:")?RVS.PB.frames[f]:RVS.PB.frames[f]+"?ver="+RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].ver,RVS.PB.forms.preview.append(e);if(8==d)for(RVS.PB.forms.preview.innerHTML+="<div class=\"div10\"></div><label_a style=\"text-align:left\">Last Frames</label_a><span class=\"linebreak\"></span>",d=RVS.PB.frames.length-1,f=0;f<c;f++){var e=new Image;e.src=0<=RVS.PB.frames[d-f].indexOf("data:")?RVS.PB.frames[d-f]:RVS.PB.frames[d-f]+"?ver="+RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].ver,RVS.PB.forms.preview.append(e)}RVS.PB.updateLayerGridBg()},backToBasics:function(){RVS.PB.forms.gvs.style.opacity=1,RVS.PB.forms.gvs.style.pointerEvents="auto",RVS.PB.forms.clears.style.display="none",RVS.PB.forms.loptions.style.display="none",RVS.PB.forms.fa.style.display="none",RVS.PB.forms.nfa.style.display="block",RVS.PB.forms.genfr.style.display="block",RVS.PB.forms.gvs.style.display="block",RVS.PB.frames=[],RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.last=1,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.dir="",RVS.PB.forms.preview.innerHTML="",RVS.PB.forms.fa.textContent=""},clearSequences:function(){RVS.F.RSDialog.create({bgopacity:.85,modalid:"rbm_decisionModal",icon:"delete",title:j.clearallframestitle,maintext:j.clearallframesmain+"?",subtext:j.clearallframessub,do:{icon:"delete",text:j.yesclearit,callback:function(){RVS.F.ajaxRequest("clear_frames",{slider:RVS.SLIDER.id},function(a){a.success&&RVS.PB.backToBasics()})}},cancel:{icon:"cancel",text:RVS_LANG.cancel},swapbuttons:!0})},saveFrames:function(a){if((void 0===a||0===a)&&(a=0,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].ver=Math.round(1e5*Math.random())),void 0!==RVS.PB.frames[a]&&a<RVS.PB.frames.length&&!0!==RVS.PB.canceledProcesses){RVS.PB.forms.fa.textContent=j.savingframes+": "+(a+1)+" of "+RVS.PB.frames.length;var b=Date.now()-RVS.PB.savetime;b/=a,b*=RVS.PB.frames.length-a,RVS.F.ajaxRequest("save_frame",{slider:RVS.SLIDER.id,bitmap:RVS.PB.frames[a],file:a+1,f:parseInt(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.fps),q:10*parseFloat(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.quality)},function(b){a++,b.success?RVS.PB.saveFrames(a):RVS.PB.forms.fa.textContent=b.message},void 0,void 0,j.savingframes+"<div class=\"div20\"></div><div style=\"font-size:15px; line-height:20px;\">"+(a+1)+" Frame of "+RVS.PB.frames.length+" Frames</div><div class=\"div5\"></div><div style=\"font-size:15px; line-height:20px;\">Time Left (Approx.) "+Math.floor(b/1e3)+" sec</div><div class=\"div20\"></div><div id=\"pb_cancel_process\" class=\"basic_action_button fullbutton\" style=\"width:200px\"><i class=\"material-icons\">cancel</i>Cancel</div>",!0)}else RVS.F.ajaxRequest("get_frames",{slider:RVS.SLIDER.id},function(a){a.success?(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.dir=a.data.folder,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].sequence.last=parseInt(a.data.last),RVS.PB.showSequences(),RVS.F.showInfo({content:j.hasbeengenerated,type:"success",showdelay:0,hidedelay:2,hideon:"",event:""}),!0!==RVS.PB.canceledProcesses&&RVS.DOC.trigger("saveslider")):(RVS.PB.backToBasics(),RVS.F.showInfo({content:j.hasbeennotgenerated,type:"warning",showdelay:0,hidedelay:2,hideon:"",event:""}))})},approxToGenerate:function(){var a="Unknown";RVS.PB.forms.video.duration!==void 0&&0<RVS.PB.forms.video.duration&&(RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal===void 0?0:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal===void 0?RVS.PB.forms.video.duration:RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal,a=Math.round((RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].endAtReal-RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].startAtReal)/(1/document.getElementById("pb_fps_gen").value))),RVS.PB.forms.nfa.innerHTML="Video Resolution "+RVS.PB.forms.video.videoWidth+" x "+RVS.PB.forms.video.videoHeight+"<div style=\"font-weight:800\">"+j.noavailableframes+"</div>"+j.approx+" "+a+" "+j.tobegenerate},videoAndControlVisibility:function(){RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].mpeg===void 0||0==RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].mpeg.length?(RVS.PB.forms.video.style.display="none",RVS.PB.forms.videoController[0].style.display="none"):(RVS.PB.forms.video.style.display="",RVS.PB.forms.videoController[0].style.display="")},draggableMarkers:function(b,c){jQuery(RVS.PB.forms[b]).draggable({axis:"x",containment:"parent",start:function(){RVS.PB.forms.ignoreMouseMove=!0,RVS.PB.forms.video.pause()},drag:function(d,e){var a=c(e.position.left);a.b&&(e.position.left=a.to,e.helper[0].offsetLeft=e.position.left,e.helper[0].style.left=e.position.left+"px"),RVS.PB.updateStartEndPos(b,e.position.left),RVS.PB.updateSelectedFrame(b,e.position.left)},stop:function(c,d){RVS.PB.forms.ignoreMouseMove=!1,RVS.PB.updateStartEndPos(b,d.position.left),RVS.PB.updateMarkersText(),RVS.PB.updateMarkers(),RVS.PB.updateLayerGridBg()}})},updateStartEndPos:function(a,b){b===void 0&&(b=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"][a]),RVS.PB.forms[a+"_txt"].textContent=RVS.PB.getSec(b,2),RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"][a]=b,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"][a+"Real"]=RVS.PB.getSec(b),RVS.PB.updateVideoPos(RVS.PB.forms.video,b,RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"][a+"Real"]),document.getElementById("sr_bg_mpeg_scroll_"+a).value=RVS.PB.forms[a+"_txt"].textContent,RVS.PB.approxToGenerate(),RVS.PB.forms[a].classList.add("infocus"),RVS.PB.forms["startAt"===a?"endAt":"startAt"].classList.remove("infocus")},updateStartEndFrames:function(a){(a===void 0||"startAt"===a)&&RVS.PB.updateStartEndPos("startAt"),(a===void 0||"endAt"===a)&&RVS.PB.updateStartEndPos("endAt"),RVS.PB.updateMarkersText()}},RVS.DOC=RVS.DOC===void 0?a(document):RVS.DOC,RVS.DOC.on("revslider-scrollvideo-addon_init",function(){RVS.PB.isActive=RVS.SLIDER.settings.addOns["revslider-scrollvideo-addon"].enable,RVS.PB.isActive&&RVS.PB.sliderDefaults(),!RVS.PB.initialised&&RVS.PB.isActive&&(e(),RVS.F.addOnContainer.create({slug:"revslider-scrollvideo-addon",icon:"movie",title:j.scrollvideo,alias:j.scrollvideo,slider:!0,slide:!1,layer:!1}),RVS.PB.forms={slidergeneral:a("#form_slidergeneral_revslider-scrollvideo-addon"),slidegeneral:a("#form_slidegeneral_revslider-scrollvideo-addon"),layergeneral:a("#form_layerinner_revslider-scrollvideo-addon"),module:a("#form_module_revslider-scrollvideo-addon"),layer:a("#form_layer_revslider-scrollvideo-addon"),slide:a("#form_slide_revslider-scrollvideo-addon")},f(),RVS.PB.updateModuleSettings(),RVS.PB.initVideoListeners(),g(),RVS.PB.initialised=!0),RVS.PB.isActive?(a("body").addClass("scrollvideo-addon-active"),punchgs.TweenLite.set("#gst_sl_revslider-scrollvideo-addon",{display:"inline-block"}),"undefined"!=typeof HelpGuide&&HelpGuide.activate("scrollvideo_addon")):(a("body").removeClass("scrollvideo-addon-active"),punchgs.TweenLite.set(RVS.PB.forms.slide,{display:"none"}),a(RVS.PB.forms.slide).removeClass("selected"),RVS.PB.forms.module.addClass("collapsed"),RVS.PB.forms.layer.addClass("collapsed"),RVS.PB.forms.slide.addClass("collapsed"),"undefined"!=typeof HelpGuide&&HelpGuide.deactivate("scrollvideo_addon"))}),RVS.F.getBandWidth=function(a,b=25,c=.5,e=5){var f,g,h,i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(g=new Date().getTime(),h=i.responseText.length,RVS.MByteS=8*h/((g-f)/1e3)/1024/1024,a!==void 0&&b!==void 0&&d(a,b,c,e))},f=new Date().getTime(),RVS.S.defaultMainPNG===void 0&&(RVS.S.defaultMainPNG=jQuery(".slotwrapper_prev .defaultimg").css("backgroundImage"));var j=RVS.S.defaultMainPNG.replace("url(\"","");j=j.replace("\")",""),j=j.replace("light_pattern_2x","UI-ICONS_bg"),j+="?ver="+Math.round(1e3*Math.random()),i.open("GET",j,!0),i.send()}})(jQuery);