/*! WooCommerce Mix and Match Products 2.1.2 2022-08-31 15:30 */
jQuery(function(i){var t=i("#woocommerce-order-items"),a=!1,_={handle_events:function(){t.on("click","button.configure_container",{action:"configure"},this.clicked_edit_button).on("click","button.edit_container",{action:"edit"},this.clicked_edit_button),i("body").on("wc-mnm-initializing",function(e,n){n.$mnm_button=i("#btn-ok")})},clicked_edit_button:function(t){t.preventDefault();var o=i(this).closest("tr.item").attr("data-order_item_id");i.ajax({url:woocommerce_admin_meta_boxes.ajax_url,type:"POST",data:{action:"woocommerce_configure_container_order_item",item_id:o,dataType:"json",order_id:woocommerce_admin_meta_boxes.post_id,security:wc_mnm_admin_order_params.edit_container_nonce},success:function(e){var n;e.success?(n=i.WCBackboneModal.View.extend({addButton:_.clicked_done_button}),(a=new n({target:"wc-modal-edit-container",string:{action:"configure"===t.data.action?wc_mnm_admin_order_params.i18n_configure:wc_mnm_admin_order_params.i18n_edit,item_id:o}})).$el.find("article").html(e.data),a.$el.find(".mnm_form").each(function(){i(this).wc_mnm_form()})):window.alert(e.data)},fail:function(){window.alert(wc_mnm_admin_order_params.i18n_form_error)}})},clicked_done_button:function(n){_.block(a.$el.find(".wc-backbone-modal-content"));var e=i.extend(a.getFormData(),_.get_taxable_address(),{action:"woocommerce_edit_container_in_order",item_id:a._string.item_id,dataType:"json",order_id:woocommerce_admin_meta_boxes.post_id,security:wc_mnm_admin_order_params.edit_container_nonce});i.ajax({url:woocommerce_admin_meta_boxes.ajax_url,type:"POST",data:e,success:function(e){e.success?(t.find(".inside").empty(),t.find(".inside").append(e.data.html),t.trigger("wc_order_items_reloaded"),e.data.notes_html&&(i("ul.order_notes").empty(),i("ul.order_notes").append(i(e.data.notes_html).find("li"))),_.unblock(a.$el.find(".wc-backbone-modal-content")),_.block(t,{fadeIn:0}),setTimeout(function(){_.unblock(t)},250),a.closeButton(n)):(window.alert(e.data),_.unblock(a.$el.find(".wc-backbone-modal-content")))},fail:function(){window.alert(wc_mnm_admin_order_params.i18n_form_error)}})},get_taxable_address:function(){var e="",n="",t="",o="";return"shipping"===woocommerce_admin_meta_boxes.tax_based_on&&(e=i("#_shipping_country").val(),n=i("#_shipping_state").val(),t=i("#_shipping_postcode").val(),o=i("#_shipping_city").val()),"billing"!==woocommerce_admin_meta_boxes.tax_based_on&&e||(e=i("#_billing_country").val(),n=i("#_billing_state").val(),t=i("#_billing_postcode").val(),o=i("#_billing_city").val()),{country:e,state:n,postcode:t,city:o}},block:function(e,n){n=i.extend({},{message:null,overlayCSS:{background:"#fff",opacity:.6}},n||{});e.block(n)},unblock:function(e){e.unblock()}};_.handle_events()});