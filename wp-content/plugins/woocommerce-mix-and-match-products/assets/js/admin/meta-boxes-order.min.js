/*! WooCommerce Mix and Match Products 2.3.1 2023-01-19 16:05 */
jQuery(function(i){var o=i("#woocommerce-order-items"),a=!1,_={handle_events:function(){o.on("click","button.configure_container",{action:"configure"},this.clicked_edit_button).on("click","button.edit_container",{action:"edit"},this.clicked_edit_button),i("body").on("wc-mnm-initializing",function(e,n){n.$mnm_button=i("#btn-ok"),n.$mnm_form.data("source","metabox"),n.$mnm_price.after(n.$mnm_reset)})},clicked_edit_button:function(t){t.preventDefault();var e=i(t.target),o=e.data("order_item_id"),e=e.data("container_id");i.ajax({url:woocommerce_admin_meta_boxes.ajax_url,type:"POST",data:{action:"woocommerce_mnm_get_edit_container_order_item_form",item_id:o,dataType:"json",order_id:woocommerce_admin_meta_boxes.post_id,container_id:e,security:wc_mnm_admin_order_params.edit_container_nonce,source:"metabox"},success:function(e){var n;e.success&&e.data?(n=i.WCBackboneModal.View.extend({addButton:_.clicked_done_button}),a=new n({target:"wc-modal-edit-container",string:{action:"configure"===t.data.action?wc_mnm_admin_order_params.i18n_configure:wc_mnm_admin_order_params.i18n_edit,item_id:o}}),"undefined"!=typeof e.data["div.wc-mnm-edit-container"]&&(a.$el.find("article").html(e.data["div.wc-mnm-edit-container"]),a.$el.find("form").each(function(){var e=i(this).data("product_type")||"mix-and-match";i(this).trigger("wc-mnm-initialize."+e).data("source","metabox")}))):window.alert(e.data)},fail:function(){window.alert(wc_mnm_admin_order_params.i18n_form_error)}})},clicked_done_button:function(n){_.block(a.$el.find(".wc-backbone-modal-content"));var e=a.$el.find(".mnm_form").wc_get_mnm_script(),t=i(document).triggerHandler("wc_mnm_update_container_order_item_data",[e])||{},e=i.extend(_.get_taxable_address(),{action:"woocommerce_mnm_update_container_order_item",item_id:a._string.item_id,dataType:"json",order_id:woocommerce_admin_meta_boxes.post_id,security:wc_mnm_admin_order_params.edit_container_nonce,config:void 0!==e?e.api.get_container_config():[],source:"metabox"},t);i.ajax({url:woocommerce_admin_meta_boxes.ajax_url,type:"POST",data:e,success:function(e){e.success?("undefined"!=typeof e.data.html&&(o.find(".inside").empty(),o.find(".inside").append(e.data.html),o.trigger("wc_order_items_reloaded")),"undefined"!=typeof e.data.notes_html&&(i("ul.order_notes").empty(),i("ul.order_notes").append(i(e.data.notes_html).find("li"))),_.unblock(a.$el.find(".wc-backbone-modal-content")),_.block(o,{fadeIn:0}),setTimeout(function(){_.unblock(o)},250),a.closeButton(n)):(window.alert(e.data),_.unblock(a.$el.find(".wc-backbone-modal-content")))},fail:function(){window.alert(wc_mnm_admin_order_params.i18n_form_error)}})},get_taxable_address:function(){var e="",n="",t="",o="";return"shipping"===woocommerce_admin_meta_boxes.tax_based_on&&(e=i("#_shipping_country").val(),n=i("#_shipping_state").val(),t=i("#_shipping_postcode").val(),o=i("#_shipping_city").val()),"billing"!==woocommerce_admin_meta_boxes.tax_based_on&&e||(e=i("#_billing_country").val(),n=i("#_billing_state").val(),t=i("#_billing_postcode").val(),o=i("#_billing_city").val()),{country:e,state:n,postcode:t,city:o}},block:function(e,n){n=i.extend({},{message:null,overlayCSS:{background:"#fff",opacity:.6}},n||{});e.block(n)},unblock:function(e){e.unblock()}};_.handle_events()});