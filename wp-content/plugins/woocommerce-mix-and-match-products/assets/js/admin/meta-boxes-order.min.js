/*! WooCommerce Mix and Match Products 2.2.1 2022-10-24 20:33 */
jQuery(function(i){var t=i("#woocommerce-order-items"),a=!1,_={handle_events:function(){t.on("click","button.configure_container",{action:"configure"},this.clicked_edit_button).on("click","button.edit_container",{action:"edit"},this.clicked_edit_button),i("body").on("wc-mnm-initializing",function(n,e){e.$mnm_button=i("#btn-ok")})},clicked_edit_button:function(t){t.preventDefault();var o=i(this).closest("tr.item").attr("data-order_item_id");i.ajax({url:wc_mnm_admin_order_params.wc_ajax_url.toString().replace("%%endpoint%%","mnm_get_edit_container_order_item_form"),type:"POST",data:{item_id:o,dataType:"json",order_id:woocommerce_admin_meta_boxes.post_id,security:wc_mnm_admin_order_params.edit_container_nonce,context:"metabox"},success:function(n){var e;n.success&&n.data?(e=i.WCBackboneModal.View.extend({addButton:_.clicked_done_button}),a=new e({target:"wc-modal-edit-container",string:{action:"configure"===t.data.action?wc_mnm_admin_order_params.i18n_configure:wc_mnm_admin_order_params.i18n_edit,item_id:o}}),"undefined"!=typeof n.data["div.wc-mnm-edit-container"]&&(a.$el.find("article").html(n.data["div.wc-mnm-edit-container"]),a.$el.find(".mnm_form").each(function(){i(this).wc_mnm_form()}))):window.alert(n.data)},fail:function(){window.alert(wc_mnm_admin_order_params.i18n_form_error)}})},clicked_done_button:function(e){_.block(a.$el.find(".wc-backbone-modal-content"));var n=a.$el.find(".mnm_form").wc_get_mnm_script(),n=i.extend(_.get_taxable_address(),{action:"woocommerce_edit_container_in_order",item_id:a._string.item_id,dataType:"json",order_id:woocommerce_admin_meta_boxes.post_id,security:wc_mnm_admin_order_params.edit_container_nonce,config:void 0!==n?n.api.get_container_config():[],context:"metabox"});i.ajax({url:wc_mnm_admin_order_params.wc_ajax_url.toString().replace("%%endpoint%%","mnm_update_container_order_item"),type:"POST",data:n,success:function(n){n.success?("undefined"!=typeof n.data.html&&(t.find(".inside").empty(),t.find(".inside").append(n.data.html),t.trigger("wc_order_items_reloaded")),"undefined"!=typeof n.data.notes_html&&(i("ul.order_notes").empty(),i("ul.order_notes").append(i(n.data.notes_html).find("li"))),_.unblock(a.$el.find(".wc-backbone-modal-content")),_.block(t,{fadeIn:0}),setTimeout(function(){_.unblock(t)},250),a.closeButton(e)):(window.alert(n.data),_.unblock(a.$el.find(".wc-backbone-modal-content")))},fail:function(){window.alert(wc_mnm_admin_order_params.i18n_form_error)}})},get_taxable_address:function(){var n="",e="",t="",o="";return"shipping"===woocommerce_admin_meta_boxes.tax_based_on&&(n=i("#_shipping_country").val(),e=i("#_shipping_state").val(),t=i("#_shipping_postcode").val(),o=i("#_shipping_city").val()),"billing"!==woocommerce_admin_meta_boxes.tax_based_on&&n||(n=i("#_billing_country").val(),e=i("#_billing_state").val(),t=i("#_billing_postcode").val(),o=i("#_billing_city").val()),{country:n,state:e,postcode:t,city:o}},block:function(n,e){e=i.extend({},{message:null,overlayCSS:{background:"#fff",opacity:.6}},e||{});n.block(e)},unblock:function(n){n.unblock()}};_.handle_events()});