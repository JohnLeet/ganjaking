/*! WooCommerce Mix and Match Products 2.4.3 2023-03-02 15:45 */
!function(h){var i;"undefined"!=typeof wcsatt_single_product_params&&(i=function(i){var d=this,m=i.$mnm_form.data("satt_script");this.initialize_ui=function(){0<m.schemes_view.$el_content.length&&(!1!==i.$addons_totals?i.$addons_totals:i.$mnm_price).after(m.schemes_view.$el_content)},this.initialize_schemes=function(){i.satt_schemes=[],i.satt_scheme_one_time=!1;var e=m.schemes_view.$el_option_items.filter(".one-time-option");e.length&&(i.satt_scheme_one_time={$el:e,data:e.find("input").data("custom_data")}),m.schemes_view.$el_option_items.filter(".subscription-option").each(function(){var e=h(this),t=e.find("input").data("custom_data");i.satt_schemes.push({$el:e,data:t})})},this.integrate=function(){m.schemes_view.has_schemes()&&(d.initialize_ui(),d.initialize_schemes(),0<i.satt_schemes.length)&&(i.$mnm_form.on("wc-mnm-form-updated",d.update_subscription_totals),"no"!==i.price_data.hide_total_on_validation_fail)&&i.$mnm_data.on("wc-mnm-validation-status-changed",d.maybe_hide_subscription_options)},this.has_single_forced_subscription=function(){return 1===i.satt_schemes.length&&!1===i.satt_scheme_one_time},this.maybe_hide_subscription_options=function(){i.passes_validation()?d.has_single_forced_subscription()||m.schemes_view.$el_content.slideDown(200):m.schemes_view.$el_content.slideUp(200)},this.update_subscription_totals=function(e,_){var r,p,t,i;!_.passes_validation()&&"no"!==_.price_data.hide_total_on_validation_fail||(r=_.get_price_html(),p=h(r).html(),!1!==_.satt_scheme_one_time&&_.api.is_priced_per_product()&&(t=_.satt_scheme_one_time.$el.find(".price.one-time-price"),i=_.satt_scheme_one_time.data.option_details_html.replace(/%p/g,p),t.length&&t.html(i).find("span.total").remove(),m.schemes_view.has_prompt("radio")||m.schemes_view.has_prompt("checkbox"))&&0<(i=m.schemes_view.$el_prompt.find('.wcsatt-options-prompt-action-input[value="no"]').closest(".wcsatt-options-prompt-label").find(".wcsatt-options-prompt-action")).find(".price").length&&i.html(_.satt_scheme_one_time.data.prompt_details_html.replace(/%p/g,p)).find("span.total").remove(),d.has_single_forced_subscription()?_.$mnm_price.find(".price").html(_.satt_schemes[0].data.option_details_html.replace(/%p/g,p)):_.api.is_priced_per_product()&&h.each(_.satt_schemes,function(e,i){var s,t,a,o,c,n;(i.data.option_has_price||m.schemes_view.has_prompt("radio")||m.schemes_view.has_prompt("checkbox"))&&(s=h.extend(!0,{},_.price_data),t=r,n=p,i.data.subscription_scheme.has_price_filter&&("inherit"===i.data.subscription_scheme.pricing_mode&&0<i.data.subscription_scheme.discount?(h.each(_.api.get_container_config("v2"),function(e,t){t=t.product_id;i.data.discount_from_regular?s.prices[t]=s.regular_prices[t]*(1-i.data.subscription_scheme.discount/100):s.prices[t]=s.prices[t]*(1-i.data.subscription_scheme.discount/100),s.hasOwnProperty("addons_prices")&&(s.addons_prices[t]=s.addons_prices[t]*(1-i.data.subscription_scheme.discount/100))}),i.data.discount_from_regular?s.base_price=s.base_regular_price*(1-i.data.subscription_scheme.discount/100):s.base_price=s.base_price*(1-i.data.subscription_scheme.discount/100),s.addons_regular_price=(_.has_addons()&&m.pao.$discount_addons_data.data("discount_addons"),0),s.addons_price=_.has_addons()&&"yes"===m.pao.$discount_addons_data.data("discount_addons")?0*(1-i.data.subscription_scheme.discount/100):0):"override"===i.data.subscription_scheme.pricing_mode&&(s.base_regular_price=Number(i.data.subscription_scheme.regular_price),s.base_price=Number(i.data.subscription_scheme.price)),s=_.calculate_subtotals(!1,s),s=_.calculate_totals(s),t=_.get_price_html(s),n=h(t).html()),a=i.$el.find(".subscription-price"),c=i.data.option_details_html.replace(/%p/g,n),i.data.subscription_scheme.is_base&&(m.schemes_view.has_prompt("radio")||m.schemes_view.has_prompt("checkbox"))&&0<(o=m.schemes_view.$el_prompt.find('.wcsatt-options-prompt-action-input[value="yes"]').closest(".wcsatt-options-prompt-label").find(".wcsatt-options-prompt-action")).find(".subscription-price").length&&o.html(i.data.prompt_details_html.replace(/%p/g,n)).find("span.total").remove(),i.data.option_has_price&&(a.html(c).find("span.total").remove(),m.schemes_view.has_dropdown())&&(n=wc_mnm_price_format(s.totals.price,{html:!1}),o="",n=i.data.dropdown_format.replace("%p",n),i.data.subscription_scheme.has_price_filter&&("inherit"===i.data.subscription_scheme.pricing_mode&&0<i.data.subscription_scheme.discount?(o=m.round_number(i.data.subscription_scheme.discount,i.data.dropdown_discount_decimals),n=i.data.dropdown_discounted_format.replace("%d",o).replace("%p",n)):s.totals.regular_price>s.totals.price&&(c=wc_mnm_price_format(s.totals.regular_price,{html:!1}),n=i.data.dropdown_sale_format.replace("%r",c).replace("%p",n))),m.schemes_view.$el_dropdown.find("option[value="+i.data.subscription_scheme.key+"]").text(n)),a.trigger("wcsatt-updated-mnm-price",[t,i,_,d]))}),_.$mnm_form.trigger("wcsatt-updated-mnm-subscription-totals",[_,d]))},m&&this.integrate()},h("body").on("wc-mnm-initializing",function(e,t){new i(t)}))}(jQuery);