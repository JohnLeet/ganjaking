!function(c){c(function(){var t,e;(t=t||c(".wc-photography-collections-select")).trigger("change.select2"),t=c(t).filter(":not(.enhanced)"),e={placeholder:WCPhotographyCustomerParams.search_placeholder,minimumInputLength:2,multiple:!0,ajax:{url:WCPhotographyCustomerParams.ajax_url,dataType:"json",quietMillis:200,data:function(t){return{term:t.term,action:"wc_photography_search_collections",security:WCPhotographyCustomerParams.search_collections_nonce}},processResults:function(t){return{results:t}}}},t.select2(e).addClass("enhanced"),c("body").on("click",".photography-add-collection a",function(){return c(this).next(".fields").toggle(),!1}).on("click",".photography-add-collection .button",function(){var o=c(this),t=o.closest(".collection-form-field"),a=c("input.new-collection",t),t=a.val();return""===t?a.trigger("focus"):(a.prop("disabled",!0),o.prop("disabled",!0).next(".message").remove(),o.after(' <i class="loading">'+WCPhotographyCustomerParams.loading+"</i>"),c.ajax({url:WCPhotographyCustomerParams.ajax_url,data:{action:"wc_photography_add_collection",security:WCPhotographyCustomerParams.add_collection_nonce,name:t},type:"POST",dataType:"json",success:function(t){var e;a.val(""),a.prop("disabled",!1),o.prop("disabled",!1).next(".loading").remove(),t.success?(e=c(".wc-photography-collections-select"),(t=new Option(t.data.text,t.data.id)).selected=!0,e.append(t)):o.after('<div class="error inline message">'+WCPhotographyCustomerParams.collection_error+"</div>")}})),!1}).on("select2-selecting",".wc-photography-collections-select",function(t){var e=c(this).prev(".wc-photography-collections-select"),o=[];c(".selected-option",e).each(function(t,e){e=c(e);o.push({id:e.attr("data-id"),text:e.text()})}),o.push({id:t.choice.id,text:t.choice.text}),c(this).attr("data-selected",JSON.stringify(o))}).on("select2-removed",".wc-photography-collections-select",function(){var t=c(this).prev(".wc-photography-collections-select"),o=[];c(".selected-option",t).each(function(t,e){e=c(e);o.push({id:e.attr("data-id"),text:e.text()})}),c(this).attr("data-selected",JSON.stringify(o))})})}(jQuery);